{
  "version": 3,
  "sources": ["../../../../../../node_modules/maplibre-gl-draw/dist/mapbox-gl-draw-unminified.js"],
  "sourcesContent": ["var ModeHandler = function(mode, DrawContext) {\n\n  var handlers = {\n    drag: [],\n    click: [],\n    mousemove: [],\n    mousedown: [],\n    mouseup: [],\n    mouseout: [],\n    keydown: [],\n    keyup: [],\n    touchstart: [],\n    touchmove: [],\n    touchend: [],\n    tap: []\n  };\n\n  var ctx = {\n    on: function on(event, selector, fn) {\n      if (handlers[event] === undefined) {\n        throw new Error((\"Invalid event type: \" + event));\n      }\n      handlers[event].push({\n        selector: selector,\n        fn: fn\n      });\n    },\n    render: function render(id) {\n      DrawContext.store.featureChanged(id);\n    }\n  };\n\n  var delegate = function (eventName, event) {\n    var handles = handlers[eventName];\n    var iHandle = handles.length;\n    while (iHandle--) {\n      var handle = handles[iHandle];\n      if (handle.selector(event)) {\n        var skipRender = handle.fn.call(ctx, event);\n        if (!skipRender) {\n          DrawContext.store.render();\n        }\n        DrawContext.ui.updateMapClasses();\n\n        // ensure an event is only handled once\n        // we do this to let modes have multiple overlapping selectors\n        // and relay on order of oppertations to filter\n        break;\n      }\n    }\n  };\n\n  mode.start.call(ctx);\n\n  return {\n    render: mode.render,\n    stop: function stop() {\n      if (mode.stop) { mode.stop(); }\n    },\n    trash: function trash() {\n      if (mode.trash) {\n        mode.trash();\n        DrawContext.store.render();\n      }\n    },\n    combineFeatures: function combineFeatures() {\n      if (mode.combineFeatures) {\n        mode.combineFeatures();\n      }\n    },\n    uncombineFeatures: function uncombineFeatures() {\n      if (mode.uncombineFeatures) {\n        mode.uncombineFeatures();\n      }\n    },\n    drag: function drag(event) {\n      delegate('drag', event);\n    },\n    click: function click(event) {\n      delegate('click', event);\n    },\n    mousemove: function mousemove(event) {\n      delegate('mousemove', event);\n    },\n    mousedown: function mousedown(event) {\n      delegate('mousedown', event);\n    },\n    mouseup: function mouseup(event) {\n      delegate('mouseup', event);\n    },\n    mouseout: function mouseout(event) {\n      delegate('mouseout', event);\n    },\n    keydown: function keydown(event) {\n      delegate('keydown', event);\n    },\n    keyup: function keyup(event) {\n      delegate('keyup', event);\n    },\n    touchstart: function touchstart(event) {\n      delegate('touchstart', event);\n    },\n    touchmove: function touchmove(event) {\n      delegate('touchmove', event);\n    },\n    touchend: function touchend(event) {\n      delegate('touchend', event);\n    },\n    tap: function tap(event) {\n      delegate('tap', event);\n    }\n  };\n};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction getAugmentedNamespace(n) {\n  if (n.__esModule) return n;\n  var f = n.default;\n\tif (typeof f == \"function\") {\n\t\tvar a = function a () {\n\t\t\tif (this instanceof a) {\n\t\t\t\tvar args = [null];\n\t\t\t\targs.push.apply(args, arguments);\n\t\t\t\tvar Ctor = Function.bind.apply(f, args);\n\t\t\t\treturn new Ctor();\n\t\t\t}\n\t\t\treturn f.apply(this, arguments);\n\t\t};\n\t\ta.prototype = f.prototype;\n  } else a = {};\n  Object.defineProperty(a, '__esModule', {value: true});\n\tObject.keys(n).forEach(function (k) {\n\t\tvar d = Object.getOwnPropertyDescriptor(n, k);\n\t\tObject.defineProperty(a, k, d.get ? d : {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn n[k];\n\t\t\t}\n\t\t});\n\t});\n\treturn a;\n}\n\nvar geojsonArea = {};\n\nvar wgs84$1 = {};\n\nwgs84$1.RADIUS = 6378137;\nwgs84$1.FLATTENING = 1/298.257223563;\nwgs84$1.POLAR_RADIUS = 6356752.3142;\n\nvar wgs84 = wgs84$1;\n\ngeojsonArea.geometry = geometry;\ngeojsonArea.ring = ringArea;\n\nfunction geometry(_) {\n    var area = 0, i;\n    switch (_.type) {\n        case 'Polygon':\n            return polygonArea(_.coordinates);\n        case 'MultiPolygon':\n            for (i = 0; i < _.coordinates.length; i++) {\n                area += polygonArea(_.coordinates[i]);\n            }\n            return area;\n        case 'Point':\n        case 'MultiPoint':\n        case 'LineString':\n        case 'MultiLineString':\n            return 0;\n        case 'GeometryCollection':\n            for (i = 0; i < _.geometries.length; i++) {\n                area += geometry(_.geometries[i]);\n            }\n            return area;\n    }\n}\n\nfunction polygonArea(coords) {\n    var area = 0;\n    if (coords && coords.length > 0) {\n        area += Math.abs(ringArea(coords[0]));\n        for (var i = 1; i < coords.length; i++) {\n            area -= Math.abs(ringArea(coords[i]));\n        }\n    }\n    return area;\n}\n\n/**\n * Calculate the approximate area of the polygon were it projected onto\n *     the earth.  Note that this area will be positive if ring is oriented\n *     clockwise, otherwise it will be negative.\n *\n * Reference:\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n *     Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n *     Laboratory, Pasadena, CA, June 2007 http://trs-new.jpl.nasa.gov/dspace/handle/2014/40409\n *\n * Returns:\n * {float} The approximate signed geodesic area of the polygon in square\n *     meters.\n */\n\nfunction ringArea(coords) {\n    var p1, p2, p3, lowerIndex, middleIndex, upperIndex, i,\n    area = 0,\n    coordsLength = coords.length;\n\n    if (coordsLength > 2) {\n        for (i = 0; i < coordsLength; i++) {\n            if (i === coordsLength - 2) {// i = N-2\n                lowerIndex = coordsLength - 2;\n                middleIndex = coordsLength -1;\n                upperIndex = 0;\n            } else if (i === coordsLength - 1) {// i = N-1\n                lowerIndex = coordsLength - 1;\n                middleIndex = 0;\n                upperIndex = 1;\n            } else { // i = 0 to N-3\n                lowerIndex = i;\n                middleIndex = i+1;\n                upperIndex = i+2;\n            }\n            p1 = coords[lowerIndex];\n            p2 = coords[middleIndex];\n            p3 = coords[upperIndex];\n            area += ( rad(p3[0]) - rad(p1[0]) ) * Math.sin( rad(p2[1]));\n        }\n\n        area = area * wgs84.RADIUS * wgs84.RADIUS / 2;\n    }\n\n    return area;\n}\n\nfunction rad(_) {\n    return _ * Math.PI / 180;\n}\n\nvar classes = {\n  CONTROL_BASE: 'maplibregl-ctrl',\n  CONTROL_PREFIX: 'maplibregl-ctrl-',\n  CONTROL_BUTTON: 'mapbox-gl-draw_ctrl-draw-btn',\n  CONTROL_BUTTON_LINE: 'mapbox-gl-draw_line',\n  CONTROL_BUTTON_POLYGON: 'mapbox-gl-draw_polygon',\n  CONTROL_BUTTON_POINT: 'mapbox-gl-draw_point',\n  CONTROL_BUTTON_TRASH: 'mapbox-gl-draw_trash',\n  CONTROL_BUTTON_COMBINE_FEATURES: 'mapbox-gl-draw_combine',\n  CONTROL_BUTTON_UNCOMBINE_FEATURES: 'mapbox-gl-draw_uncombine',\n  CONTROL_BUTTON_SRMODE: 'mapbox-gl-draw_srmode',\n  CONTROL_GROUP: 'maplibregl-ctrl-group',\n  ATTRIBUTION: 'maplibregl-ctrl-attrib',\n  ACTIVE_BUTTON: 'active',\n  BOX_SELECT: 'mapbox-gl-draw_boxselect'\n};\n\nvar sources = {\n  HOT: 'mapbox-gl-draw-hot',\n  COLD: 'mapbox-gl-draw-cold'\n};\n\nvar cursors = {\n  ADD: 'add',\n  MOVE: 'move',\n  DRAG: 'drag',\n  POINTER: 'pointer',\n  NONE: 'none'\n};\n\nvar types$1 = {\n  POLYGON: 'polygon',\n  LINE: 'line_string',\n  POINT: 'point'\n};\n\nvar geojsonTypes = {\n  FEATURE: 'Feature',\n  POLYGON: 'Polygon',\n  LINE_STRING: 'LineString',\n  POINT: 'Point',\n  FEATURE_COLLECTION: 'FeatureCollection',\n  MULTI_PREFIX: 'Multi',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon'\n};\n\nvar modes$1 = {\n  DRAW_LINE_STRING: 'draw_line_string',\n  DRAW_POLYGON: 'draw_polygon',\n  DRAW_POINT: 'draw_point',\n  SIMPLE_SELECT: 'simple_select',\n  DIRECT_SELECT: 'direct_select',\n  SCALE_ROTATE: 'srmode',\n  STATIC: 'static'\n};\n\nvar events$1 = {\n  CREATE: 'draw.create',\n  DELETE: 'draw.delete',\n  UPDATE: 'draw.update',\n  SELECTION_CHANGE: 'draw.selectionchange',\n  MODE_CHANGE: 'draw.modechange',\n  ACTIONABLE: 'draw.actionable',\n  RENDER: 'draw.render',\n  COMBINE_FEATURES: 'draw.combine',\n  UNCOMBINE_FEATURES: 'draw.uncombine'\n};\n\nvar updateActions = {\n  MOVE: 'move',\n  CHANGE_COORDINATES: 'change_coordinates'\n};\n\nvar meta = {\n  FEATURE: 'feature',\n  MIDPOINT: 'midpoint',\n  VERTEX: 'vertex'\n};\n\nvar activeStates = {\n  ACTIVE: 'true',\n  INACTIVE: 'false'\n};\n\nvar interactions = [\n  'scrollZoom',\n  'boxZoom',\n  'dragRotate',\n  'dragPan',\n  'keyboard',\n  'doubleClickZoom',\n  'touchZoomRotate'\n];\n\nvar LAT_MIN$1 = -90;\nvar LAT_RENDERED_MIN$1 = -85;\nvar LAT_MAX$1 = 90;\nvar LAT_RENDERED_MAX$1 = 85;\nvar LNG_MIN$1 = -270;\nvar LNG_MAX$1 = 270;\n\nvar Constants = /*#__PURE__*/Object.freeze({\n__proto__: null,\nclasses: classes,\nsources: sources,\ncursors: cursors,\ntypes: types$1,\ngeojsonTypes: geojsonTypes,\nmodes: modes$1,\nevents: events$1,\nupdateActions: updateActions,\nmeta: meta,\nactiveStates: activeStates,\ninteractions: interactions,\nLAT_MIN: LAT_MIN$1,\nLAT_RENDERED_MIN: LAT_RENDERED_MIN$1,\nLAT_MAX: LAT_MAX$1,\nLAT_RENDERED_MAX: LAT_RENDERED_MAX$1,\nLNG_MIN: LNG_MIN$1,\nLNG_MAX: LNG_MAX$1\n});\n\nvar FEATURE_SORT_RANKS = {\n  Point: 0,\n  LineString: 1,\n  MultiLineString: 1,\n  Polygon: 2\n};\n\nfunction comparator(a, b) {\n  var score = FEATURE_SORT_RANKS[a.geometry.type] - FEATURE_SORT_RANKS[b.geometry.type];\n\n  if (score === 0 && a.geometry.type === geojsonTypes.POLYGON) {\n    return a.area - b.area;\n  }\n\n  return score;\n}\n\n// Sort in the order above, then sort polygons by area ascending.\nfunction sortFeatures(features) {\n  return features.map(function (feature) {\n    if (feature.geometry.type === geojsonTypes.POLYGON) {\n      feature.area = geojsonArea.geometry({\n        type: geojsonTypes.FEATURE,\n        property: {},\n        geometry: feature.geometry\n      });\n    }\n    return feature;\n  }).sort(comparator).map(function (feature) {\n    delete feature.area;\n    return feature;\n  });\n}\n\n/**\n * Returns a bounding box representing the event's location.\n *\n * @param {Event} mapEvent - Mapbox GL JS map event, with a point properties.\n * @return {Array<Array<number>>} Bounding box.\n */\nfunction mapEventToBoundingBox(mapEvent, buffer) {\n  if ( buffer === void 0 ) buffer = 0;\n\n  return [\n    [mapEvent.point.x - buffer, mapEvent.point.y - buffer],\n    [mapEvent.point.x + buffer, mapEvent.point.y + buffer]\n  ];\n}\n\nfunction StringSet(items) {\n  this._items = {};\n  this._nums = {};\n  this._length = items ? items.length : 0;\n  if (!items) { return; }\n  for (var i = 0, l = items.length; i < l; i++) {\n    this.add(items[i]);\n    if (items[i] === undefined) { continue; }\n    if (typeof items[i] === 'string') { this._items[items[i]] = i; }\n    else { this._nums[items[i]] = i; }\n\n  }\n}\n\nStringSet.prototype.add = function(x) {\n  if (this.has(x)) { return this; }\n  this._length++;\n  if (typeof x === 'string') { this._items[x] = this._length; }\n  else { this._nums[x] = this._length; }\n  return this;\n};\n\nStringSet.prototype.delete = function(x) {\n  if (this.has(x) === false) { return this; }\n  this._length--;\n  delete this._items[x];\n  delete this._nums[x];\n  return this;\n};\n\nStringSet.prototype.has = function(x) {\n  if (typeof x !== 'string' && typeof x !== 'number') { return false; }\n  return this._items[x] !== undefined || this._nums[x] !== undefined;\n};\n\nStringSet.prototype.values = function() {\n  var this$1$1 = this;\n\n  var values = [];\n  Object.keys(this._items).forEach(function (k) {\n    values.push({ k: k, v: this$1$1._items[k] });\n  });\n  Object.keys(this._nums).forEach(function (k) {\n    values.push({ k: JSON.parse(k), v: this$1$1._nums[k] });\n  });\n\n  return values.sort(function (a, b) { return a.v - b.v; }).map(function (a) { return a.k; });\n};\n\nStringSet.prototype.clear = function() {\n  this._length = 0;\n  this._items = {};\n  this._nums = {};\n  return this;\n};\n\nvar META_TYPES = [\n  meta.FEATURE,\n  meta.MIDPOINT,\n  meta.VERTEX\n];\n\n// Requires either event or bbox\nvar featuresAt = {\n  click: featuresAtClick,\n  touch: featuresAtTouch\n};\n\nfunction featuresAtClick(event, bbox, ctx) {\n  return featuresAt$1(event, bbox, ctx, ctx.options.clickBuffer);\n}\n\nfunction featuresAtTouch(event, bbox, ctx) {\n  return featuresAt$1(event, bbox, ctx, ctx.options.touchBuffer);\n}\n\nfunction featuresAt$1(event, bbox, ctx, buffer) {\n  if (ctx.map === null) { return []; }\n\n  var box = (event) ? mapEventToBoundingBox(event, buffer) : bbox;\n\n  var queryParams = {};\n  if (ctx.options.styles) { queryParams.layers = ctx.options.styles.map(function (s) { return s.id; }); }\n\n  var features = ctx.map.queryRenderedFeatures(box, queryParams)\n    .filter(function (feature) { return META_TYPES.indexOf(feature.properties.meta) !== -1; });\n\n  var featureIds = new StringSet();\n  var uniqueFeatures = [];\n  features.forEach(function (feature) {\n    var featureId = feature.properties.id;\n    if (featureIds.has(featureId)) { return; }\n    featureIds.add(featureId);\n    uniqueFeatures.push(feature);\n  });\n\n  return sortFeatures(uniqueFeatures);\n}\n\nfunction getFeatureAtAndSetCursors(event, ctx) {\n  var features = featuresAt.click(event, null, ctx);\n  var classes = { mouse: cursors.NONE };\n\n  if (features[0]) {\n    classes.mouse = (features[0].properties.active === activeStates.ACTIVE) ?\n      cursors.MOVE : cursors.POINTER;\n    classes.feature = features[0].properties.meta;\n  }\n\n  if (ctx.events.currentModeName().indexOf('draw') !== -1) {\n    classes.mouse = cursors.ADD;\n  }\n\n  ctx.ui.queueMapClasses(classes);\n  ctx.ui.updateMapClasses();\n\n  return features[0];\n}\n\nfunction euclideanDistance(a, b) {\n  var x = a.x - b.x;\n  var y = a.y - b.y;\n  return Math.sqrt((x * x) + (y * y));\n}\n\nvar FINE_TOLERANCE = 4;\nvar GROSS_TOLERANCE = 12;\nvar INTERVAL = 500;\n\nfunction isClick(start, end, options) {\n  if ( options === void 0 ) options = {};\n\n  var fineTolerance = (options.fineTolerance != null) ? options.fineTolerance : FINE_TOLERANCE;\n  var grossTolerance = (options.grossTolerance != null) ? options.grossTolerance : GROSS_TOLERANCE;\n  var interval = (options.interval != null) ? options.interval : INTERVAL;\n\n  start.point = start.point || end.point;\n  start.time = start.time || end.time;\n  var moveDistance = euclideanDistance(start.point, end.point);\n\n  return moveDistance < fineTolerance ||\n    (moveDistance < grossTolerance && (end.time - start.time) < interval);\n}\n\nvar TAP_TOLERANCE = 25;\nvar TAP_INTERVAL = 250;\n\nfunction isTap(start, end, options) {\n  if ( options === void 0 ) options = {};\n\n  var tolerance = (options.tolerance != null) ? options.tolerance : TAP_TOLERANCE;\n  var interval = (options.interval != null) ? options.interval : TAP_INTERVAL;\n\n  start.point = start.point || end.point;\n  start.time = start.time || end.time;\n  var moveDistance = euclideanDistance(start.point, end.point);\n\n  return moveDistance < tolerance && (end.time - start.time) < interval;\n}\n\nvar hat$2 = {exports: {}};\n\nvar hat = hat$2.exports = function (bits, base) {\n    if (!base) { base = 16; }\n    if (bits === undefined) { bits = 128; }\n    if (bits <= 0) { return '0'; }\n    \n    var digits = Math.log(Math.pow(2, bits)) / Math.log(base);\n    for (var i = 2; digits === Infinity; i *= 2) {\n        digits = Math.log(Math.pow(2, bits / i)) / Math.log(base) * i;\n    }\n    \n    var rem = digits - Math.floor(digits);\n    \n    var res = '';\n    \n    for (var i = 0; i < Math.floor(digits); i++) {\n        var x = Math.floor(Math.random() * base).toString(base);\n        res = x + res;\n    }\n    \n    if (rem) {\n        var b = Math.pow(base, rem);\n        var x = Math.floor(Math.random() * b).toString(base);\n        res = x + res;\n    }\n    \n    var parsed = parseInt(res, base);\n    if (parsed !== Infinity && parsed >= Math.pow(2, bits)) {\n        return hat(bits, base)\n    }\n    else { return res; }\n};\n\nhat.rack = function (bits, base, expandBy) {\n    var fn = function (data) {\n        var iters = 0;\n        do {\n            if (iters ++ > 10) {\n                if (expandBy) { bits += expandBy; }\n                else { throw new Error('too many ID collisions, use more bits') }\n            }\n            \n            var id = hat(bits, base);\n        } while (Object.hasOwnProperty.call(hats, id));\n        \n        hats[id] = data;\n        return id;\n    };\n    var hats = fn.hats = {};\n    \n    fn.get = function (id) {\n        return fn.hats[id];\n    };\n    \n    fn.set = function (id, value) {\n        fn.hats[id] = value;\n        return fn;\n    };\n    \n    fn.bits = bits || 128;\n    fn.base = base || 16;\n    return fn;\n};\n\nvar hatExports = hat$2.exports;\nvar hat$1 = /*@__PURE__*/getDefaultExportFromCjs(hatExports);\n\nvar Feature = function(ctx, geojson) {\n  this.ctx = ctx;\n  this.properties = geojson.properties || {};\n  this.coordinates = geojson.geometry.coordinates;\n  this.id = geojson.id || hat$1();\n  this.type = geojson.geometry.type;\n};\n\nFeature.prototype.changed = function() {\n  this.ctx.store.featureChanged(this.id);\n};\n\nFeature.prototype.incomingCoords = function(coords) {\n  this.setCoordinates(coords);\n};\n\nFeature.prototype.setCoordinates = function(coords) {\n  this.coordinates = coords;\n  this.changed();\n};\n\nFeature.prototype.getCoordinates = function() {\n  return JSON.parse(JSON.stringify(this.coordinates));\n};\n\nFeature.prototype.setProperty = function(property, value) {\n  this.properties[property] = value;\n};\n\nFeature.prototype.toGeoJSON = function() {\n  return JSON.parse(JSON.stringify({\n    id: this.id,\n    type: geojsonTypes.FEATURE,\n    properties: this.properties,\n    geometry: {\n      coordinates: this.getCoordinates(),\n      type: this.type\n    }\n  }));\n};\n\nFeature.prototype.internal = function(mode) {\n  var properties = {\n    id: this.id,\n    meta: meta.FEATURE,\n    'meta:type': this.type,\n    active: activeStates.INACTIVE,\n    mode: mode\n  };\n\n  if (this.ctx.options.userProperties) {\n    for (var name in this.properties) {\n      properties[(\"user_\" + name)] = this.properties[name];\n    }\n  }\n\n  return {\n    type: geojsonTypes.FEATURE,\n    properties: properties,\n    geometry: {\n      coordinates: this.getCoordinates(),\n      type: this.type\n    }\n  };\n};\n\nvar Point$2 = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n};\n\nPoint$2.prototype = Object.create(Feature.prototype);\n\nPoint$2.prototype.isValid = function() {\n  return typeof this.coordinates[0] === 'number' &&\n    typeof this.coordinates[1] === 'number';\n};\n\nPoint$2.prototype.updateCoordinate = function(pathOrLng, lngOrLat, lat) {\n  if (arguments.length === 3) {\n    this.coordinates = [lngOrLat, lat];\n  } else {\n    this.coordinates = [pathOrLng, lngOrLat];\n  }\n  this.changed();\n};\n\nPoint$2.prototype.getCoordinate = function() {\n  return this.getCoordinates();\n};\n\nvar LineString = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n};\n\nLineString.prototype = Object.create(Feature.prototype);\n\nLineString.prototype.isValid = function() {\n  return this.coordinates.length > 1;\n};\n\nLineString.prototype.addCoordinate = function(path, lng, lat) {\n  this.changed();\n  var id = parseInt(path, 10);\n  this.coordinates.splice(id, 0, [lng, lat]);\n};\n\nLineString.prototype.getCoordinate = function(path) {\n  var id = parseInt(path, 10);\n  return JSON.parse(JSON.stringify(this.coordinates[id]));\n};\n\nLineString.prototype.removeCoordinate = function(path) {\n  this.changed();\n  this.coordinates.splice(parseInt(path, 10), 1);\n};\n\nLineString.prototype.updateCoordinate = function(path, lng, lat) {\n  var id = parseInt(path, 10);\n  this.coordinates[id] = [lng, lat];\n  this.changed();\n};\n\nvar Polygon = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n  this.coordinates = this.coordinates.map(function (ring) { return ring.slice(0, -1); });\n};\n\nPolygon.prototype = Object.create(Feature.prototype);\n\nPolygon.prototype.isValid = function() {\n  if (this.coordinates.length === 0) { return false; }\n  return this.coordinates.every(function (ring) { return ring.length > 2; });\n};\n\n// Expects valid geoJSON polygon geometry: first and last positions must be equivalent.\nPolygon.prototype.incomingCoords = function(coords) {\n  this.coordinates = coords.map(function (ring) { return ring.slice(0, -1); });\n  this.changed();\n};\n\n// Does NOT expect valid geoJSON polygon geometry: first and last positions should not be equivalent.\nPolygon.prototype.setCoordinates = function(coords) {\n  this.coordinates = coords;\n  this.changed();\n};\n\nPolygon.prototype.addCoordinate = function(path, lng, lat) {\n  this.changed();\n  var ids = path.split('.').map(function (x) { return parseInt(x, 10); });\n\n  var ring = this.coordinates[ids[0]];\n\n  ring.splice(ids[1], 0, [lng, lat]);\n};\n\nPolygon.prototype.removeCoordinate = function(path) {\n  this.changed();\n  var ids = path.split('.').map(function (x) { return parseInt(x, 10); });\n  var ring = this.coordinates[ids[0]];\n  if (ring) {\n    ring.splice(ids[1], 1);\n    if (ring.length < 3) {\n      this.coordinates.splice(ids[0], 1);\n    }\n  }\n};\n\nPolygon.prototype.getCoordinate = function(path) {\n  var ids = path.split('.').map(function (x) { return parseInt(x, 10); });\n  var ring = this.coordinates[ids[0]];\n  return JSON.parse(JSON.stringify(ring[ids[1]]));\n};\n\nPolygon.prototype.getCoordinates = function() {\n  return this.coordinates.map(function (coords) { return coords.concat([coords[0]]); });\n};\n\nPolygon.prototype.updateCoordinate = function(path, lng, lat) {\n  this.changed();\n  var parts = path.split('.');\n  var ringId = parseInt(parts[0], 10);\n  var coordId = parseInt(parts[1], 10);\n\n  if (this.coordinates[ringId] === undefined) {\n    this.coordinates[ringId] = [];\n  }\n\n  this.coordinates[ringId][coordId] = [lng, lat];\n};\n\nvar models = {\n  MultiPoint: Point$2,\n  MultiLineString: LineString,\n  MultiPolygon: Polygon\n};\n\nvar takeAction = function (features, action, path, lng, lat) {\n  var parts = path.split('.');\n  var idx = parseInt(parts[0], 10);\n  var tail = (!parts[1]) ? null : parts.slice(1).join('.');\n  return features[idx][action](tail, lng, lat);\n};\n\nvar MultiFeature = function(ctx, geojson) {\n  Feature.call(this, ctx, geojson);\n\n  delete this.coordinates;\n  this.model = models[geojson.geometry.type];\n  if (this.model === undefined) { throw new TypeError(((geojson.geometry.type) + \" is not a valid type\")); }\n  this.features = this._coordinatesToFeatures(geojson.geometry.coordinates);\n};\n\nMultiFeature.prototype = Object.create(Feature.prototype);\n\nMultiFeature.prototype._coordinatesToFeatures = function(coordinates) {\n  var this$1$1 = this;\n\n  var Model = this.model.bind(this);\n  return coordinates.map(function (coords) { return new Model(this$1$1.ctx, {\n    id: hat$1(),\n    type: geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      coordinates: coords,\n      type: this$1$1.type.replace('Multi', '')\n    }\n  }); });\n};\n\nMultiFeature.prototype.isValid = function() {\n  return this.features.every(function (f) { return f.isValid(); });\n};\n\nMultiFeature.prototype.setCoordinates = function(coords) {\n  this.features = this._coordinatesToFeatures(coords);\n  this.changed();\n};\n\nMultiFeature.prototype.getCoordinate = function(path) {\n  return takeAction(this.features, 'getCoordinate', path);\n};\n\nMultiFeature.prototype.getCoordinates = function() {\n  return JSON.parse(JSON.stringify(this.features.map(function (f) {\n    if (f.type === geojsonTypes.POLYGON) { return f.getCoordinates(); }\n    return f.coordinates;\n  })));\n};\n\nMultiFeature.prototype.updateCoordinate = function(path, lng, lat) {\n  takeAction(this.features, 'updateCoordinate', path, lng, lat);\n  this.changed();\n};\n\nMultiFeature.prototype.addCoordinate = function(path, lng, lat) {\n  takeAction(this.features, 'addCoordinate', path, lng, lat);\n  this.changed();\n};\n\nMultiFeature.prototype.removeCoordinate = function(path) {\n  takeAction(this.features, 'removeCoordinate', path);\n  this.changed();\n};\n\nMultiFeature.prototype.getFeatures = function() {\n  return this.features;\n};\n\nfunction ModeInterface(ctx) {\n  this.map = ctx.map;\n  this.drawConfig = JSON.parse(JSON.stringify(ctx.options || {}));\n  this._ctx = ctx;\n}\n\n/**\n * Sets Draw's interal selected state\n * @name this.setSelected\n * @param {DrawFeature[]} - whats selected as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js)\n */\nModeInterface.prototype.setSelected = function(features) {\n  return this._ctx.store.setSelected(features);\n};\n\n/**\n * Sets Draw's internal selected coordinate state\n * @name this.setSelectedCoordinates\n * @param {Object[]} coords - a array of {coord_path: 'string', feature_id: 'string'}\n */\nModeInterface.prototype.setSelectedCoordinates = function(coords) {\n  var this$1$1 = this;\n\n  this._ctx.store.setSelectedCoordinates(coords);\n  coords.reduce(function (m, c) {\n    if (m[c.feature_id] === undefined) {\n      m[c.feature_id] = true;\n      this$1$1._ctx.store.get(c.feature_id).changed();\n    }\n    return m;\n  }, {});\n};\n\n/**\n * Get all selected features as a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js)\n * @name this.getSelected\n * @returns {DrawFeature[]}\n */\nModeInterface.prototype.getSelected = function() {\n  return this._ctx.store.getSelected();\n};\n\n/**\n * Get the ids of all currently selected features\n * @name this.getSelectedIds\n * @returns {String[]}\n */\nModeInterface.prototype.getSelectedIds = function() {\n  return this._ctx.store.getSelectedIds();\n};\n\n/**\n * Check if a feature is selected\n * @name this.isSelected\n * @param {String} id - a feature id\n * @returns {Boolean}\n */\nModeInterface.prototype.isSelected = function(id) {\n  return this._ctx.store.isSelected(id);\n};\n\n/**\n * Get a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js) by its id\n * @name this.getFeature\n * @param {String} id - a feature id\n * @returns {DrawFeature}\n */\nModeInterface.prototype.getFeature = function(id) {\n  return this._ctx.store.get(id);\n};\n\n/**\n * Add a feature to draw's internal selected state\n * @name this.select\n * @param {String} id\n */\nModeInterface.prototype.select = function(id) {\n  return this._ctx.store.select(id);\n};\n\n/**\n * Remove a feature from draw's internal selected state\n * @name this.delete\n * @param {String} id\n */\nModeInterface.prototype.deselect = function(id) {\n  return this._ctx.store.deselect(id);\n};\n\n/**\n * Delete a feature from draw\n * @name this.deleteFeature\n * @param {String} id - a feature id\n */\nModeInterface.prototype.deleteFeature = function(id, opts) {\n  if ( opts === void 0 ) opts = {};\n\n  return this._ctx.store.delete(id, opts);\n};\n\n/**\n * Add a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js) to draw.\n * See `this.newFeature` for converting geojson into a DrawFeature\n * @name this.addFeature\n * @param {DrawFeature} feature - the feature to add\n */\nModeInterface.prototype.addFeature = function(feature) {\n  return this._ctx.store.add(feature);\n};\n\n/**\n * Clear all selected features\n */\nModeInterface.prototype.clearSelectedFeatures = function() {\n  return this._ctx.store.clearSelected();\n};\n\n/**\n * Clear all selected coordinates\n */\nModeInterface.prototype.clearSelectedCoordinates = function() {\n  return this._ctx.store.clearSelectedCoordinates();\n};\n\n/**\n * Indicate if the different action are currently possible with your mode\n * See [draw.actionalbe](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#drawactionable) for a list of possible actions. All undefined actions are set to **false** by default\n * @name this.setActionableState\n * @param {Object} actions\n */\nModeInterface.prototype.setActionableState = function(actions) {\n  if ( actions === void 0 ) actions = {};\n\n  var newSet = {\n    trash: actions.trash || false,\n    combineFeatures: actions.combineFeatures || false,\n    uncombineFeatures: actions.uncombineFeatures || false\n  };\n  return this._ctx.events.actionable(newSet);\n};\n\n/**\n * Trigger a mode change\n * @name this.changeMode\n * @param {String} mode - the mode to transition into\n * @param {Object} opts - the options object to pass to the new mode\n * @param {Object} eventOpts - used to control what kind of events are emitted.\n */\nModeInterface.prototype.changeMode = function(mode, opts, eventOpts) {\n  if ( opts === void 0 ) opts = {};\n  if ( eventOpts === void 0 ) eventOpts = {};\n\n  return this._ctx.events.changeMode(mode, opts, eventOpts);\n};\n\n/**\n * Update the state of draw map classes\n * @name this.updateUIClasses\n * @param {Object} opts\n */\nModeInterface.prototype.updateUIClasses = function(opts) {\n  return this._ctx.ui.queueMapClasses(opts);\n};\n\n/**\n * If a name is provided it makes that button active, else if makes all buttons inactive\n * @name this.activateUIButton\n * @param {String?} name - name of the button to make active, leave as undefined to set buttons to be inactive\n */\nModeInterface.prototype.activateUIButton = function(name) {\n  return this._ctx.ui.setActiveButton(name);\n};\n\n/**\n * Get the features at the location of an event object or in a bbox\n * @name this.featuresAt\n * @param {Event||NULL} event - a mapbox-gl event object\n * @param {BBOX||NULL} bbox - the area to get features from\n * @param {String} bufferType - is this `click` or `tap` event, defaults to click\n */\nModeInterface.prototype.featuresAt = function(event, bbox, bufferType) {\n  if ( bufferType === void 0 ) bufferType = 'click';\n\n  if (bufferType !== 'click' && bufferType !== 'touch') { throw new Error('invalid buffer type'); }\n  return featuresAt[bufferType](event, bbox, this._ctx);\n};\n\n/**\n * Create a new [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js) from geojson\n * @name this.newFeature\n * @param {GeoJSONFeature} geojson\n * @returns {DrawFeature}\n */\nModeInterface.prototype.newFeature = function(geojson) {\n  var type = geojson.geometry.type;\n  if (type === geojsonTypes.POINT) { return new Point$2(this._ctx, geojson); }\n  if (type === geojsonTypes.LINE_STRING) { return new LineString(this._ctx, geojson); }\n  if (type === geojsonTypes.POLYGON) { return new Polygon(this._ctx, geojson); }\n  return new MultiFeature(this._ctx, geojson);\n};\n\n/**\n * Check is an object is an instance of a [DrawFeature](https://github.com/mapbox/mapbox-gl-draw/blob/main/src/feature_types/feature.js)\n * @name this.isInstanceOf\n * @param {String} type - `Point`, `LineString`, `Polygon`, `MultiFeature`\n * @param {Object} feature - the object that needs to be checked\n * @returns {Boolean}\n */\nModeInterface.prototype.isInstanceOf = function(type, feature) {\n  if (type === geojsonTypes.POINT) { return feature instanceof Point$2; }\n  if (type === geojsonTypes.LINE_STRING) { return feature instanceof LineString; }\n  if (type === geojsonTypes.POLYGON) { return feature instanceof Polygon; }\n  if (type === 'MultiFeature') { return feature instanceof MultiFeature; }\n  throw new Error((\"Unknown feature class: \" + type));\n};\n\n/**\n * Force draw to rerender the feature of the provided id\n * @name this.doRender\n * @param {String} id - a feature id\n */\nModeInterface.prototype.doRender = function(id) {\n  return this._ctx.store.featureChanged(id);\n};\n\n/**\n * Triggered while a mode is being transitioned into.\n * @param opts {Object} - this is the object passed via `draw.changeMode('mode', opts)`;\n * @name MODE.onSetup\n * @returns {Object} - this object will be passed to all other life cycle functions\n */\nModeInterface.prototype.onSetup = function() {};\n\n/**\n * Triggered when a drag event is detected on the map\n * @name MODE.onDrag\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onDrag = function() {};\n\n/**\n * Triggered when the mouse is clicked\n * @name MODE.onClick\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onClick = function() {};\n\n/**\n * Triggered with the mouse is moved\n * @name MODE.onMouseMove\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseMove = function() {};\n\n/**\n * Triggered when the mouse button is pressed down\n * @name MODE.onMouseDown\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseDown = function() {};\n\n/**\n * Triggered when the mouse button is released\n * @name MODE.onMouseUp\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseUp = function() {};\n\n/**\n * Triggered when the mouse leaves the map's container\n * @name MODE.onMouseOut\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onMouseOut = function() {};\n\n/**\n * Triggered when a key up event is detected\n * @name MODE.onKeyUp\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onKeyUp = function() {};\n\n/**\n * Triggered when a key down event is detected\n * @name MODE.onKeyDown\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onKeyDown = function() {};\n\n/**\n * Triggered when a touch event is started\n * @name MODE.onTouchStart\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchStart = function() {};\n\n/**\n * Triggered when one drags thier finger on a mobile device\n * @name MODE.onTouchMove\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchMove = function() {};\n\n/**\n * Triggered when one removes their finger from the map\n * @name MODE.onTouchEnd\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTouchEnd = function() {};\n\n/**\n * Triggered when one quicly taps the map\n * @name MODE.onTap\n * @param state {Object} - a mutible state object created by onSetup\n * @param e {Object} - the captured event that is triggering this life cycle event\n */\nModeInterface.prototype.onTap = function() {};\n\n/**\n * Triggered when the mode is being exited, to be used for cleaning up artifacts such as invalid features\n * @name MODE.onStop\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onStop = function() {};\n\n/**\n * Triggered when [draw.trash()](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#trash-draw) is called.\n * @name MODE.onTrash\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onTrash = function() {};\n\n/**\n * Triggered when [draw.combineFeatures()](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#combinefeatures-draw) is called.\n * @name MODE.onCombineFeature\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onCombineFeature = function() {};\n\n/**\n * Triggered when [draw.uncombineFeatures()](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#uncombinefeatures-draw) is called.\n * @name MODE.onUncombineFeature\n * @param state {Object} - a mutible state object created by onSetup\n */\nModeInterface.prototype.onUncombineFeature = function() {};\n\n/**\n * Triggered per feature on render to convert raw features into set of features for display on the map\n * See [styling draw](https://github.com/mapbox/mapbox-gl-draw/blob/main/API.md#styling-draw) for information about what geojson properties Draw uses as part of rendering.\n * @name MODE.toDisplayFeatures\n * @param state {Object} - a mutible state object created by onSetup\n * @param geojson {Object} - a geojson being evaulated. To render, pass to `display`.\n * @param display {Function} - all geojson objects passed to this be rendered onto the map\n */\nModeInterface.prototype.toDisplayFeatures = function() {\n  throw new Error('You must overwrite toDisplayFeatures');\n};\n\nvar eventMapper = {\n  drag: 'onDrag',\n  click: 'onClick',\n  mousemove: 'onMouseMove',\n  mousedown: 'onMouseDown',\n  mouseup: 'onMouseUp',\n  mouseout: 'onMouseOut',\n  keyup: 'onKeyUp',\n  keydown: 'onKeyDown',\n  touchstart: 'onTouchStart',\n  touchmove: 'onTouchMove',\n  touchend: 'onTouchEnd',\n  tap: 'onTap'\n};\n\nvar eventKeys = Object.keys(eventMapper);\n\nfunction objectToMode(modeObject) {\n  var modeObjectKeys = Object.keys(modeObject);\n\n  return function(ctx, startOpts) {\n    if ( startOpts === void 0 ) startOpts = {};\n\n    var state = {};\n\n    var mode = modeObjectKeys.reduce(function (m, k) {\n      m[k] = modeObject[k];\n      return m;\n    }, new ModeInterface(ctx));\n\n    function wrapper(eh) {\n      return function (e) { return mode[eh](state, e); };\n    }\n\n    return {\n      start: function start() {\n        var this$1$1 = this;\n\n        state = mode.onSetup(startOpts); // this should set ui buttons\n\n        // Adds event handlers for all event options\n        // add sets the selector to false for all\n        // handlers that are not present in the mode\n        // to reduce on render calls for functions that\n        // have no logic\n        eventKeys.forEach(function (key) {\n          var modeHandler = eventMapper[key];\n          var selector = function () { return false; };\n          if (modeObject[modeHandler]) {\n            selector = function () { return true; };\n          }\n          this$1$1.on(key, selector, wrapper(modeHandler));\n        });\n\n      },\n      stop: function stop() {\n        mode.onStop(state);\n      },\n      trash: function trash() {\n        mode.onTrash(state);\n      },\n      combineFeatures: function combineFeatures() {\n        mode.onCombineFeatures(state);\n      },\n      uncombineFeatures: function uncombineFeatures() {\n        mode.onUncombineFeatures(state);\n      },\n      render: function render(geojson, push) {\n        mode.toDisplayFeatures(state, geojson, push);\n      }\n    };\n  };\n}\n\nvar SRCenter = {\n    Center: 0, // rotate or scale around center of polygon\n    Opposite: 1, // rotate or scale around opposite side of polygon\n  };\n\nfunction events(ctx) {\n\n  var modes = Object.keys(ctx.options.modes).reduce(function (m, k) {\n    m[k] = objectToMode(ctx.options.modes[k]);\n    return m;\n  }, {});\n\n  var mouseDownInfo = {};\n  var touchStartInfo = {};\n  var events = {};\n  var currentModeName = null;\n  var currentMode = null;\n\n  events.drag = function(event, isDrag) {\n    if (isDrag({\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      ctx.ui.queueMapClasses({ mouse: cursors.DRAG });\n      currentMode.drag(event);\n    } else {\n      event.originalEvent.stopPropagation();\n    }\n  };\n\n  events.mousedrag = function(event) {\n    events.drag(event, function (endInfo) { return !isClick(mouseDownInfo, endInfo); });\n  };\n\n  events.touchdrag = function(event) {\n    events.drag(event, function (endInfo) { return !isTap(touchStartInfo, endInfo); });\n  };\n\n  events.mousemove = function(event) {\n    var button = event.originalEvent.buttons !== undefined ? event.originalEvent.buttons : event.originalEvent.which;\n    if (button === 1) {\n      return events.mousedrag(event);\n    }\n    var target = getFeatureAtAndSetCursors(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousemove(event);\n  };\n\n  events.mousedown = function(event) {\n    mouseDownInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    var target = getFeatureAtAndSetCursors(event, ctx);\n    event.featureTarget = target;\n    currentMode.mousedown(event);\n  };\n\n  events.mouseup = function(event) {\n    var target = getFeatureAtAndSetCursors(event, ctx);\n    event.featureTarget = target;\n\n    if (isClick(mouseDownInfo, {\n      point: event.point,\n      time: new Date().getTime()\n    })) {\n      currentMode.click(event);\n    } else {\n      currentMode.mouseup(event);\n    }\n  };\n\n  events.mouseout = function(event) {\n    currentMode.mouseout(event);\n  };\n\n  events.touchstart = function(event) {\n    // Prevent emulated mouse events because we will fully handle the touch here.\n    // This does not stop the touch events from propogating to mapbox though.\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    touchStartInfo = {\n      time: new Date().getTime(),\n      point: event.point\n    };\n    var target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    currentMode.touchstart(event);\n  };\n\n  events.touchmove = function(event) {\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    currentMode.touchmove(event);\n    return events.touchdrag(event);\n  };\n\n  events.touchend = function(event) {\n    event.originalEvent.preventDefault();\n    if (!ctx.options.touchEnabled) {\n      return;\n    }\n\n    var target = featuresAt.touch(event, null, ctx)[0];\n    event.featureTarget = target;\n    if (isTap(touchStartInfo, {\n      time: new Date().getTime(),\n      point: event.point\n    })) {\n      currentMode.tap(event);\n    } else {\n      currentMode.touchend(event);\n    }\n  };\n\n  // 8 - Backspace\n  // 46 - Delete\n  var isKeyModeValid = function (code) { return !(code === 8 || code === 46 || (code >= 48 && code <= 57)); };\n\n  events.keydown = function(event) {\n    var isMapElement = (event.srcElement || event.target).classList.contains('maplibregl-canvas');\n    if (!isMapElement) { return; } // we only handle events on the map\n\n    if ((event.keyCode === 8 || event.keyCode === 46) && ctx.options.controls.trash) {\n      event.preventDefault();\n      currentMode.trash();\n    } else if (isKeyModeValid(event.keyCode)) {\n      currentMode.keydown(event);\n    } else if (event.keyCode === 49 && ctx.options.controls.point) {\n      changeMode(modes$1.DRAW_POINT);\n    } else if (event.keyCode === 50 && ctx.options.controls.line_string) {\n      changeMode(modes$1.DRAW_LINE_STRING);\n    } else if (event.keyCode === 51 && ctx.options.controls.polygon) {\n      changeMode(modes$1.DRAW_POLYGON);\n    }\n  };\n\n  events.keyup = function(event) {\n    if (isKeyModeValid(event.keyCode)) {\n      currentMode.keyup(event);\n    }\n  };\n\n  events.zoomend = function() {\n    ctx.store.changeZoom();\n  };\n\n  events.data = function(event) {\n    if (event.dataType === 'style') {\n      var setup = ctx.setup;\n      var map = ctx.map;\n      var options = ctx.options;\n      var store = ctx.store;\n      var hasLayers = options.styles.some(function (style) { return map.getLayer(style.id); });\n      if (!hasLayers) {\n        setup.addLayers();\n        store.setDirty();\n        store.render();\n      }\n    }\n  };\n\n  function changeMode(modename, nextModeOptions, eventOptions) {\n    if ( eventOptions === void 0 ) eventOptions = {};\n\n    currentMode.stop();\n\n    var modebuilder = modes[modename];\n    if (modebuilder === undefined) {\n      throw new Error((modename + \" is not valid\"));\n    }\n    currentModeName = modename;\n    var mode = modebuilder(ctx, nextModeOptions);\n    currentMode = ModeHandler(mode, ctx);\n\n    if (!eventOptions.silent) {\n      ctx.map.fire(events$1.MODE_CHANGE, { mode: modename});\n    }\n\n    ctx.store.setDirty();\n    ctx.store.render();\n  }\n\n  var actionState = {\n    trash: false,\n    combineFeatures: false,\n    uncombineFeatures: false\n  };\n\n  function actionable(actions) {\n    var changed = false;\n    Object.keys(actions).forEach(function (action) {\n      if (actionState[action] === undefined) { throw new Error('Invalid action type'); }\n      if (actionState[action] !== actions[action]) { changed = true; }\n      actionState[action] = actions[action];\n    });\n    if (changed) { ctx.map.fire(events$1.ACTIONABLE, { actions: actionState }); }\n  }\n\n  var api = {\n    start: function start() {\n      currentModeName = ctx.options.defaultMode;\n      currentMode = ModeHandler(modes[currentModeName](ctx), ctx);\n    },\n    changeMode: changeMode,\n    actionable: actionable,\n    currentModeName: function currentModeName$1() {\n      return currentModeName;\n    },\n    currentModeRender: function currentModeRender(geojson, push) {\n      return currentMode.render(geojson, push);\n    },\n    fire: function fire(name, event) {\n      if (events[name]) {\n        events[name](event);\n      }\n    },\n    addEventListeners: function addEventListeners() {\n      ctx.map.on('mousemove', events.mousemove);\n      ctx.map.on('mousedown', events.mousedown);\n      ctx.map.on('mouseup', events.mouseup);\n      ctx.map.on('data', events.data);\n\n      ctx.map.on('touchmove', events.touchmove);\n      ctx.map.on('touchstart', events.touchstart);\n      ctx.map.on('touchend', events.touchend);\n\n      ctx.container.addEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.addEventListener('keydown', events.keydown);\n        ctx.container.addEventListener('keyup', events.keyup);\n      }\n    },\n    removeEventListeners: function removeEventListeners() {\n      ctx.map.off('mousemove', events.mousemove);\n      ctx.map.off('mousedown', events.mousedown);\n      ctx.map.off('mouseup', events.mouseup);\n      ctx.map.off('data', events.data);\n\n      ctx.map.off('touchmove', events.touchmove);\n      ctx.map.off('touchstart', events.touchstart);\n      ctx.map.off('touchend', events.touchend);\n\n      ctx.container.removeEventListener('mouseout', events.mouseout);\n\n      if (ctx.options.keybindings) {\n        ctx.container.removeEventListener('keydown', events.keydown);\n        ctx.container.removeEventListener('keyup', events.keyup);\n      }\n    },\n    trash: function trash(options) {\n      currentMode.trash(options);\n    },\n    combineFeatures: function combineFeatures() {\n      currentMode.combineFeatures();\n    },\n    uncombineFeatures: function uncombineFeatures() {\n      currentMode.uncombineFeatures();\n    },\n    getMode: function getMode() {\n      return currentModeName;\n    }\n  };\n\n  return api;\n}\n\n/**\n * Derive a dense array (no `undefined`s) from a single value or array.\n *\n * @param {any} x\n * @return {Array<any>}\n */\nfunction toDenseArray(x) {\n  return [].concat(x).filter(function (y) { return y !== undefined; });\n}\n\nfunction render() {\n  // eslint-disable-next-line no-invalid-this\n  var store = this;\n  var mapExists = store.ctx.map && store.ctx.map.getSource(sources.HOT) !== undefined;\n  if (!mapExists) { return cleanup(); }\n\n  var mode = store.ctx.events.currentModeName();\n\n  store.ctx.ui.queueMapClasses({ mode: mode });\n\n  var newHotIds = [];\n  var newColdIds = [];\n\n  if (store.isDirty) {\n    newColdIds = store.getAllIds();\n  } else {\n    newHotIds = store.getChangedIds().filter(function (id) { return store.get(id) !== undefined; });\n    newColdIds = store.sources.hot.filter(function (geojson) { return geojson.properties.id && newHotIds.indexOf(geojson.properties.id) === -1 && store.get(geojson.properties.id) !== undefined; }).map(function (geojson) { return geojson.properties.id; });\n  }\n\n  store.sources.hot = [];\n  var lastColdCount = store.sources.cold.length;\n  store.sources.cold = store.isDirty ? [] : store.sources.cold.filter(function (geojson) {\n    var id = geojson.properties.id || geojson.properties.parent;\n    return newHotIds.indexOf(id) === -1;\n  });\n\n  var coldChanged = lastColdCount !== store.sources.cold.length || newColdIds.length > 0;\n  newHotIds.forEach(function (id) { return renderFeature(id, 'hot'); });\n  newColdIds.forEach(function (id) { return renderFeature(id, 'cold'); });\n\n  function renderFeature(id, source) {\n    var feature = store.get(id);\n    var featureInternal = feature.internal(mode);\n    store.ctx.events.currentModeRender(featureInternal, function (geojson) {\n      store.sources[source].push(geojson);\n    });\n  }\n\n  if (coldChanged) {\n    store.ctx.map.getSource(sources.COLD).setData({\n      type: geojsonTypes.FEATURE_COLLECTION,\n      features: store.sources.cold\n    });\n  }\n\n  store.ctx.map.getSource(sources.HOT).setData({\n    type: geojsonTypes.FEATURE_COLLECTION,\n    features: store.sources.hot\n  });\n\n  if (store._emitSelectionChange) {\n    store.ctx.map.fire(events$1.SELECTION_CHANGE, {\n      features: store.getSelected().map(function (feature) { return feature.toGeoJSON(); }),\n      points: store.getSelectedCoordinates().map(function (coordinate) { return ({\n        type: geojsonTypes.FEATURE,\n        properties: {},\n        geometry: {\n          type: geojsonTypes.POINT,\n          coordinates: coordinate.coordinates\n        }\n      }); })\n    });\n    store._emitSelectionChange = false;\n  }\n\n  if (store._deletedFeaturesToEmit.length) {\n    var geojsonToEmit = store._deletedFeaturesToEmit.map(function (feature) { return feature.toGeoJSON(); });\n\n    store._deletedFeaturesToEmit = [];\n\n    store.ctx.map.fire(events$1.DELETE, {\n      features: geojsonToEmit\n    });\n  }\n\n  cleanup();\n  store.ctx.map.fire(events$1.RENDER, {});\n\n  function cleanup() {\n    store.isDirty = false;\n    store.clearChangedIds();\n  }\n}\n\nfunction Store(ctx) {\n  var this$1$1 = this;\n\n  this._features = {};\n  this._featureIds = new StringSet();\n  this._selectedFeatureIds = new StringSet();\n  this._selectedCoordinates = [];\n  this._changedFeatureIds = new StringSet();\n  this._deletedFeaturesToEmit = [];\n  this._emitSelectionChange = false;\n  this._mapInitialConfig = {};\n  this.ctx = ctx;\n  this.sources = {\n    hot: [],\n    cold: []\n  };\n\n  // Deduplicate requests to render and tie them to animation frames.\n  var renderRequest;\n  this.render = function () {\n    if (!renderRequest) {\n      renderRequest = requestAnimationFrame(function () {\n        renderRequest = null;\n        render.call(this$1$1);\n      });\n    }\n  };\n  this.isDirty = false;\n}\n\n\n/**\n * Delays all rendering until the returned function is invoked\n * @return {Function} renderBatch\n */\nStore.prototype.createRenderBatch = function() {\n  var this$1$1 = this;\n\n  var holdRender = this.render;\n  var numRenders = 0;\n  this.render = function() {\n    numRenders++;\n  };\n\n  return function () {\n    this$1$1.render = holdRender;\n    if (numRenders > 0) {\n      this$1$1.render();\n    }\n  };\n};\n\n/**\n * Sets the store's state to dirty.\n * @return {Store} this\n */\nStore.prototype.setDirty = function() {\n  this.isDirty = true;\n  return this;\n};\n\n/**\n * Sets a feature's state to changed.\n * @param {string} featureId\n * @return {Store} this\n */\nStore.prototype.featureChanged = function(featureId) {\n  this._changedFeatureIds.add(featureId);\n  return this;\n};\n\n/**\n * Gets the ids of all features currently in changed state.\n * @return {Store} this\n */\nStore.prototype.getChangedIds = function() {\n  return this._changedFeatureIds.values();\n};\n\n/**\n * Sets all features to unchanged state.\n * @return {Store} this\n */\nStore.prototype.clearChangedIds = function() {\n  this._changedFeatureIds.clear();\n  return this;\n};\n\n/**\n * Gets the ids of all features in the store.\n * @return {Store} this\n */\nStore.prototype.getAllIds = function() {\n  return this._featureIds.values();\n};\n\n/**\n * Adds a feature to the store.\n * @param {Object} feature\n *\n * @return {Store} this\n */\nStore.prototype.add = function(feature) {\n  this.featureChanged(feature.id);\n  this._features[feature.id] = feature;\n  this._featureIds.add(feature.id);\n  return this;\n};\n\n/**\n * Deletes a feature or array of features from the store.\n * Cleans up after the deletion by deselecting the features.\n * If changes were made, sets the state to the dirty\n * and fires an event.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.delete = function(featureIds, options) {\n  var this$1$1 = this;\n  if ( options === void 0 ) options = {};\n\n  toDenseArray(featureIds).forEach(function (id) {\n    if (!this$1$1._featureIds.has(id)) { return; }\n    this$1$1._featureIds.delete(id);\n    this$1$1._selectedFeatureIds.delete(id);\n    if (!options.silent) {\n      if (this$1$1._deletedFeaturesToEmit.indexOf(this$1$1._features[id]) === -1) {\n        this$1$1._deletedFeaturesToEmit.push(this$1$1._features[id]);\n      }\n    }\n    delete this$1$1._features[id];\n    this$1$1.isDirty = true;\n  });\n  refreshSelectedCoordinates(this, options);\n  return this;\n};\n\n/**\n * Returns a feature in the store matching the specified value.\n * @return {Object | undefined} feature\n */\nStore.prototype.get = function(id) {\n  return this._features[id];\n};\n\n/**\n * Returns all features in the store.\n * @return {Array<Object>}\n */\nStore.prototype.getAll = function() {\n  var this$1$1 = this;\n\n  return Object.keys(this._features).map(function (id) { return this$1$1._features[id]; });\n};\n\n/**\n * Adds features to the current selection.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.select = function(featureIds, options) {\n  var this$1$1 = this;\n  if ( options === void 0 ) options = {};\n\n  toDenseArray(featureIds).forEach(function (id) {\n    if (this$1$1._selectedFeatureIds.has(id)) { return; }\n    this$1$1._selectedFeatureIds.add(id);\n    this$1$1._changedFeatureIds.add(id);\n    if (!options.silent) {\n      this$1$1._emitSelectionChange = true;\n    }\n  });\n  return this;\n};\n\n/**\n * Deletes features from the current selection.\n * @param {string | Array<string>} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.deselect = function(featureIds, options) {\n  var this$1$1 = this;\n  if ( options === void 0 ) options = {};\n\n  toDenseArray(featureIds).forEach(function (id) {\n    if (!this$1$1._selectedFeatureIds.has(id)) { return; }\n    this$1$1._selectedFeatureIds.delete(id);\n    this$1$1._changedFeatureIds.add(id);\n    if (!options.silent) {\n      this$1$1._emitSelectionChange = true;\n    }\n  });\n  refreshSelectedCoordinates(this, options);\n  return this;\n};\n\n/**\n * Clears the current selection.\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.clearSelected = function(options) {\n  if ( options === void 0 ) options = {};\n\n  this.deselect(this._selectedFeatureIds.values(), { silent: options.silent });\n  return this;\n};\n\n/**\n * Sets the store's selection, clearing any prior values.\n * If no feature ids are passed, the store is just cleared.\n * @param {string | Array<string> | undefined} featureIds\n * @param {Object} [options]\n * @param {Object} [options.silent] - If `true`, this invocation will not fire an event.\n * @return {Store} this\n */\nStore.prototype.setSelected = function(featureIds, options) {\n  var this$1$1 = this;\n  if ( options === void 0 ) options = {};\n\n  featureIds = toDenseArray(featureIds);\n\n  // Deselect any features not in the new selection\n  this.deselect(this._selectedFeatureIds.values().filter(function (id) { return featureIds.indexOf(id) === -1; }), { silent: options.silent });\n\n  // Select any features in the new selection that were not already selected\n  this.select(featureIds.filter(function (id) { return !this$1$1._selectedFeatureIds.has(id); }), { silent: options.silent });\n\n  return this;\n};\n\n/**\n * Sets the store's coordinates selection, clearing any prior values.\n * @param {Array<Array<string>>} coordinates\n * @return {Store} this\n */\nStore.prototype.setSelectedCoordinates = function(coordinates) {\n  this._selectedCoordinates = coordinates;\n  this._emitSelectionChange = true;\n  return this;\n};\n\n/**\n * Clears the current coordinates selection.\n * @param {Object} [options]\n * @return {Store} this\n */\nStore.prototype.clearSelectedCoordinates = function() {\n  this._selectedCoordinates = [];\n  this._emitSelectionChange = true;\n  return this;\n};\n\n/**\n * Returns the ids of features in the current selection.\n * @return {Array<string>} Selected feature ids.\n */\nStore.prototype.getSelectedIds = function() {\n  return this._selectedFeatureIds.values();\n};\n\n/**\n * Returns features in the current selection.\n * @return {Array<Object>} Selected features.\n */\nStore.prototype.getSelected = function() {\n  var this$1$1 = this;\n\n  return this._selectedFeatureIds.values().map(function (id) { return this$1$1.get(id); });\n};\n\n/**\n * Returns selected coordinates in the currently selected feature.\n * @return {Array<Object>} Selected coordinates.\n */\nStore.prototype.getSelectedCoordinates = function() {\n  var this$1$1 = this;\n\n  var selected = this._selectedCoordinates.map(function (coordinate) {\n    var feature = this$1$1.get(coordinate.feature_id);\n    return {\n      coordinates: feature.getCoordinate(coordinate.coord_path)\n    };\n  });\n  return selected;\n};\n\n/**\n * Indicates whether a feature is selected.\n * @param {string} featureId\n * @return {boolean} `true` if the feature is selected, `false` if not.\n */\nStore.prototype.isSelected = function(featureId) {\n  return this._selectedFeatureIds.has(featureId);\n};\n\n/**\n * Sets a property on the given feature\n * @param {string} featureId\n * @param {string} property property\n * @param {string} property value\n*/\nStore.prototype.setFeatureProperty = function(featureId, property, value) {\n  this.get(featureId).setProperty(property, value);\n  this.featureChanged(featureId);\n};\n\nfunction refreshSelectedCoordinates(store, options) {\n  var newSelectedCoordinates = store._selectedCoordinates.filter(function (point) { return store._selectedFeatureIds.has(point.feature_id); });\n  if (store._selectedCoordinates.length !== newSelectedCoordinates.length && !options.silent) {\n    store._emitSelectionChange = true;\n  }\n  store._selectedCoordinates = newSelectedCoordinates;\n}\n\n/**\n * Stores the initial config for a map, so that we can set it again after we're done.\n*/\nStore.prototype.storeMapConfig = function() {\n  var this$1$1 = this;\n\n  interactions.forEach(function (interaction) {\n    var interactionSet = this$1$1.ctx.map[interaction];\n    if (interactionSet) {\n      this$1$1._mapInitialConfig[interaction] = this$1$1.ctx.map[interaction].isEnabled();\n    }\n  });\n};\n\n/**\n * Restores the initial config for a map, ensuring all is well.\n*/\nStore.prototype.restoreMapConfig = function() {\n  var this$1$1 = this;\n\n  Object.keys(this._mapInitialConfig).forEach(function (key) {\n    var value = this$1$1._mapInitialConfig[key];\n    if (value) {\n      this$1$1.ctx.map[key].enable();\n    } else {\n      this$1$1.ctx.map[key].disable();\n    }\n  });\n};\n\n/**\n * Returns the initial state of an interaction setting.\n * @param {string} interaction\n * @return {boolean} `true` if the interaction is enabled, `false` if not.\n * Defaults to `true`. (Todo: include defaults.)\n*/\nStore.prototype.getInitialConfigValue = function(interaction) {\n  if (this._mapInitialConfig[interaction] !== undefined) {\n    return this._mapInitialConfig[interaction];\n  } else {\n    // This needs to be set to whatever the default is for that interaction\n    // It seems to be true for all cases currently, so let's send back `true`.\n    return true;\n  }\n};\n\nvar immutable = extend;\n\nvar hasOwnProperty$1 = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var arguments$1 = arguments;\n\n    var target = {};\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments$1[i];\n\n        for (var key in source) {\n            if (hasOwnProperty$1.call(source, key)) {\n                target[key] = source[key];\n            }\n        }\n    }\n\n    return target\n}\n\nvar xtend = /*@__PURE__*/getDefaultExportFromCjs(immutable);\n\nvar classTypes = ['mode', 'feature', 'mouse'];\n\nfunction ui(ctx) {\n  var buttonElements = {};\n  var activeButton = null;\n\n  var currentMapClasses = {\n    mode: null, // e.g. mode-direct_select\n    feature: null, // e.g. feature-vertex\n    mouse: null // e.g. mouse-move\n  };\n\n  var nextMapClasses = {\n    mode: null,\n    feature: null,\n    mouse: null\n  };\n\n  function clearMapClasses() {\n    queueMapClasses({mode:null, feature:null, mouse:null});\n    updateMapClasses();\n  }\n\n  function queueMapClasses(options) {\n    nextMapClasses = xtend(nextMapClasses, options);\n  }\n\n  function updateMapClasses() {\n    var ref, ref$1;\n\n    if (!ctx.container) { return; }\n\n    var classesToRemove = [];\n    var classesToAdd = [];\n\n    classTypes.forEach(function (type) {\n      if (nextMapClasses[type] === currentMapClasses[type]) { return; }\n\n      classesToRemove.push((type + \"-\" + (currentMapClasses[type])));\n      if (nextMapClasses[type] !== null) {\n        classesToAdd.push((type + \"-\" + (nextMapClasses[type])));\n      }\n    });\n\n    if (classesToRemove.length > 0) {\n      (ref = ctx.container.classList).remove.apply(ref, classesToRemove);\n    }\n\n    if (classesToAdd.length > 0) {\n      (ref$1 = ctx.container.classList).add.apply(ref$1, classesToAdd);\n    }\n\n    currentMapClasses = xtend(currentMapClasses, nextMapClasses);\n  }\n\n  function createControlButton(id, options) {\n    if ( options === void 0 ) options = {};\n\n    var button = document.createElement('button');\n    button.className = (classes.CONTROL_BUTTON) + \" \" + (options.className);\n    button.setAttribute('title', options.title);\n    options.container.appendChild(button);\n\n    button.addEventListener('click', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      var clickedButton = e.target;\n      if (clickedButton === activeButton) {\n        deactivateButtons();\n        options.onDeactivate();\n        return;\n      }\n\n      setActiveButton(id);\n      options.onActivate();\n    }, true);\n\n    return button;\n  }\n\n  function deactivateButtons() {\n    if (!activeButton) { return; }\n    activeButton.classList.remove(classes.ACTIVE_BUTTON);\n    activeButton = null;\n  }\n\n  function setActiveButton(id) {\n    deactivateButtons();\n\n    var button = buttonElements[id];\n    if (!button) { return; }\n\n    if (button && id !== 'trash') {\n      button.classList.add(classes.ACTIVE_BUTTON);\n      activeButton = button;\n    }\n  }\n\n  function addButtons() {\n    var controls = ctx.options.controls;\n    var controlGroup = document.createElement('div');\n    controlGroup.className = (classes.CONTROL_GROUP) + \" \" + (classes.CONTROL_BASE);\n\n    if (!controls) { return controlGroup; }\n\n    if (controls[types$1.POINT]) {\n      buttonElements[types$1.POINT] = createControlButton(types$1.POINT, {\n        container: controlGroup,\n        className: classes.CONTROL_BUTTON_POINT,\n        title: (\"Marker tool \" + (ctx.options.keybindings ? '(m)' : '')),\n        onActivate: function () { return ctx.events.changeMode(modes$1.DRAW_POINT); },\n        onDeactivate: function () { return ctx.events.trash(); }\n      });\n    }\n    \n    if (controls[types$1.LINE]) {\n      buttonElements[types$1.LINE] = createControlButton(types$1.LINE, {\n        container: controlGroup,\n        className: classes.CONTROL_BUTTON_LINE,\n        title: (\"LineString tool \" + (ctx.options.keybindings ? '(l)' : '')),\n        onActivate: function () { return ctx.events.changeMode(modes$1.DRAW_LINE_STRING); },\n        onDeactivate: function () { return ctx.events.trash(); }\n      });\n    }\n\n    if (controls[types$1.POLYGON]) {\n      buttonElements[types$1.POLYGON] = createControlButton(types$1.POLYGON, {\n        container: controlGroup,\n        className: classes.CONTROL_BUTTON_POLYGON,\n        title: (\"Polygon tool \" + (ctx.options.keybindings ? '(p)' : '')),\n        onActivate: function () { return ctx.events.changeMode(modes$1.DRAW_POLYGON); },\n        onDeactivate: function () { return ctx.events.trash(); }\n      });\n    }\n\n    if (controls.trash) {\n      buttonElements.trash = createControlButton('trash', {\n        container: controlGroup,\n        className: classes.CONTROL_BUTTON_TRASH,\n        title: 'Delete',\n        onActivate: function () {\n          ctx.events.trash();\n        }\n      });\n    }\n\n    if (controls.combine_features) {\n      buttonElements.combine_features = createControlButton('combineFeatures', {\n        container: controlGroup,\n        className: classes.CONTROL_BUTTON_COMBINE_FEATURES,\n        title: 'Combine',\n        onActivate: function () {\n          ctx.events.combineFeatures();\n        }\n      });\n    }\n\n    if (controls.uncombine_features) {\n      buttonElements.uncombine_features = createControlButton('uncombineFeatures', {\n        container: controlGroup,\n        className: classes.CONTROL_BUTTON_UNCOMBINE_FEATURES,\n        title: 'Uncombine',\n        onActivate: function () {\n          ctx.events.uncombineFeatures();\n        }\n      });\n    }\n\n    if (controls.srmode) {\n      buttonElements.srmode = createControlButton('srmode', {\n        container: controlGroup,\n        className: classes.CONTROL_BUTTON_SRMODE,\n        title: 'SRMode',\n        onActivate: function () {\n          var tmp = ctx.store.getSelected();\n          if(tmp.length === 0 || tmp[0].type === \"Point\" || tmp[0].type === \"MultiPoint\"){\n            deactivateButtons();\n            return;\n          }\n          ctx.events.changeMode('SRMode', {\n              canScale: true,\n              canRotate: true, // only rotation enabled\n              canTrash: false, // disable feature delete\n            \n              rotatePivot: SRCenter.Center, // rotate around center\n              scaleCenter: SRCenter.Opposite, // scale around opposite vertex\n            \n              singleRotationPoint: true, // only one rotation point\n              rotationPointRadius: 1.2, // offset rotation point\n            \n              canSelectFeatures: true,\n            });\n        },\n        onDeactivate: function () {\n          ctx.events.changeMode(modes$1.SIMPLE_SELECT);\n        }\n      });\n    }\n\n    return controlGroup;\n  }\n\n  function removeButtons() {\n    Object.keys(buttonElements).forEach(function (buttonId) {\n      var button = buttonElements[buttonId];\n      if (button.parentNode) {\n        button.parentNode.removeChild(button);\n      }\n      delete buttonElements[buttonId];\n    });\n  }\n\n  return {\n    setActiveButton: setActiveButton,\n    queueMapClasses: queueMapClasses,\n    updateMapClasses: updateMapClasses,\n    clearMapClasses: clearMapClasses,\n    addButtons: addButtons,\n    removeButtons: removeButtons,\n    deactivateButtons: deactivateButtons\n  };\n}\n\nfunction runSetup(ctx) {\n\n  var controlContainer = null;\n  var mapLoadedInterval = null;\n\n  var setup = {\n    onRemove: function onRemove() {\n      // Stop connect attempt in the event that control is removed before map is loaded\n      ctx.map.off('load', setup.connect);\n      clearInterval(mapLoadedInterval);\n\n      setup.removeLayers();\n      ctx.store.restoreMapConfig();\n      ctx.ui.removeButtons();\n      ctx.events.removeEventListeners();\n      ctx.ui.clearMapClasses();\n      if (ctx.boxZoomInitial) { ctx.map.boxZoom.enable(); }\n      ctx.map = null;\n      ctx.container = null;\n      ctx.store = null;\n\n      if (controlContainer && controlContainer.parentNode) { controlContainer.parentNode.removeChild(controlContainer); }\n      controlContainer = null;\n\n      return this;\n    },\n    connect: function connect() {\n      ctx.map.off('load', setup.connect);\n      clearInterval(mapLoadedInterval);\n      setup.addLayers();\n      ctx.store.storeMapConfig();\n      ctx.events.addEventListeners();\n    },\n    onAdd: function onAdd(map) {\n      {\n        // Monkey patch to resolve breaking change to `fire` introduced by\n        // mapbox-gl-js. See mapbox/mapbox-gl-draw/issues/766.\n        var _fire = map.fire;\n        map.fire = function(type, event) {\n          // eslint-disable-next-line\n          var args = arguments;\n\n          if (_fire.length === 1 && arguments.length !== 1) {\n            args = [xtend({}, { type: type }, event)];\n          }\n\n          return _fire.apply(map, args);\n        };\n      }\n\n      ctx.map = map;\n      ctx.events = events(ctx);\n      ctx.ui = ui(ctx);\n      ctx.container = map.getContainer();\n      ctx.store = new Store(ctx);\n\n\n      controlContainer = ctx.ui.addButtons();\n\n      if (ctx.options.boxSelect) {\n        ctx.boxZoomInitial = map.boxZoom.isEnabled();\n        map.boxZoom.disable();\n        // Need to toggle dragPan on and off or else first\n        // dragPan disable attempt in simple_select doesn't work\n        map.dragPan.disable();\n        map.dragPan.enable();\n      }\n\n      if (map.loaded()) {\n        setup.connect();\n      } else {\n        map.on('load', setup.connect);\n        mapLoadedInterval = setInterval(function () { if (map.loaded()) { setup.connect(); } }, 16);\n      }\n\n      ctx.events.start();\n      return controlContainer;\n    },\n    addLayers: function addLayers() {\n      // drawn features style\n      if(!ctx.map.getSource(sources.COLD)){\n        ctx.map.addSource(sources.COLD, {\n          data: {\n            type: geojsonTypes.FEATURE_COLLECTION,\n            features: []\n          },\n          type: 'geojson'\n        });\n      }      \n\n      // hot features style\n      if(!ctx.map.getSource(sources.HOT)){\n        ctx.map.addSource(sources.HOT, {\n          data: {\n            type: geojsonTypes.FEATURE_COLLECTION,\n            features: []\n          },\n          type: 'geojson'\n        });\n      }      \n\n      ctx.options.styles.forEach(function (style) {\n        if(!ctx.map.getLayer(style.id)){\n          ctx.map.addLayer(style);\n        }\n      });\n\n      ctx.store.setDirty(true);\n      ctx.store.render();\n    },\n    // Check for layers and sources before attempting to remove\n    // If user adds draw control and removes it before the map is loaded, layers and sources will be missing\n    removeLayers: function removeLayers() {\n      ctx.options.styles.forEach(function (style) {\n        if (ctx.map.getLayer(style.id)) {\n          ctx.map.removeLayer(style.id);\n        }\n      });\n\n      if (ctx.map.getSource(sources.COLD)) {\n        ctx.map.removeSource(sources.COLD);\n      }\n\n      if (ctx.map.getSource(sources.HOT)) {\n        ctx.map.removeSource(sources.HOT);\n      }\n    }\n  };\n\n  ctx.setup = setup;\n\n  return setup;\n}\n\nvar theme = [\n  {\n    'id': 'gl-draw-polygon-fill-inactive',\n    'type': 'fill',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'fill-color': '#3bb2d0',\n      'fill-outline-color': '#3bb2d0',\n      'fill-opacity': 0.1\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-fill-active',\n    'type': 'fill',\n    'filter': ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    'paint': {\n      'fill-color': '#fbb03b',\n      'fill-outline-color': '#fbb03b',\n      'fill-opacity': 0.1\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-midpoint',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'midpoint']],\n    'paint': {\n      'circle-radius': 3,\n      'circle-color': '#fbb03b'\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-stroke-inactive',\n    'type': 'line',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Polygon'],\n      ['!=', 'mode', 'static']\n    ],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#3bb2d0',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-stroke-active',\n    'type': 'line',\n    'filter': ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-line-inactive',\n    'type': 'line',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'LineString'],\n      ['!=', 'mode', 'static']\n    ],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#3bb2d0',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-line-active',\n    'type': 'line',\n    'filter': ['all',\n      ['==', '$type', 'LineString'],\n      ['==', 'active', 'true']\n    ],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#fbb03b',\n      'line-dasharray': [0.2, 2],\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-and-line-vertex-stroke-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 5,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-and-line-vertex-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'meta', 'vertex'],\n      ['==', '$type', 'Point'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 3,\n      'circle-color': '#fbb03b'\n    }\n  },\n  {\n    'id': 'gl-draw-point-point-stroke-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 5,\n      'circle-opacity': 1,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    'id': 'gl-draw-point-inactive',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', 'active', 'false'],\n      ['==', '$type', 'Point'],\n      ['==', 'meta', 'feature'],\n      ['!=', 'mode', 'static']\n    ],\n    'paint': {\n      'circle-radius': 3,\n      'circle-color': '#3bb2d0'\n    }\n  },\n  {\n    'id': 'gl-draw-point-stroke-active',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', '$type', 'Point'],\n      ['==', 'active', 'true'],\n      ['!=', 'meta', 'midpoint']\n    ],\n    'paint': {\n      'circle-radius': 7,\n      'circle-color': '#fff'\n    }\n  },\n  {\n    'id': 'gl-draw-point-active',\n    'type': 'circle',\n    'filter': ['all',\n      ['==', '$type', 'Point'],\n      ['!=', 'meta', 'midpoint'],\n      ['==', 'active', 'true']],\n    'paint': {\n      'circle-radius': 5,\n      'circle-color': '#fbb03b'\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-fill-static',\n    'type': 'fill',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    'paint': {\n      'fill-color': '#404040',\n      'fill-outline-color': '#404040',\n      'fill-opacity': 0.1\n    }\n  },\n  {\n    'id': 'gl-draw-polygon-stroke-static',\n    'type': 'line',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#404040',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-line-static',\n    'type': 'line',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'LineString']],\n    'layout': {\n      'line-cap': 'round',\n      'line-join': 'round'\n    },\n    'paint': {\n      'line-color': '#404040',\n      'line-width': 2\n    }\n  },\n  {\n    'id': 'gl-draw-point-static',\n    'type': 'circle',\n    'filter': ['all', ['==', 'mode', 'static'], ['==', '$type', 'Point']],\n    'paint': {\n      'circle-radius': 5,\n      'circle-color': '#404040'\n    }\n  }\n];\n\nfunction isOfMetaType(type) {\n  return function(e) {\n    var featureTarget = e.featureTarget;\n    if (!featureTarget) { return false; }\n    if (!featureTarget.properties) { return false; }\n    return featureTarget.properties.meta === type;\n  };\n}\n\nfunction isShiftMousedown(e) {\n  if (!e.originalEvent) { return false; }\n  if (!e.originalEvent.shiftKey) { return false; }\n  return e.originalEvent.button === 0;\n}\n\nfunction isActiveFeature(e) {\n  if (!e.featureTarget) { return false; }\n  if (!e.featureTarget.properties) { return false; }\n  return e.featureTarget.properties.active === activeStates.ACTIVE &&\n    e.featureTarget.properties.meta === meta.FEATURE;\n}\n\nfunction isInactiveFeature(e) {\n  if (!e.featureTarget) { return false; }\n  if (!e.featureTarget.properties) { return false; }\n  return e.featureTarget.properties.active === activeStates.INACTIVE &&\n    e.featureTarget.properties.meta === meta.FEATURE;\n}\n\nfunction noTarget(e) {\n  return e.featureTarget === undefined;\n}\n\nfunction isFeature(e) {\n  if (!e.featureTarget) { return false; }\n  if (!e.featureTarget.properties) { return false; }\n  return e.featureTarget.properties.meta === meta.FEATURE;\n}\n\nfunction isVertex$2(e) {\n  var featureTarget = e.featureTarget;\n  if (!featureTarget) { return false; }\n  if (!featureTarget.properties) { return false; }\n  return featureTarget.properties.meta === meta.VERTEX;\n}\n\nfunction isShiftDown(e) {\n  if (!e.originalEvent) { return false; }\n  return e.originalEvent.shiftKey === true;\n}\n\nfunction isEscapeKey(e) {\n  return e.keyCode === 27;\n}\n\nfunction isEnterKey(e) {\n  return e.keyCode === 13;\n}\n\nfunction isTrue() {\n  return true;\n}\n\nvar common_selectors = /*#__PURE__*/Object.freeze({\n__proto__: null,\nisOfMetaType: isOfMetaType,\nisShiftMousedown: isShiftMousedown,\nisActiveFeature: isActiveFeature,\nisInactiveFeature: isInactiveFeature,\nnoTarget: noTarget,\nisFeature: isFeature,\nisVertex: isVertex$2,\nisShiftDown: isShiftDown,\nisEscapeKey: isEscapeKey,\nisEnterKey: isEnterKey,\nisTrue: isTrue\n});\n\nvar pointGeometry = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n\nvar Point$1 = /*@__PURE__*/getDefaultExportFromCjs(pointGeometry);\n\n/**\n * Returns a Point representing a mouse event's position\n * relative to a containing element.\n *\n * @param {MouseEvent} mouseEvent\n * @param {Node} container\n * @returns {Point}\n */\nfunction mouseEventPoint(mouseEvent, container) {\n  var rect = container.getBoundingClientRect();\n  return new Point$1(\n    mouseEvent.clientX - rect.left - (container.clientLeft || 0),\n    mouseEvent.clientY - rect.top - (container.clientTop || 0)\n  );\n}\n\n/**\n * Returns GeoJSON for a Point representing the\n * vertex of another feature.\n *\n * @param {string} parentId\n * @param {Array<number>} coordinates\n * @param {string} path - Dot-separated numbers indicating exactly\n *   where the point exists within its parent feature's coordinates.\n * @param {boolean} selected\n * @return {GeoJSON} Point\n */\nfunction createVertex(parentId, coordinates, path, selected) {\n  return {\n    type: geojsonTypes.FEATURE,\n    properties: {\n      meta: meta.VERTEX,\n      parent: parentId,\n      coord_path: path,\n      active: (selected) ? activeStates.ACTIVE : activeStates.INACTIVE\n    },\n    geometry: {\n      type: geojsonTypes.POINT,\n      coordinates: coordinates\n    }\n  };\n}\n\nfunction createMidpoint(parent, startVertex, endVertex) {\n  var startCoord = startVertex.geometry.coordinates;\n  var endCoord = endVertex.geometry.coordinates;\n\n  // If a coordinate exceeds the projection, we can't calculate a midpoint,\n  // so run away\n  if (startCoord[1] > LAT_RENDERED_MAX$1 ||\n    startCoord[1] < LAT_RENDERED_MIN$1 ||\n    endCoord[1] > LAT_RENDERED_MAX$1 ||\n    endCoord[1] < LAT_RENDERED_MIN$1) {\n    return null;\n  }\n\n  var mid = {\n    lng: (startCoord[0] + endCoord[0]) / 2,\n    lat: (startCoord[1] + endCoord[1]) / 2\n  };\n\n  return {\n    type: geojsonTypes.FEATURE,\n    properties: {\n      meta: meta.MIDPOINT,\n      parent: parent,\n      lng: mid.lng,\n      lat: mid.lat,\n      coord_path: endVertex.properties.coord_path\n    },\n    geometry: {\n      type: geojsonTypes.POINT,\n      coordinates: [mid.lng, mid.lat]\n    }\n  };\n}\n\nfunction createSupplementaryPoints(geojson, options, basePath) {\n  if ( options === void 0 ) options = {};\n  if ( basePath === void 0 ) basePath = null;\n\n  var ref = geojson.geometry;\n  var type = ref.type;\n  var coordinates = ref.coordinates;\n  var featureId = geojson.properties && geojson.properties.id;\n\n  var supplementaryPoints = [];\n\n  if (type === geojsonTypes.POINT) {\n    // For points, just create a vertex\n    supplementaryPoints.push(createVertex(featureId, coordinates, basePath, isSelectedPath(basePath)));\n  } else if (type === geojsonTypes.POLYGON) {\n    // Cycle through a Polygon's rings and\n    // process each line\n    coordinates.forEach(function (line, lineIndex) {\n      processLine(line, (basePath !== null) ? (basePath + \".\" + lineIndex) : String(lineIndex));\n    });\n  } else if (type === geojsonTypes.LINE_STRING) {\n    processLine(coordinates, basePath);\n  } else if (type.indexOf(geojsonTypes.MULTI_PREFIX) === 0) {\n    processMultiGeometry();\n  }\n\n  function processLine(line, lineBasePath) {\n    var firstPointString = '';\n    var lastVertex = null;\n    line.forEach(function (point, pointIndex) {\n      var pointPath = (lineBasePath !== undefined && lineBasePath !== null) ? (lineBasePath + \".\" + pointIndex) : String(pointIndex);\n      var vertex = createVertex(featureId, point, pointPath, isSelectedPath(pointPath));\n\n      // If we're creating midpoints, check if there was a\n      // vertex before this one. If so, add a midpoint\n      // between that vertex and this one.\n      if (options.midpoints && lastVertex) {\n        var midpoint = createMidpoint(featureId, lastVertex, vertex);\n        if (midpoint) {\n          supplementaryPoints.push(midpoint);\n        }\n      }\n      lastVertex = vertex;\n\n      // A Polygon line's last point is the same as the first point. If we're on the last\n      // point, we want to draw a midpoint before it but not another vertex on it\n      // (since we already a vertex there, from the first point).\n      var stringifiedPoint = JSON.stringify(point);\n      if (firstPointString !== stringifiedPoint) {\n        supplementaryPoints.push(vertex);\n      }\n      if (pointIndex === 0) {\n        firstPointString = stringifiedPoint;\n      }\n    });\n  }\n\n  function isSelectedPath(path) {\n    if (!options.selectedPaths) { return false; }\n    return options.selectedPaths.indexOf(path) !== -1;\n  }\n\n  // Split a multi-geometry into constituent\n  // geometries, and accumulate the supplementary points\n  // for each of those constituents\n  function processMultiGeometry() {\n    var subType = type.replace(geojsonTypes.MULTI_PREFIX, '');\n    coordinates.forEach(function (subCoordinates, index) {\n      var subFeature = {\n        type: geojsonTypes.FEATURE,\n        properties: geojson.properties,\n        geometry: {\n          type: subType,\n          coordinates: subCoordinates\n        }\n      };\n      supplementaryPoints = supplementaryPoints.concat(createSupplementaryPoints(subFeature, options, index));\n    });\n  }\n\n  return supplementaryPoints;\n}\n\nvar doubleClickZoom = {\n  enable: function enable(ctx) {\n    setTimeout(function () {\n      // First check we've got a map and some context.\n      if (!ctx.map || !ctx.map.doubleClickZoom || !ctx._ctx || !ctx._ctx.store || !ctx._ctx.store.getInitialConfigValue) { return; }\n      // Now check initial state wasn't false (we leave it disabled if so)\n      if (!ctx._ctx.store.getInitialConfigValue('doubleClickZoom')) { return; }\n      ctx.map.doubleClickZoom.enable();\n    }, 0);\n  },\n  disable: function disable(ctx) {\n    setTimeout(function () {\n      if (!ctx.map || !ctx.map.doubleClickZoom) { return; }\n      // Always disable here, as it's necessary in some cases.\n      ctx.map.doubleClickZoom.disable();\n    }, 0);\n  }\n};\n\nvar geojsonExtent = {exports: {}};\n\nvar geojsonNormalize$1 = normalize;\n\nvar types = {\n    Point: 'geometry',\n    MultiPoint: 'geometry',\n    LineString: 'geometry',\n    MultiLineString: 'geometry',\n    Polygon: 'geometry',\n    MultiPolygon: 'geometry',\n    GeometryCollection: 'geometry',\n    Feature: 'feature',\n    FeatureCollection: 'featurecollection'\n};\n\n/**\n * Normalize a GeoJSON feature into a FeatureCollection.\n *\n * @param {object} gj geojson data\n * @returns {object} normalized geojson data\n */\nfunction normalize(gj) {\n    if (!gj || !gj.type) { return null; }\n    var type = types[gj.type];\n    if (!type) { return null; }\n\n    if (type === 'geometry') {\n        return {\n            type: 'FeatureCollection',\n            features: [{\n                type: 'Feature',\n                properties: {},\n                geometry: gj\n            }]\n        };\n    } else if (type === 'feature') {\n        return {\n            type: 'FeatureCollection',\n            features: [gj]\n        };\n    } else if (type === 'featurecollection') {\n        return gj;\n    }\n}\n\nvar normalize$1 = /*@__PURE__*/getDefaultExportFromCjs(geojsonNormalize$1);\n\nfunction e(t){switch(t&&t.type||null){case\"FeatureCollection\":return t.features=t.features.reduce(function(t,r){return t.concat(e(r))},[]),t;case\"Feature\":return t.geometry?e(t.geometry).map(function(e){var r={type:\"Feature\",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(r.id=t.id),r}):[t];case\"MultiPoint\":return t.coordinates.map(function(e){return {type:\"Point\",coordinates:e}});case\"MultiPolygon\":return t.coordinates.map(function(e){return {type:\"Polygon\",coordinates:e}});case\"MultiLineString\":return t.coordinates.map(function(e){return {type:\"LineString\",coordinates:e}});case\"GeometryCollection\":return t.geometries.map(e).reduce(function(e,t){return e.concat(t)},[]);case\"Point\":case\"Polygon\":case\"LineString\":return [t]}}\n\nvar index_es = /*#__PURE__*/Object.freeze({\n__proto__: null,\n'default': e\n});\n\nvar require$$1 = /*@__PURE__*/getAugmentedNamespace(index_es);\n\nvar flatten$1 = function flatten(list) {\n    return _flatten(list);\n\n    function _flatten(list) {\n        if (Array.isArray(list) && list.length &&\n            typeof list[0] === 'number') {\n            return [list];\n        }\n        return list.reduce(function (acc, item) {\n            if (Array.isArray(item) && Array.isArray(item[0])) {\n                return acc.concat(_flatten(item));\n            } else {\n                acc.push(item);\n                return acc;\n            }\n        }, []);\n    }\n};\n\nvar geojsonNormalize = geojsonNormalize$1,\n    geojsonFlatten = require$$1,\n    flatten = flatten$1;\n\nif (!(geojsonFlatten instanceof Function)) { geojsonFlatten = geojsonFlatten.default; }\n\nvar geojsonCoords$1 = function(_) {\n    if (!_) { return []; }\n    var normalized = geojsonFlatten(geojsonNormalize(_)),\n        coordinates = [];\n    normalized.features.forEach(function(feature) {\n        if (!feature.geometry) { return; }\n        coordinates = coordinates.concat(flatten(feature.geometry.coordinates));\n    });\n    return coordinates;\n};\n\nvar traverse$2 = {exports: {}};\n\nvar traverse$1 = traverse$2.exports = function (obj) {\n    return new Traverse(obj);\n};\n\nfunction Traverse (obj) {\n    this.value = obj;\n}\n\nTraverse.prototype.get = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            node = undefined;\n            break;\n        }\n        node = node[key];\n    }\n    return node;\n};\n\nTraverse.prototype.has = function (ps) {\n    var node = this.value;\n    for (var i = 0; i < ps.length; i ++) {\n        var key = ps[i];\n        if (!node || !hasOwnProperty.call(node, key)) {\n            return false;\n        }\n        node = node[key];\n    }\n    return true;\n};\n\nTraverse.prototype.set = function (ps, value) {\n    var node = this.value;\n    for (var i = 0; i < ps.length - 1; i ++) {\n        var key = ps[i];\n        if (!hasOwnProperty.call(node, key)) { node[key] = {}; }\n        node = node[key];\n    }\n    node[ps[i]] = value;\n    return value;\n};\n\nTraverse.prototype.map = function (cb) {\n    return walk(this.value, cb, true);\n};\n\nTraverse.prototype.forEach = function (cb) {\n    this.value = walk(this.value, cb, false);\n    return this.value;\n};\n\nTraverse.prototype.reduce = function (cb, init) {\n    var skip = arguments.length === 1;\n    var acc = skip ? this.value : init;\n    this.forEach(function (x) {\n        if (!this.isRoot || !skip) {\n            acc = cb.call(this, acc, x);\n        }\n    });\n    return acc;\n};\n\nTraverse.prototype.paths = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.path); \n    });\n    return acc;\n};\n\nTraverse.prototype.nodes = function () {\n    var acc = [];\n    this.forEach(function (x) {\n        acc.push(this.node);\n    });\n    return acc;\n};\n\nTraverse.prototype.clone = function () {\n    var parents = [], nodes = [];\n    \n    return (function clone (src) {\n        for (var i = 0; i < parents.length; i++) {\n            if (parents[i] === src) {\n                return nodes[i];\n            }\n        }\n        \n        if (typeof src === 'object' && src !== null) {\n            var dst = copy(src);\n            \n            parents.push(src);\n            nodes.push(dst);\n            \n            forEach(objectKeys(src), function (key) {\n                dst[key] = clone(src[key]);\n            });\n            \n            parents.pop();\n            nodes.pop();\n            return dst;\n        }\n        else {\n            return src;\n        }\n    })(this.value);\n};\n\nfunction walk (root, cb, immutable) {\n    var path = [];\n    var parents = [];\n    var alive = true;\n    \n    return (function walker (node_) {\n        var node = immutable ? copy(node_) : node_;\n        var modifiers = {};\n        \n        var keepGoing = true;\n        \n        var state = {\n            node : node,\n            node_ : node_,\n            path : [].concat(path),\n            parent : parents[parents.length - 1],\n            parents : parents,\n            key : path.slice(-1)[0],\n            isRoot : path.length === 0,\n            level : path.length,\n            circular : null,\n            update : function (x, stopHere) {\n                if (!state.isRoot) {\n                    state.parent.node[state.key] = x;\n                }\n                state.node = x;\n                if (stopHere) { keepGoing = false; }\n            },\n            'delete' : function (stopHere) {\n                delete state.parent.node[state.key];\n                if (stopHere) { keepGoing = false; }\n            },\n            remove : function (stopHere) {\n                if (isArray(state.parent.node)) {\n                    state.parent.node.splice(state.key, 1);\n                }\n                else {\n                    delete state.parent.node[state.key];\n                }\n                if (stopHere) { keepGoing = false; }\n            },\n            keys : null,\n            before : function (f) { modifiers.before = f; },\n            after : function (f) { modifiers.after = f; },\n            pre : function (f) { modifiers.pre = f; },\n            post : function (f) { modifiers.post = f; },\n            stop : function () { alive = false; },\n            block : function () { keepGoing = false; }\n        };\n        \n        if (!alive) { return state; }\n        \n        function updateState() {\n            if (typeof state.node === 'object' && state.node !== null) {\n                if (!state.keys || state.node_ !== state.node) {\n                    state.keys = objectKeys(state.node);\n                }\n                \n                state.isLeaf = state.keys.length == 0;\n                \n                for (var i = 0; i < parents.length; i++) {\n                    if (parents[i].node_ === node_) {\n                        state.circular = parents[i];\n                        break;\n                    }\n                }\n            }\n            else {\n                state.isLeaf = true;\n                state.keys = null;\n            }\n            \n            state.notLeaf = !state.isLeaf;\n            state.notRoot = !state.isRoot;\n        }\n        \n        updateState();\n        \n        // use return values to update if defined\n        var ret = cb.call(state, state.node);\n        if (ret !== undefined && state.update) { state.update(ret); }\n        \n        if (modifiers.before) { modifiers.before.call(state, state.node); }\n        \n        if (!keepGoing) { return state; }\n        \n        if (typeof state.node == 'object'\n        && state.node !== null && !state.circular) {\n            parents.push(state);\n            \n            updateState();\n            \n            forEach(state.keys, function (key, i) {\n                path.push(key);\n                \n                if (modifiers.pre) { modifiers.pre.call(state, state.node[key], key); }\n                \n                var child = walker(state.node[key]);\n                if (immutable && hasOwnProperty.call(state.node, key)) {\n                    state.node[key] = child.node;\n                }\n                \n                child.isLast = i == state.keys.length - 1;\n                child.isFirst = i == 0;\n                \n                if (modifiers.post) { modifiers.post.call(state, child); }\n                \n                path.pop();\n            });\n            parents.pop();\n        }\n        \n        if (modifiers.after) { modifiers.after.call(state, state.node); }\n        \n        return state;\n    })(root).node;\n}\n\nfunction copy (src) {\n    if (typeof src === 'object' && src !== null) {\n        var dst;\n        \n        if (isArray(src)) {\n            dst = [];\n        }\n        else if (isDate(src)) {\n            dst = new Date(src.getTime ? src.getTime() : src);\n        }\n        else if (isRegExp(src)) {\n            dst = new RegExp(src);\n        }\n        else if (isError(src)) {\n            dst = { message: src.message };\n        }\n        else if (isBoolean(src)) {\n            dst = new Boolean(src);\n        }\n        else if (isNumber$6(src)) {\n            dst = new Number(src);\n        }\n        else if (isString(src)) {\n            dst = new String(src);\n        }\n        else if (Object.create && Object.getPrototypeOf) {\n            dst = Object.create(Object.getPrototypeOf(src));\n        }\n        else if (src.constructor === Object) {\n            dst = {};\n        }\n        else {\n            var proto =\n                (src.constructor && src.constructor.prototype)\n                || src.__proto__\n                || {}\n            ;\n            var T = function () {};\n            T.prototype = proto;\n            dst = new T;\n        }\n        \n        forEach(objectKeys(src), function (key) {\n            dst[key] = src[key];\n        });\n        return dst;\n    }\n    else { return src; }\n}\n\nvar objectKeys = Object.keys || function keys (obj) {\n    var res = [];\n    for (var key in obj) { res.push(key); }\n    return res;\n};\n\nfunction toS (obj) { return Object.prototype.toString.call(obj) }\nfunction isDate (obj) { return toS(obj) === '[object Date]' }\nfunction isRegExp (obj) { return toS(obj) === '[object RegExp]' }\nfunction isError (obj) { return toS(obj) === '[object Error]' }\nfunction isBoolean (obj) { return toS(obj) === '[object Boolean]' }\nfunction isNumber$6 (obj) { return toS(obj) === '[object Number]' }\nfunction isString (obj) { return toS(obj) === '[object String]' }\n\nvar isArray = Array.isArray || function isArray (xs) {\n    return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nvar forEach = function (xs, fn) {\n    if (xs.forEach) { return xs.forEach(fn) }\n    else { for (var i = 0; i < xs.length; i++) {\n        fn(xs[i], i, xs);\n    } }\n};\n\nforEach(objectKeys(Traverse.prototype), function (key) {\n    traverse$1[key] = function (obj) {\n        var args = [].slice.call(arguments, 1);\n        var t = new Traverse(obj);\n        return t[key].apply(t, args);\n    };\n});\n\nvar hasOwnProperty = Object.hasOwnProperty || function (obj, key) {\n    return key in obj;\n};\n\nvar traverseExports = traverse$2.exports;\n\nvar extent$2 = Extent;\n\nfunction Extent(bbox) {\n    if (!(this instanceof Extent)) {\n        return new Extent(bbox);\n    }\n    this._bbox = bbox || [Infinity, Infinity, -Infinity, -Infinity];\n    this._valid = !!bbox;\n}\n\nExtent.prototype.include = function(ll) {\n    this._valid = true;\n    this._bbox[0] = Math.min(this._bbox[0], ll[0]);\n    this._bbox[1] = Math.min(this._bbox[1], ll[1]);\n    this._bbox[2] = Math.max(this._bbox[2], ll[0]);\n    this._bbox[3] = Math.max(this._bbox[3], ll[1]);\n    return this;\n};\n\nExtent.prototype.equals = function(_) {\n    var other;\n    if (_ instanceof Extent) { other = _.bbox(); } else { other = _; }\n    return this._bbox[0] == other[0] &&\n        this._bbox[1] == other[1] &&\n        this._bbox[2] == other[2] &&\n        this._bbox[3] == other[3];\n};\n\nExtent.prototype.center = function(_) {\n    if (!this._valid) { return null; }\n    return [\n        (this._bbox[0] + this._bbox[2]) / 2,\n        (this._bbox[1] + this._bbox[3]) / 2]\n};\n\nExtent.prototype.union = function(_) {\n    this._valid = true;\n    var other;\n    if (_ instanceof Extent) { other = _.bbox(); } else { other = _; }\n    this._bbox[0] = Math.min(this._bbox[0], other[0]);\n    this._bbox[1] = Math.min(this._bbox[1], other[1]);\n    this._bbox[2] = Math.max(this._bbox[2], other[2]);\n    this._bbox[3] = Math.max(this._bbox[3], other[3]);\n    return this;\n};\n\nExtent.prototype.bbox = function() {\n    if (!this._valid) { return null; }\n    return this._bbox;\n};\n\nExtent.prototype.contains = function(ll) {\n    if (!ll) { return this._fastContains(); }\n    if (!this._valid) { return null; }\n    var lon = ll[0], lat = ll[1];\n    return this._bbox[0] <= lon &&\n        this._bbox[1] <= lat &&\n        this._bbox[2] >= lon &&\n        this._bbox[3] >= lat;\n};\n\nExtent.prototype.intersect = function(_) {\n    if (!this._valid) { return null; }\n\n    var other;\n    if (_ instanceof Extent) { other = _.bbox(); } else { other = _; }\n\n    return !(\n      this._bbox[0] > other[2] ||\n      this._bbox[2] < other[0] ||\n      this._bbox[3] < other[1] ||\n      this._bbox[1] > other[3]\n    );\n};\n\nExtent.prototype._fastContains = function() {\n    if (!this._valid) { return new Function('return null;'); }\n    var body = 'return ' +\n        this._bbox[0] + '<= ll[0] &&' +\n        this._bbox[1] + '<= ll[1] &&' +\n        this._bbox[2] + '>= ll[0] &&' +\n        this._bbox[3] + '>= ll[1]';\n    return new Function('ll', body);\n};\n\nExtent.prototype.polygon = function() {\n    if (!this._valid) { return null; }\n    return {\n        type: 'Polygon',\n        coordinates: [\n            [\n                // W, S\n                [this._bbox[0], this._bbox[1]],\n                // E, S\n                [this._bbox[2], this._bbox[1]],\n                // E, N\n                [this._bbox[2], this._bbox[3]],\n                // W, N\n                [this._bbox[0], this._bbox[3]],\n                // W, S\n                [this._bbox[0], this._bbox[1]]\n            ]\n        ]\n    };\n};\n\nvar geojsonCoords = geojsonCoords$1,\n    traverse = traverseExports,\n    extent = extent$2;\n\nvar geojsonTypesByDataAttributes = {\n    features: ['FeatureCollection'],\n    coordinates: ['Point', 'MultiPoint', 'LineString', 'MultiLineString', 'Polygon', 'MultiPolygon'],\n    geometry: ['Feature'],\n    geometries: ['GeometryCollection']\n};\n\nvar dataAttributes = Object.keys(geojsonTypesByDataAttributes);\n\ngeojsonExtent.exports = function(_) {\n    return getExtent(_).bbox();\n};\n\ngeojsonExtent.exports.polygon = function(_) {\n    return getExtent(_).polygon();\n};\n\ngeojsonExtent.exports.bboxify = function(_) {\n    return traverse(_).map(function(value) {\n        if (!value) { return ; }\n\n        var isValid = dataAttributes.some(function(attribute){\n            if(value[attribute]) {\n                return geojsonTypesByDataAttributes[attribute].indexOf(value.type) !== -1;\n            }\n            return false;\n        });\n\n        if(isValid){\n            value.bbox = getExtent(value).bbox();\n            this.update(value);\n        }\n\n    });\n};\n\nfunction getExtent(_) {\n    var ext = extent(),\n        coords = geojsonCoords(_);\n    for (var i = 0; i < coords.length; i++) { ext.include(coords[i]); }\n    return ext;\n}\n\nvar geojsonExtentExports = geojsonExtent.exports;\nvar extent$1 = /*@__PURE__*/getDefaultExportFromCjs(geojsonExtentExports);\n\nvar LAT_MIN = LAT_MIN$1;\nvar LAT_MAX = LAT_MAX$1;\nvar LAT_RENDERED_MIN = LAT_RENDERED_MIN$1;\nvar LAT_RENDERED_MAX = LAT_RENDERED_MAX$1;\nvar LNG_MIN = LNG_MIN$1;\nvar LNG_MAX = LNG_MAX$1;\n\n// Ensure that we do not drag north-south far enough for\n// - any part of any feature to exceed the poles\n// - any feature to be completely lost in the space between the projection's\n//   edge and the poles, such that it couldn't be re-selected and moved back\nfunction constrainFeatureMovement(geojsonFeatures, delta) {\n  // \"inner edge\" = a feature's latitude closest to the equator\n  var northInnerEdge = LAT_MIN;\n  var southInnerEdge = LAT_MAX;\n  // \"outer edge\" = a feature's latitude furthest from the equator\n  var northOuterEdge = LAT_MIN;\n  var southOuterEdge = LAT_MAX;\n\n  var westEdge = LNG_MAX;\n  var eastEdge = LNG_MIN;\n\n  geojsonFeatures.forEach(function (feature) {\n    var bounds = extent$1(feature);\n    var featureSouthEdge = bounds[1];\n    var featureNorthEdge = bounds[3];\n    var featureWestEdge = bounds[0];\n    var featureEastEdge = bounds[2];\n    if (featureSouthEdge > northInnerEdge) { northInnerEdge = featureSouthEdge; }\n    if (featureNorthEdge < southInnerEdge) { southInnerEdge = featureNorthEdge; }\n    if (featureNorthEdge > northOuterEdge) { northOuterEdge = featureNorthEdge; }\n    if (featureSouthEdge < southOuterEdge) { southOuterEdge = featureSouthEdge; }\n    if (featureWestEdge < westEdge) { westEdge = featureWestEdge; }\n    if (featureEastEdge > eastEdge) { eastEdge = featureEastEdge; }\n  });\n\n\n  // These changes are not mutually exclusive: we might hit the inner\n  // edge but also have hit the outer edge and therefore need\n  // another readjustment\n  var constrainedDelta = delta;\n  if (northInnerEdge + constrainedDelta.lat > LAT_RENDERED_MAX) {\n    constrainedDelta.lat = LAT_RENDERED_MAX - northInnerEdge;\n  }\n  if (northOuterEdge + constrainedDelta.lat > LAT_MAX) {\n    constrainedDelta.lat = LAT_MAX - northOuterEdge;\n  }\n  if (southInnerEdge + constrainedDelta.lat < LAT_RENDERED_MIN) {\n    constrainedDelta.lat = LAT_RENDERED_MIN - southInnerEdge;\n  }\n  if (southOuterEdge + constrainedDelta.lat < LAT_MIN) {\n    constrainedDelta.lat = LAT_MIN - southOuterEdge;\n  }\n  if (westEdge + constrainedDelta.lng <= LNG_MIN) {\n    constrainedDelta.lng += Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n  if (eastEdge + constrainedDelta.lng >= LNG_MAX) {\n    constrainedDelta.lng -= Math.ceil(Math.abs(constrainedDelta.lng) / 360) * 360;\n  }\n\n  return constrainedDelta;\n}\n\nfunction moveFeatures(features, delta) {\n  var constrainedDelta = constrainFeatureMovement(features.map(function (feature) { return feature.toGeoJSON(); }), delta);\n\n  features.forEach(function (feature) {\n    var currentCoordinates = feature.getCoordinates();\n\n    var moveCoordinate = function (coord) {\n      var point = {\n        lng: coord[0] + constrainedDelta.lng,\n        lat: coord[1] + constrainedDelta.lat\n      };\n      return [point.lng, point.lat];\n    };\n    var moveRing = function (ring) { return ring.map(function (coord) { return moveCoordinate(coord); }); };\n    var moveMultiPolygon = function (multi) { return multi.map(function (ring) { return moveRing(ring); }); };\n\n    var nextCoordinates;\n    if (feature.type === geojsonTypes.POINT) {\n      nextCoordinates = moveCoordinate(currentCoordinates);\n    } else if (feature.type === geojsonTypes.LINE_STRING || feature.type === geojsonTypes.MULTI_POINT) {\n      nextCoordinates = currentCoordinates.map(moveCoordinate);\n    } else if (feature.type === geojsonTypes.POLYGON || feature.type === geojsonTypes.MULTI_LINE_STRING) {\n      nextCoordinates = currentCoordinates.map(moveRing);\n    } else if (feature.type === geojsonTypes.MULTI_POLYGON) {\n      nextCoordinates = currentCoordinates.map(moveMultiPolygon);\n    }\n\n    feature.incomingCoords(nextCoordinates);\n  });\n}\n\nvar SimpleSelect = {};\n\nSimpleSelect.onSetup = function(opts) {\n  var this$1$1 = this;\n\n  // turn the opts into state.\n  var state = {\n    dragMoveLocation: null,\n    boxSelectStartLocation: null,\n    boxSelectElement: undefined,\n    boxSelecting: false,\n    canBoxSelect: false,\n    dragMoving: false,\n    canDragMove: false,\n    initiallySelectedFeatureIds: opts.featureIds || []\n  };\n\n  this.setSelected(state.initiallySelectedFeatureIds.filter(function (id) { return this$1$1.getFeature(id) !== undefined; }));\n  this.fireActionable();\n\n  this.setActionableState({\n    combineFeatures: true,\n    uncombineFeatures: true,\n    trash: true\n  });\n\n  return state;\n};\n\nSimpleSelect.fireUpdate = function() {\n  this.map.fire(events$1.UPDATE, {\n    action: updateActions.MOVE,\n    features: this.getSelected().map(function (f) { return f.toGeoJSON(); })\n  });\n};\n\nSimpleSelect.fireActionable = function() {\n  var this$1$1 = this;\n\n  var selectedFeatures = this.getSelected();\n\n  var multiFeatures = selectedFeatures.filter(\n    function (feature) { return this$1$1.isInstanceOf('MultiFeature', feature); }\n  );\n\n  var combineFeatures = false;\n\n  if (selectedFeatures.length > 1) {\n    combineFeatures = true;\n    var featureType = selectedFeatures[0].type.replace('Multi', '');\n    selectedFeatures.forEach(function (feature) {\n      if (feature.type.replace('Multi', '') !== featureType) {\n        combineFeatures = false;\n      }\n    });\n  }\n\n  var uncombineFeatures = multiFeatures.length > 0;\n  var trash = selectedFeatures.length > 0;\n\n  this.setActionableState({\n    combineFeatures: combineFeatures, uncombineFeatures: uncombineFeatures, trash: trash\n  });\n};\n\nSimpleSelect.getUniqueIds = function(allFeatures) {\n  if (!allFeatures.length) { return []; }\n  var ids = allFeatures.map(function (s) { return s.properties.id; })\n    .filter(function (id) { return id !== undefined; })\n    .reduce(function (memo, id) {\n      memo.add(id);\n      return memo;\n    }, new StringSet());\n\n  return ids.values();\n};\n\nSimpleSelect.stopExtendedInteractions = function(state) {\n  if (state.boxSelectElement) {\n    if (state.boxSelectElement.parentNode) { state.boxSelectElement.parentNode.removeChild(state.boxSelectElement); }\n    state.boxSelectElement = null;\n  }\n\n  this.map.dragPan.enable();\n\n  state.boxSelecting = false;\n  state.canBoxSelect = false;\n  state.dragMoving = false;\n  state.canDragMove = false;\n};\n\nSimpleSelect.onStop = function() {\n  doubleClickZoom.enable(this);\n};\n\nSimpleSelect.onMouseMove = function(state, e) {\n  var isFeature$1 = isFeature(e);\n  if (isFeature$1 && state.dragMoving) { this.fireUpdate(); }\n\n  // On mousemove that is not a drag, stop extended interactions.\n  // This is useful if you drag off the canvas, release the button,\n  // then move the mouse back over the canvas --- we don't allow the\n  // interaction to continue then, but we do let it continue if you held\n  // the mouse button that whole time\n  this.stopExtendedInteractions(state);\n\n  // Skip render\n  return true;\n};\n\nSimpleSelect.onMouseOut = function(state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) { return this.fireUpdate(); }\n\n  // Skip render\n  return true;\n};\n\nSimpleSelect.onTap = SimpleSelect.onClick = function(state, e) {\n  // Click (with or without shift) on no feature\n  if (noTarget(e)) { return this.clickAnywhere(state, e); } // also tap\n  if (isOfMetaType(meta.VERTEX)(e)) { return this.clickOnVertex(state, e); } //tap\n  if (isFeature(e)) { return this.clickOnFeature(state, e); }\n};\n\nSimpleSelect.clickAnywhere = function (state) {\n  var this$1$1 = this;\n\n  // Clear the re-render selection\n  var wasSelected = this.getSelectedIds();\n  if (wasSelected.length) {\n    this.clearSelectedFeatures();\n    wasSelected.forEach(function (id) { return this$1$1.doRender(id); });\n  }\n  doubleClickZoom.enable(this);\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.clickOnVertex = function(state, e) {\n  // Enter direct select mode\n  this.changeMode(modes$1.DIRECT_SELECT, {\n    featureId: e.featureTarget.properties.parent,\n    coordPath: e.featureTarget.properties.coord_path,\n    startPos: e.lngLat\n  });\n  this.updateUIClasses({ mouse: cursors.MOVE });\n};\n\nSimpleSelect.startOnActiveFeature = function(state, e) {\n  // Stop any already-underway extended interactions\n  this.stopExtendedInteractions(state);\n\n  // Disable map.dragPan immediately so it can't start\n  this.map.dragPan.disable();\n\n  // Re-render it and enable drag move\n  this.doRender(e.featureTarget.properties.id);\n\n  // Set up the state for drag moving\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.clickOnFeature = function(state, e) {\n  var this$1$1 = this;\n\n  // Stop everything\n  doubleClickZoom.disable(this);\n  this.stopExtendedInteractions(state);\n\n  var isShiftClick = isShiftDown(e);\n  var selectedFeatureIds = this.getSelectedIds();\n  var featureId = e.featureTarget.properties.id;\n  var isFeatureSelected = this.isSelected(featureId);\n\n  // Click (without shift) on any selected feature but a point\n  if (!isShiftClick && isFeatureSelected && this.getFeature(featureId).type !== geojsonTypes.POINT) {\n    // Enter direct select mode\n    return this.changeMode(modes$1.DIRECT_SELECT, {\n      featureId: featureId\n    });\n  }\n\n  // Shift-click on a selected feature\n  if (isFeatureSelected && isShiftClick) {\n    // Deselect it\n    this.deselect(featureId);\n    this.updateUIClasses({ mouse: cursors.POINTER });\n    if (selectedFeatureIds.length === 1) {\n      doubleClickZoom.enable(this);\n    }\n  // Shift-click on an unselected feature\n  } else if (!isFeatureSelected && isShiftClick) {\n    // Add it to the selection\n    this.select(featureId);\n    this.updateUIClasses({ mouse: cursors.MOVE });\n  // Click (without shift) on an unselected feature\n  } else if (!isFeatureSelected && !isShiftClick) {\n    // Make it the only selected feature\n    selectedFeatureIds.forEach(function (id) { return this$1$1.doRender(id); });\n    this.setSelected(featureId);\n    this.updateUIClasses({ mouse: cursors.MOVE });\n  }\n\n  // No matter what, re-render the clicked feature\n  this.doRender(featureId);\n};\n\nSimpleSelect.onMouseDown = function(state, e) {\n  if (isActiveFeature(e)) { return this.startOnActiveFeature(state, e); }\n  if (this.drawConfig.boxSelect && isShiftMousedown(e)) { return this.startBoxSelect(state, e); }\n};\n\nSimpleSelect.startBoxSelect = function(state, e) {\n  this.stopExtendedInteractions(state);\n  this.map.dragPan.disable();\n  // Enable box select\n  state.boxSelectStartLocation = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  state.canBoxSelect = true;\n};\n\nSimpleSelect.onTouchStart = function(state, e) {\n  if (isActiveFeature(e)) { return this.startOnActiveFeature(state, e); }\n};\n\nSimpleSelect.onDrag = function(state, e) {\n  if (state.canDragMove) { return this.dragMove(state, e); }\n  if (this.drawConfig.boxSelect && state.canBoxSelect) { return this.whileBoxSelect(state, e); }\n};\n\nSimpleSelect.whileBoxSelect = function(state, e) {\n  state.boxSelecting = true;\n  this.updateUIClasses({ mouse: cursors.ADD });\n\n  // Create the box node if it doesn't exist\n  if (!state.boxSelectElement) {\n    state.boxSelectElement = document.createElement('div');\n    state.boxSelectElement.classList.add(classes.BOX_SELECT);\n    this.map.getContainer().appendChild(state.boxSelectElement);\n  }\n\n  // Adjust the box node's width and xy position\n  var current = mouseEventPoint(e.originalEvent, this.map.getContainer());\n  var minX = Math.min(state.boxSelectStartLocation.x, current.x);\n  var maxX = Math.max(state.boxSelectStartLocation.x, current.x);\n  var minY = Math.min(state.boxSelectStartLocation.y, current.y);\n  var maxY = Math.max(state.boxSelectStartLocation.y, current.y);\n  var translateValue = \"translate(\" + minX + \"px, \" + minY + \"px)\";\n  state.boxSelectElement.style.transform = translateValue;\n  state.boxSelectElement.style.WebkitTransform = translateValue;\n  state.boxSelectElement.style.width = (maxX - minX) + \"px\";\n  state.boxSelectElement.style.height = (maxY - minY) + \"px\";\n};\n\nSimpleSelect.dragMove = function(state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  var delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n\n  moveFeatures(this.getSelected(), delta);\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nSimpleSelect.onTouchEnd = SimpleSelect.onMouseUp = function(state, e) {\n  var this$1$1 = this;\n\n  // End any extended interactions\n  if (state.dragMoving) {\n    this.fireUpdate();\n  } else if (state.boxSelecting) {\n    var bbox = [\n      state.boxSelectStartLocation,\n      mouseEventPoint(e.originalEvent, this.map.getContainer())\n    ];\n    var featuresInBox = this.featuresAt(null, bbox, 'click');\n    var idsToSelect = this.getUniqueIds(featuresInBox)\n      .filter(function (id) { return !this$1$1.isSelected(id); });\n\n    if (idsToSelect.length) {\n      this.select(idsToSelect);\n      idsToSelect.forEach(function (id) { return this$1$1.doRender(id); });\n      this.updateUIClasses({ mouse: cursors.MOVE });\n    }\n  }\n  this.stopExtendedInteractions(state);\n};\n\nSimpleSelect.toDisplayFeatures = function(state, geojson, display) {\n  geojson.properties.active = (this.isSelected(geojson.properties.id)) ?\n    activeStates.ACTIVE : activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== activeStates.ACTIVE ||\n    geojson.geometry.type === geojsonTypes.POINT) { return; }\n  createSupplementaryPoints(geojson).forEach(display);\n};\n\nSimpleSelect.onTrash = function() {\n  this.deleteFeature(this.getSelectedIds());\n  this.fireActionable();\n};\n\nSimpleSelect.onCombineFeatures = function() {\n  var selectedFeatures = this.getSelected();\n\n  if (selectedFeatures.length === 0 || selectedFeatures.length < 2) { return; }\n\n  var coordinates = [], featuresCombined = [];\n  var featureType = selectedFeatures[0].type.replace('Multi', '');\n\n  for (var i = 0; i < selectedFeatures.length; i++) {\n    var feature = selectedFeatures[i];\n\n    if (feature.type.replace('Multi', '') !== featureType) {\n      return;\n    }\n    if (feature.type.includes('Multi')) {\n      feature.getCoordinates().forEach(function (subcoords) {\n        coordinates.push(subcoords);\n      });\n    } else {\n      coordinates.push(feature.getCoordinates());\n    }\n\n    featuresCombined.push(feature.toGeoJSON());\n  }\n\n  if (featuresCombined.length > 1) {\n    var multiFeature = this.newFeature({\n      type: geojsonTypes.FEATURE,\n      properties: featuresCombined[0].properties,\n      geometry: {\n        type: (\"Multi\" + featureType),\n        coordinates: coordinates\n      }\n    });\n\n    this.addFeature(multiFeature);\n    this.deleteFeature(this.getSelectedIds(), { silent: true });\n    this.setSelected([multiFeature.id]);\n\n    this.map.fire(events$1.COMBINE_FEATURES, {\n      createdFeatures: [multiFeature.toGeoJSON()],\n      deletedFeatures: featuresCombined\n    });\n  }\n  this.fireActionable();\n};\n\nSimpleSelect.onUncombineFeatures = function() {\n  var this$1$1 = this;\n\n  var selectedFeatures = this.getSelected();\n  if (selectedFeatures.length === 0) { return; }\n\n  var createdFeatures = [];\n  var featuresUncombined = [];\n\n  var loop = function ( i ) {\n    var feature = selectedFeatures[i];\n\n    if (this$1$1.isInstanceOf('MultiFeature', feature)) {\n      feature.getFeatures().forEach(function (subFeature) {\n        this$1$1.addFeature(subFeature);\n        subFeature.properties = feature.properties;\n        createdFeatures.push(subFeature.toGeoJSON());\n        this$1$1.select([subFeature.id]);\n      });\n      this$1$1.deleteFeature(feature.id, { silent: true });\n      featuresUncombined.push(feature.toGeoJSON());\n    }\n  };\n\n  for (var i = 0; i < selectedFeatures.length; i++) loop( i );\n\n  if (createdFeatures.length > 1) {\n    this.map.fire(events$1.UNCOMBINE_FEATURES, {\n      createdFeatures: createdFeatures,\n      deletedFeatures: featuresUncombined\n    });\n  }\n  this.fireActionable();\n};\n\nvar isVertex$1 = isOfMetaType(meta.VERTEX);\nvar isMidpoint = isOfMetaType(meta.MIDPOINT);\n\nvar DirectSelect = {};\n\n// INTERNAL FUCNTIONS\n\nDirectSelect.fireUpdate = function() {\n  this.map.fire(events$1.UPDATE, {\n    action: updateActions.CHANGE_COORDINATES,\n    features: this.getSelected().map(function (f) { return f.toGeoJSON(); })\n  });\n};\n\nDirectSelect.fireActionable = function(state) {\n  this.setActionableState({\n    combineFeatures: false,\n    uncombineFeatures: false,\n    trash: state.selectedCoordPaths.length > 0\n  });\n};\n\nDirectSelect.startDragging = function(state, e) {\n  this.map.dragPan.disable();\n  state.canDragMove = true;\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.stopDragging = function(state) {\n  this.map.dragPan.enable();\n  state.dragMoving = false;\n  state.canDragMove = false;\n  state.dragMoveLocation = null;\n};\n\nDirectSelect.onVertex = function (state, e) {\n  this.startDragging(state, e);\n  var about = e.featureTarget.properties;\n  var selectedIndex = state.selectedCoordPaths.indexOf(about.coord_path);\n  if (!isShiftDown(e) && selectedIndex === -1) {\n    state.selectedCoordPaths = [about.coord_path];\n  } else if (isShiftDown(e) && selectedIndex === -1) {\n    state.selectedCoordPaths.push(about.coord_path);\n  }\n\n  var selectedCoordinates = this.pathsToCoordinates(state.featureId, state.selectedCoordPaths);\n  this.setSelectedCoordinates(selectedCoordinates);\n};\n\nDirectSelect.onMidpoint = function(state, e) {\n  this.startDragging(state, e);\n  var about = e.featureTarget.properties;\n  state.feature.addCoordinate(about.coord_path, about.lng, about.lat);\n  this.fireUpdate();\n  state.selectedCoordPaths = [about.coord_path];\n};\n\nDirectSelect.pathsToCoordinates = function(featureId, paths) {\n  return paths.map(function (coord_path) { return ({ feature_id: featureId, coord_path: coord_path }); });\n};\n\nDirectSelect.onFeature = function(state, e) {\n  if (state.selectedCoordPaths.length === 0) { this.startDragging(state, e); }\n  else { this.stopDragging(state); }\n};\n\nDirectSelect.dragFeature = function(state, e, delta) {\n  moveFeatures(this.getSelected(), delta);\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.dragVertex = function(state, e, delta) {\n  var selectedCoords = state.selectedCoordPaths.map(function (coord_path) { return state.feature.getCoordinate(coord_path); });\n  var selectedCoordPoints = selectedCoords.map(function (coords) { return ({\n    type: geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: geojsonTypes.POINT,\n      coordinates: coords\n    }\n  }); });\n\n  var constrainedDelta = constrainFeatureMovement(selectedCoordPoints, delta);\n  for (var i = 0; i < selectedCoords.length; i++) {\n    var coord = selectedCoords[i];\n    state.feature.updateCoordinate(state.selectedCoordPaths[i], coord[0] + constrainedDelta.lng, coord[1] + constrainedDelta.lat);\n  }\n};\n\nDirectSelect.clickNoTarget = function () {\n  this.changeMode(modes$1.SIMPLE_SELECT);\n};\n\nDirectSelect.clickInactive = function () {\n  this.changeMode(modes$1.SIMPLE_SELECT);\n};\n\nDirectSelect.clickActiveFeature = function (state) {\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  state.feature.changed();\n};\n\n// EXTERNAL FUNCTIONS\n\nDirectSelect.onSetup = function(opts) {\n  var featureId = opts.featureId;\n  var feature = this.getFeature(featureId);\n\n  if (!feature) {\n    throw new Error('You must provide a featureId to enter direct_select mode');\n  }\n\n  if (feature.type === geojsonTypes.POINT) {\n    throw new TypeError('direct_select mode doesn\\'t handle point features');\n  }\n\n  var state = {\n    featureId: featureId,\n    feature: feature,\n    dragMoveLocation: opts.startPos || null,\n    dragMoving: false,\n    canDragMove: false,\n    selectedCoordPaths: opts.coordPath ? [opts.coordPath] : []\n  };\n\n  this.setSelectedCoordinates(this.pathsToCoordinates(featureId, state.selectedCoordPaths));\n  this.setSelected(featureId);\n  doubleClickZoom.disable(this);\n\n  this.setActionableState({\n    trash: true\n  });\n\n  return state;\n};\n\nDirectSelect.onStop = function() {\n  doubleClickZoom.enable(this);\n  this.clearSelectedCoordinates();\n};\n\nDirectSelect.toDisplayFeatures = function(state, geojson, push) {\n  if (state.featureId === geojson.properties.id) {\n    geojson.properties.active = activeStates.ACTIVE;\n    push(geojson);\n    createSupplementaryPoints(geojson, {\n      map: this.map,\n      midpoints: true,\n      selectedPaths: state.selectedCoordPaths\n    }).forEach(push);\n  } else {\n    geojson.properties.active = activeStates.INACTIVE;\n    push(geojson);\n  }\n  this.fireActionable(state);\n};\n\nDirectSelect.onTrash = function(state) {\n  // Uses number-aware sorting to make sure '9' < '10'. Comparison is reversed because we want them\n  // in reverse order so that we can remove by index safely.\n  state.selectedCoordPaths\n    .sort(function (a, b) { return b.localeCompare(a, 'en', { numeric: true }); })\n    .forEach(function (id) { return state.feature.removeCoordinate(id); });\n  this.fireUpdate();\n  state.selectedCoordPaths = [];\n  this.clearSelectedCoordinates();\n  this.fireActionable(state);\n  if (state.feature.isValid() === false) {\n    this.deleteFeature([state.featureId]);\n    this.changeMode(modes$1.SIMPLE_SELECT, {});\n  }\n};\n\nDirectSelect.onMouseMove = function(state, e) {\n  // On mousemove that is not a drag, stop vertex movement.\n  var isFeature = isActiveFeature(e);\n  var onVertex = isVertex$1(e);\n  var isMidPoint = isMidpoint(e);\n  var noCoords = state.selectedCoordPaths.length === 0;\n  if (isFeature && noCoords) { this.updateUIClasses({ mouse: cursors.MOVE }); }\n  else if (onVertex && !noCoords) { this.updateUIClasses({ mouse: cursors.MOVE }); }\n  else { this.updateUIClasses({ mouse: cursors.NONE }); }\n\n  var isDraggableItem = onVertex || isFeature || isMidPoint;\n  if (isDraggableItem && state.dragMoving) { this.fireUpdate(); }\n\n  this.stopDragging(state);\n\n  // Skip render\n  return true;\n};\n\nDirectSelect.onMouseOut = function(state) {\n  // As soon as you mouse leaves the canvas, update the feature\n  if (state.dragMoving) { this.fireUpdate(); }\n\n  // Skip render\n  return true;\n};\n\nDirectSelect.onTouchStart = DirectSelect.onMouseDown = function(state, e) {\n  if (isVertex$1(e)) { return this.onVertex(state, e); }\n  if (isActiveFeature(e)) { return this.onFeature(state, e); }\n  if (isMidpoint(e)) { return this.onMidpoint(state, e); }\n};\n\nDirectSelect.onDrag = function(state, e) {\n  if (state.canDragMove !== true) { return; }\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n\n  var delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n  if (state.selectedCoordPaths.length > 0) { this.dragVertex(state, e, delta); }\n  else { this.dragFeature(state, e, delta); }\n\n  state.dragMoveLocation = e.lngLat;\n};\n\nDirectSelect.onClick = function(state, e) {\n  if (noTarget(e)) { return this.clickNoTarget(state, e); }\n  if (isActiveFeature(e)) { return this.clickActiveFeature(state, e); }\n  if (isInactiveFeature(e)) { return this.clickInactive(state, e); }\n  this.stopDragging(state);\n};\n\nDirectSelect.onTap = function(state, e) {\n  if (noTarget(e)) { return this.clickNoTarget(state, e); }\n  if (isActiveFeature(e)) { return this.clickActiveFeature(state, e); }\n  if (isInactiveFeature(e)) { return this.clickInactive(state, e); }\n};\n\nDirectSelect.onTouchEnd = DirectSelect.onMouseUp = function(state) {\n  if (state.dragMoving) {\n    this.fireUpdate();\n  }\n  this.stopDragging(state);\n};\n\nvar DrawPoint = {};\n\nDrawPoint.onSetup = function() {\n  var point = this.newFeature({\n    type: geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: geojsonTypes.POINT,\n      coordinates: []\n    }\n  });\n\n  this.addFeature(point);\n\n  this.clearSelectedFeatures();\n  this.updateUIClasses({ mouse: cursors.ADD });\n  this.activateUIButton(types$1.POINT);\n\n  this.setActionableState({\n    trash: true\n  });\n\n  return { point: point };\n};\n\nDrawPoint.stopDrawingAndRemove = function(state) {\n  this.deleteFeature([state.point.id], { silent: true });\n  this.changeMode(modes$1.SIMPLE_SELECT);\n};\n\nDrawPoint.onTap = DrawPoint.onClick = function(state, e) {\n  this.updateUIClasses({ mouse: cursors.MOVE });\n  state.point.updateCoordinate('', e.lngLat.lng, e.lngLat.lat);\n  this.map.fire(events$1.CREATE, {\n    features: [state.point.toGeoJSON()]\n  });\n  this.changeMode(modes$1.SIMPLE_SELECT, { featureIds: [state.point.id] });\n};\n\nDrawPoint.onStop = function(state) {\n  this.activateUIButton();\n  if (!state.point.getCoordinate().length) {\n    this.deleteFeature([state.point.id], { silent: true });\n  }\n};\n\nDrawPoint.toDisplayFeatures = function(state, geojson, display) {\n  // Never render the point we're drawing\n  var isActivePoint = geojson.properties.id === state.point.id;\n  geojson.properties.active = (isActivePoint) ? activeStates.ACTIVE : activeStates.INACTIVE;\n  if (!isActivePoint) { return display(geojson); }\n};\n\nDrawPoint.onTrash = DrawPoint.stopDrawingAndRemove;\n\nDrawPoint.onKeyUp = function(state, e) {\n  if (isEscapeKey(e) || isEnterKey(e)) {\n    return this.stopDrawingAndRemove(state, e);\n  }\n};\n\nfunction isEventAtCoordinates(event, coordinates) {\n  if (!event.lngLat) { return false; }\n  return event.lngLat.lng === coordinates[0] && event.lngLat.lat === coordinates[1];\n}\n\nvar DrawPolygon = {};\n\nDrawPolygon.onSetup = function() {\n  var polygon = this.newFeature({\n    type: geojsonTypes.FEATURE,\n    properties: {},\n    geometry: {\n      type: geojsonTypes.POLYGON,\n      coordinates: [[]]\n    }\n  });\n\n  this.addFeature(polygon);\n\n  this.clearSelectedFeatures();\n  doubleClickZoom.disable(this);\n  this.updateUIClasses({ mouse: cursors.ADD });\n  this.activateUIButton(types$1.POLYGON);\n  this.setActionableState({\n    trash: true\n  });\n\n  return {\n    polygon: polygon,\n    currentVertexPosition: 0\n  };\n};\n\nDrawPolygon.clickAnywhere = function(state, e) {\n  if (state.currentVertexPosition > 0 && isEventAtCoordinates(e, state.polygon.coordinates[0][state.currentVertexPosition - 1])) {\n    return this.changeMode(modes$1.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n  }\n  this.updateUIClasses({ mouse: cursors.ADD });\n  state.polygon.updateCoordinate((\"0.\" + (state.currentVertexPosition)), e.lngLat.lng, e.lngLat.lat);\n  state.currentVertexPosition++;\n  state.polygon.updateCoordinate((\"0.\" + (state.currentVertexPosition)), e.lngLat.lng, e.lngLat.lat);\n};\n\nDrawPolygon.clickOnVertex = function(state) {\n  return this.changeMode(modes$1.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n};\n\nDrawPolygon.onMouseMove = function(state, e) {\n  state.polygon.updateCoordinate((\"0.\" + (state.currentVertexPosition)), e.lngLat.lng, e.lngLat.lat);\n  if (isVertex$2(e)) {\n    this.updateUIClasses({ mouse: cursors.POINTER });\n  }\n};\n\nDrawPolygon.onTap = DrawPolygon.onClick = function(state, e) {\n  if (isVertex$2(e)) { return this.clickOnVertex(state, e); }\n  return this.clickAnywhere(state, e);\n};\n\nDrawPolygon.onKeyUp = function(state, e) {\n  if (isEscapeKey(e)) {\n    this.deleteFeature([state.polygon.id], { silent: true });\n    this.changeMode(modes$1.SIMPLE_SELECT);\n  } else if (isEnterKey(e)) {\n    this.changeMode(modes$1.SIMPLE_SELECT, { featureIds: [state.polygon.id] });\n  }\n};\n\nDrawPolygon.onStop = function(state) {\n  this.updateUIClasses({ mouse: cursors.NONE });\n  doubleClickZoom.enable(this);\n  this.activateUIButton();\n\n  // check to see if we've deleted this feature\n  if (this.getFeature(state.polygon.id) === undefined) { return; }\n\n  //remove last added coordinate\n  state.polygon.removeCoordinate((\"0.\" + (state.currentVertexPosition)));\n  if (state.polygon.isValid()) {\n    this.map.fire(events$1.CREATE, {\n      features: [state.polygon.toGeoJSON()]\n    });\n  } else {\n    this.deleteFeature([state.polygon.id], { silent: true });\n    this.changeMode(modes$1.SIMPLE_SELECT, {}, { silent: true });\n  }\n};\n\nDrawPolygon.toDisplayFeatures = function(state, geojson, display) {\n  var isActivePolygon = geojson.properties.id === state.polygon.id;\n  geojson.properties.active = (isActivePolygon) ? activeStates.ACTIVE : activeStates.INACTIVE;\n  if (!isActivePolygon) { return display(geojson); }\n\n  // Don't render a polygon until it has two positions\n  // (and a 3rd which is just the first repeated)\n  if (geojson.geometry.coordinates.length === 0) { return; }\n\n  var coordinateCount = geojson.geometry.coordinates[0].length;\n  // 2 coordinates after selecting a draw type\n  // 3 after creating the first point\n  if (coordinateCount < 3) {\n    return;\n  }\n  geojson.properties.meta = meta.FEATURE;\n  display(createVertex(state.polygon.id, geojson.geometry.coordinates[0][0], '0.0', false));\n  if (coordinateCount > 3) {\n    // Add a start position marker to the map, clicking on this will finish the feature\n    // This should only be shown when we're in a valid spot\n    var endPos = geojson.geometry.coordinates[0].length - 3;\n    display(createVertex(state.polygon.id, geojson.geometry.coordinates[0][endPos], (\"0.\" + endPos), false));\n  }\n  if (coordinateCount <= 4) {\n    // If we've only drawn two positions (plus the closer),\n    // make a LineString instead of a Polygon\n    var lineCoordinates = [\n      [geojson.geometry.coordinates[0][0][0], geojson.geometry.coordinates[0][0][1]], [geojson.geometry.coordinates[0][1][0], geojson.geometry.coordinates[0][1][1]]\n    ];\n    // create an initial vertex so that we can track the first point on mobile devices\n    display({\n      type: geojsonTypes.FEATURE,\n      properties: geojson.properties,\n      geometry: {\n        coordinates: lineCoordinates,\n        type: geojsonTypes.LINE_STRING\n      }\n    });\n    if (coordinateCount === 3) {\n      return;\n    }\n  }\n  // render the Polygon\n  return display(geojson);\n};\n\nDrawPolygon.onTrash = function(state) {\n  this.deleteFeature([state.polygon.id], { silent: true });\n  this.changeMode(modes$1.SIMPLE_SELECT);\n};\n\nvar DrawLineString = {};\n\nDrawLineString.onSetup = function(opts) {\n  opts = opts || {};\n  var featureId = opts.featureId;\n\n  var line, currentVertexPosition;\n  var direction = 'forward';\n  if (featureId) {\n    line = this.getFeature(featureId);\n    if (!line) {\n      throw new Error('Could not find a feature with the provided featureId');\n    }\n    var from = opts.from;\n    if (from && from.type === 'Feature' && from.geometry && from.geometry.type === 'Point') {\n      from = from.geometry;\n    }\n    if (from && from.type === 'Point' && from.coordinates && from.coordinates.length === 2) {\n      from = from.coordinates;\n    }\n    if (!from || !Array.isArray(from)) {\n      throw new Error('Please use the `from` property to indicate which point to continue the line from');\n    }\n    var lastCoord = line.coordinates.length - 1;\n    if (line.coordinates[lastCoord][0] === from[0] && line.coordinates[lastCoord][1] === from[1]) {\n      currentVertexPosition = lastCoord + 1;\n      // add one new coordinate to continue from\n      line.addCoordinate.apply(line, [ currentVertexPosition ].concat( line.coordinates[lastCoord] ));\n    } else if (line.coordinates[0][0] === from[0] && line.coordinates[0][1] === from[1]) {\n      direction = 'backwards';\n      currentVertexPosition = 0;\n      // add one new coordinate to continue from\n      line.addCoordinate.apply(line, [ currentVertexPosition ].concat( line.coordinates[0] ));\n    } else {\n      throw new Error('`from` should match the point at either the start or the end of the provided LineString');\n    }\n  } else {\n    line = this.newFeature({\n      type: geojsonTypes.FEATURE,\n      properties: {},\n      geometry: {\n        type: geojsonTypes.LINE_STRING,\n        coordinates: []\n      }\n    });\n    currentVertexPosition = 0;\n    this.addFeature(line);\n  }\n\n  this.clearSelectedFeatures();\n  doubleClickZoom.disable(this);\n  this.updateUIClasses({ mouse: cursors.ADD });\n  this.activateUIButton(types$1.LINE);\n  this.setActionableState({\n    trash: true\n  });\n\n  return {\n    line: line,\n    currentVertexPosition: currentVertexPosition,\n    direction: direction\n  };\n};\n\nDrawLineString.clickAnywhere = function(state, e) {\n  if (state.currentVertexPosition > 0 && isEventAtCoordinates(e, state.line.coordinates[state.currentVertexPosition - 1]) ||\n      state.direction === 'backwards' && isEventAtCoordinates(e, state.line.coordinates[state.currentVertexPosition + 1])) {\n    return this.changeMode(modes$1.SIMPLE_SELECT, { featureIds: [state.line.id] });\n  }\n  this.updateUIClasses({ mouse: cursors.ADD });\n  state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  if (state.direction === 'forward') {\n    state.currentVertexPosition++;\n    state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  } else {\n    state.line.addCoordinate(0, e.lngLat.lng, e.lngLat.lat);\n  }\n};\n\nDrawLineString.clickOnVertex = function(state) {\n  return this.changeMode(modes$1.SIMPLE_SELECT, { featureIds: [state.line.id] });\n};\n\nDrawLineString.onMouseMove = function(state, e) {\n  state.line.updateCoordinate(state.currentVertexPosition, e.lngLat.lng, e.lngLat.lat);\n  if (isVertex$2(e)) {\n    this.updateUIClasses({ mouse: cursors.POINTER });\n  }\n};\n\nDrawLineString.onTap = DrawLineString.onClick = function(state, e) {\n  if (isVertex$2(e)) { return this.clickOnVertex(state, e); }\n  this.clickAnywhere(state, e);\n};\n\nDrawLineString.onKeyUp = function(state, e) {\n  if (isEnterKey(e)) {\n    this.changeMode(modes$1.SIMPLE_SELECT, { featureIds: [state.line.id] });\n  } else if (isEscapeKey(e)) {\n    this.deleteFeature([state.line.id], { silent: true });\n    this.changeMode(modes$1.SIMPLE_SELECT);\n  }\n};\n\nDrawLineString.onStop = function(state) {\n  doubleClickZoom.enable(this);\n  this.activateUIButton();\n\n  // check to see if we've deleted this feature\n  if (this.getFeature(state.line.id) === undefined) { return; }\n\n  //remove last added coordinate\n  state.line.removeCoordinate((\"\" + (state.currentVertexPosition)));\n  if (state.line.isValid()) {\n    this.map.fire(events$1.CREATE, {\n      features: [state.line.toGeoJSON()]\n    });\n  } else {\n    this.deleteFeature([state.line.id], { silent: true });\n    this.changeMode(modes$1.SIMPLE_SELECT, {}, { silent: true });\n  }\n};\n\nDrawLineString.onTrash = function(state) {\n  this.deleteFeature([state.line.id], { silent: true });\n  this.changeMode(modes$1.SIMPLE_SELECT);\n};\n\nDrawLineString.toDisplayFeatures = function(state, geojson, display) {\n  var isActiveLine = geojson.properties.id === state.line.id;\n  geojson.properties.active = (isActiveLine) ? activeStates.ACTIVE : activeStates.INACTIVE;\n  if (!isActiveLine) { return display(geojson); }\n  // Only render the line if it has at least one real coordinate\n  if (geojson.geometry.coordinates.length < 2) { return; }\n  geojson.properties.meta = meta.FEATURE;\n  display(createVertex(\n    state.line.id,\n    geojson.geometry.coordinates[state.direction === 'forward' ? geojson.geometry.coordinates.length - 2 : 1],\n    (\"\" + (state.direction === 'forward' ? geojson.geometry.coordinates.length - 2 : 1)),\n    false\n  ));\n\n  display(geojson);\n};\n\n/**\n * @module helpers\n */\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature$5(geom, properties, options) {\n    if (options === void 0) { options = {}; }\n    var feat = { type: \"Feature\" };\n    if (options.id === 0 || options.id) {\n        feat.id = options.id;\n    }\n    if (options.bbox) {\n        feat.bbox = options.bbox;\n    }\n    feat.properties = properties || {};\n    feat.geometry = geom;\n    return feat;\n}\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point$5(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    if (!coordinates) {\n        throw new Error(\"coordinates is required\");\n    }\n    if (!Array.isArray(coordinates)) {\n        throw new Error(\"coordinates must be an Array\");\n    }\n    if (coordinates.length < 2) {\n        throw new Error(\"coordinates must be at least 2 numbers long\");\n    }\n    if (!isNumber$5(coordinates[0]) || !isNumber$5(coordinates[1])) {\n        throw new Error(\"coordinates must contain numbers\");\n    }\n    var geom = {\n        type: \"Point\",\n        coordinates: coordinates,\n    };\n    return feature$5(geom, properties, options);\n}\n/**\n * Creates a {@link LineString} {@link Feature} from an Array of Positions.\n *\n * @name lineString\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<LineString>} LineString Feature\n * @example\n * var linestring1 = turf.lineString([[-24, 63], [-23, 60], [-25, 65], [-20, 69]], {name: 'line 1'});\n * var linestring2 = turf.lineString([[-14, 43], [-13, 40], [-15, 45], [-10, 49]], {name: 'line 2'});\n *\n * //=linestring1\n * //=linestring2\n */\nfunction lineString(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    if (coordinates.length < 2) {\n        throw new Error(\"coordinates must be an array of two or more positions\");\n    }\n    var geom = {\n        type: \"LineString\",\n        coordinates: coordinates,\n    };\n    return feature$5(geom, properties, options);\n}\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber$5(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\n\n/**\n * Converts an angle in radians to degrees\n *\n * @name radiansToDegrees\n * @param {number} radians angle in radians\n * @returns {number} degrees between 0 and 360 degrees\n */\nfunction radiansToDegrees$2(radians) {\n    if (radians === null || radians === undefined) { throw new Error('radians is required'); }\n\n    var degrees = radians % (2 * Math.PI);\n    return degrees * 180 / Math.PI;\n}\n\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nfunction degreesToRadians$4(degrees) {\n    if (degrees === null || degrees === undefined) { throw new Error('degrees is required'); }\n\n    var radians = degrees % 360;\n    return radians * Math.PI / 180;\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$8(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord$6(coord) {\n    if (!coord) { throw new Error('coord is required'); }\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') { return coord.geometry.coordinates; }\n    if (coord.type === 'Point') { return coord.coordinates; }\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) { return coord; }\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n//http://en.wikipedia.org/wiki/Haversine_formula\n//http://www.movable-type.co.uk/scripts/latlong.html\n\n/**\n * Takes two {@link Point|points} and finds the geographic bearing between them,\n * i.e. the angle measured in degrees from the north line (0 degrees)\n *\n * @name bearing\n * @param {Coord} start starting Point\n * @param {Coord} end ending Point\n * @param {Object} [options={}] Optional parameters\n * @param {boolean} [options.final=false] calculates the final bearing if true\n * @returns {number} bearing in decimal degrees, between -180 and 180 degrees (positive clockwise)\n * @example\n * var point1 = turf.point([-75.343, 39.984]);\n * var point2 = turf.point([-75.534, 39.123]);\n *\n * var bearing = turf.bearing(point1, point2);\n *\n * //addToMap\n * var addToMap = [point1, point2]\n * point1.properties['marker-color'] = '#f00'\n * point2.properties['marker-color'] = '#0f0'\n * point1.properties.bearing = bearing\n */\nfunction bearing(start, end, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$8(options)) { throw new Error('options is invalid'); }\n    var final = options.final;\n\n    // Reverse calculation\n    if (final === true) { return calculateFinalBearing(start, end); }\n\n    var coordinates1 = getCoord$6(start);\n    var coordinates2 = getCoord$6(end);\n\n    var lon1 = degreesToRadians$4(coordinates1[0]);\n    var lon2 = degreesToRadians$4(coordinates2[0]);\n    var lat1 = degreesToRadians$4(coordinates1[1]);\n    var lat2 = degreesToRadians$4(coordinates2[1]);\n    var a = Math.sin(lon2 - lon1) * Math.cos(lat2);\n    var b = Math.cos(lat1) * Math.sin(lat2) -\n        Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);\n\n    return radiansToDegrees$2(Math.atan2(a, b));\n}\n\n/**\n * Calculates Final Bearing\n *\n * @private\n * @param {Coord} start starting Point\n * @param {Coord} end ending Point\n * @returns {number} bearing\n */\nfunction calculateFinalBearing(start, end) {\n    // Swap start & end\n    var bear = bearing(end, start);\n    bear = (bear + 180) % 360;\n    return bear;\n}\n\n/**\n * Callback for coordEach\n *\n * @callback coordEachCallback\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Iterate over coordinates in any GeoJSON object, similar to Array.forEach()\n *\n * @name coordEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentCoord, coordIndex, featureIndex, multiFeatureIndex)\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordEach(features, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction coordEach$2(geojson, callback, excludeWrapCoord) {\n    // Handles null Geometry -- Skips this GeoJSON\n    if (geojson === null) { return; }\n    var j, k, l, geometry, stopG, coords,\n        geometryMaybeCollection,\n        wrapShrink = 0,\n        coordIndex = 0,\n        isGeometryCollection,\n        type = geojson.type,\n        isFeatureCollection = type === 'FeatureCollection',\n        isFeature = type === 'Feature',\n        stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n        geometryMaybeCollection = (isFeatureCollection ? geojson.features[featureIndex].geometry :\n            (isFeature ? geojson.geometry : geojson));\n        isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n        stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n        for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n            var multiFeatureIndex = 0;\n            var geometryIndex = 0;\n            geometry = isGeometryCollection ?\n                geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n\n            // Handles null Geometry -- Skips this geometry\n            if (geometry === null) { continue; }\n            coords = geometry.coordinates;\n            var geomType = geometry.type;\n\n            wrapShrink = (excludeWrapCoord && (geomType === 'Polygon' || geomType === 'MultiPolygon')) ? 1 : 0;\n\n            switch (geomType) {\n            case null:\n                break;\n            case 'Point':\n                if (callback(coords, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                coordIndex++;\n                multiFeatureIndex++;\n                break;\n            case 'LineString':\n            case 'MultiPoint':\n                for (j = 0; j < coords.length; j++) {\n                    if (callback(coords[j], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                    coordIndex++;\n                    if (geomType === 'MultiPoint') { multiFeatureIndex++; }\n                }\n                if (geomType === 'LineString') { multiFeatureIndex++; }\n                break;\n            case 'Polygon':\n            case 'MultiLineString':\n                for (j = 0; j < coords.length; j++) {\n                    for (k = 0; k < coords[j].length - wrapShrink; k++) {\n                        if (callback(coords[j][k], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                        coordIndex++;\n                    }\n                    if (geomType === 'MultiLineString') { multiFeatureIndex++; }\n                    if (geomType === 'Polygon') { geometryIndex++; }\n                }\n                if (geomType === 'Polygon') { multiFeatureIndex++; }\n                break;\n            case 'MultiPolygon':\n                for (j = 0; j < coords.length; j++) {\n                    if (geomType === 'MultiPolygon') { geometryIndex = 0; }\n                    for (k = 0; k < coords[j].length; k++) {\n                        for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                            if (callback(coords[j][k][l], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                            coordIndex++;\n                        }\n                        geometryIndex++;\n                    }\n                    multiFeatureIndex++;\n                }\n                break;\n            case 'GeometryCollection':\n                for (j = 0; j < geometry.geometries.length; j++)\n                    { if (coordEach$2(geometry.geometries[j], callback, excludeWrapCoord) === false) { return false; } }\n                break;\n            default:\n                throw new Error('Unknown Geometry Type');\n            }\n        }\n    }\n}\n\n/**\n * Takes a set of features, calculates the bbox of all input features, and returns a bounding box.\n *\n * @name bbox\n * @param {GeoJSON} geojson any GeoJSON object\n * @returns {BBox} bbox extent in [minX, minY, maxX, maxY] order\n * @example\n * var line = turf.lineString([[-74, 40], [-78, 42], [-82, 35]]);\n * var bbox = turf.bbox(line);\n * var bboxPolygon = turf.bboxPolygon(bbox);\n *\n * //addToMap\n * var addToMap = [line, bboxPolygon]\n */\nfunction bbox(geojson) {\n    var BBox = [Infinity, Infinity, -Infinity, -Infinity];\n    coordEach$2(geojson, function (coord) {\n        if (BBox[0] > coord[0]) { BBox[0] = coord[0]; }\n        if (BBox[1] > coord[1]) { BBox[1] = coord[1]; }\n        if (BBox[2] < coord[0]) { BBox[2] = coord[0]; }\n        if (BBox[3] < coord[1]) { BBox[3] = coord[1]; }\n    });\n    return BBox;\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\n\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature$4(geometry, properties, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject$7(options)) { throw new Error('options is invalid'); }\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (geometry === undefined) { throw new Error('geometry is required'); }\n    if (properties && properties.constructor !== Object) { throw new Error('properties must be an Object'); }\n    if (bbox) { validateBBox$4(bbox); }\n    if (id) { validateId$4(id); }\n\n    // Main\n    var feat = {type: 'Feature'};\n    if (id) { feat.id = id; }\n    if (bbox) { feat.bbox = bbox; }\n    feat.properties = properties || {};\n    feat.geometry = geometry;\n    return feat;\n}\n\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point$4(coordinates, properties, options) {\n    if (!coordinates) { throw new Error('coordinates is required'); }\n    if (!Array.isArray(coordinates)) { throw new Error('coordinates must be an Array'); }\n    if (coordinates.length < 2) { throw new Error('coordinates must be at least 2 numbers long'); }\n    if (!isNumber$4(coordinates[0]) || !isNumber$4(coordinates[1])) { throw new Error('coordinates must contain numbers'); }\n\n    return feature$4({\n        type: 'Point',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber$4(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$7(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nfunction validateBBox$4(bbox) {\n    if (!bbox) { throw new Error('bbox is required'); }\n    if (!Array.isArray(bbox)) { throw new Error('bbox must be an Array'); }\n    if (bbox.length !== 4 && bbox.length !== 6) { throw new Error('bbox must be an Array of 4 or 6 numbers'); }\n    bbox.forEach(function (num) {\n        if (!isNumber$4(num)) { throw new Error('bbox must only contain numbers'); }\n    });\n}\n\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nfunction validateId$4(id) {\n    if (!id) { throw new Error('id is required'); }\n    if (['string', 'number'].indexOf(typeof id) === -1) { throw new Error('id must be a number or a string'); }\n}\n\n/**\n * Takes a {@link Feature} or {@link FeatureCollection} and returns the absolute center point of all features.\n *\n * @name center\n * @param {GeoJSON} geojson GeoJSON to be centered\n * @param {Object} [options={}] Optional parameters\n * @param {Object} [options.properties={}] an Object that is used as the {@link Feature}'s properties\n * @returns {Feature<Point>} a Point feature at the absolute center point of all input features\n * @example\n * var features = turf.featureCollection([\n *   turf.point( [-97.522259, 35.4691]),\n *   turf.point( [-97.502754, 35.463455]),\n *   turf.point( [-97.508269, 35.463245])\n * ]);\n *\n * var center = turf.center(features);\n *\n * //addToMap\n * var addToMap = [features, center]\n * center.properties['marker-size'] = 'large';\n * center.properties['marker-color'] = '#000';\n */\nfunction center(geojson, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$7(options)) { throw new Error('options is invalid'); }\n    var properties = options.properties;\n\n    // Input validation\n    if (!geojson) { throw new Error('geojson is required'); }\n\n    var ext = bbox(geojson);\n    var x = (ext[0] + ext[2]) / 2;\n    var y = (ext[1] + ext[3]) / 2;\n    return point$4([x, y], properties);\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\nvar earthRadius$3 = 6371008.8;\n\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n */\nvar factors$3 = {\n    meters: earthRadius$3,\n    metres: earthRadius$3,\n    millimeters: earthRadius$3 * 1000,\n    millimetres: earthRadius$3 * 1000,\n    centimeters: earthRadius$3 * 100,\n    centimetres: earthRadius$3 * 100,\n    kilometers: earthRadius$3 / 1000,\n    kilometres: earthRadius$3 / 1000,\n    miles: earthRadius$3 / 1609.344,\n    nauticalmiles: earthRadius$3 / 1852,\n    inches: earthRadius$3 * 39.370,\n    yards: earthRadius$3 / 1.0936,\n    feet: earthRadius$3 * 3.28084,\n    radians: 1,\n    degrees: earthRadius$3 / 111325,\n};\n\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature$3(geometry, properties, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject$6(options)) { throw new Error('options is invalid'); }\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (geometry === undefined) { throw new Error('geometry is required'); }\n    if (properties && properties.constructor !== Object) { throw new Error('properties must be an Object'); }\n    if (bbox) { validateBBox$3(bbox); }\n    if (id) { validateId$3(id); }\n\n    // Main\n    var feat = {type: 'Feature'};\n    if (id) { feat.id = id; }\n    if (bbox) { feat.bbox = bbox; }\n    feat.properties = properties || {};\n    feat.geometry = geometry;\n    return feat;\n}\n\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point$3(coordinates, properties, options) {\n    if (!coordinates) { throw new Error('coordinates is required'); }\n    if (!Array.isArray(coordinates)) { throw new Error('coordinates must be an Array'); }\n    if (coordinates.length < 2) { throw new Error('coordinates must be at least 2 numbers long'); }\n    if (!isNumber$3(coordinates[0]) || !isNumber$3(coordinates[1])) { throw new Error('coordinates must contain numbers'); }\n\n    return feature$3({\n        type: 'Point',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into radians\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name lengthToRadians\n * @param {number} distance in real units\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} radians\n */\nfunction lengthToRadians$2(distance, units) {\n    if (distance === undefined || distance === null) { throw new Error('distance is required'); }\n\n    if (units && typeof units !== 'string') { throw new Error('units must be a string'); }\n    var factor = factors$3[units || 'kilometers'];\n    if (!factor) { throw new Error(units + ' units is invalid'); }\n    return distance / factor;\n}\n\n/**\n * Converts an angle in radians to degrees\n *\n * @name radiansToDegrees\n * @param {number} radians angle in radians\n * @returns {number} degrees between 0 and 360 degrees\n */\nfunction radiansToDegrees$1(radians) {\n    if (radians === null || radians === undefined) { throw new Error('radians is required'); }\n\n    var degrees = radians % (2 * Math.PI);\n    return degrees * 180 / Math.PI;\n}\n\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nfunction degreesToRadians$3(degrees) {\n    if (degrees === null || degrees === undefined) { throw new Error('degrees is required'); }\n\n    var radians = degrees % 360;\n    return radians * Math.PI / 180;\n}\n\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber$3(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$6(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nfunction validateBBox$3(bbox) {\n    if (!bbox) { throw new Error('bbox is required'); }\n    if (!Array.isArray(bbox)) { throw new Error('bbox must be an Array'); }\n    if (bbox.length !== 4 && bbox.length !== 6) { throw new Error('bbox must be an Array of 4 or 6 numbers'); }\n    bbox.forEach(function (num) {\n        if (!isNumber$3(num)) { throw new Error('bbox must only contain numbers'); }\n    });\n}\n\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nfunction validateId$3(id) {\n    if (!id) { throw new Error('id is required'); }\n    if (['string', 'number'].indexOf(typeof id) === -1) { throw new Error('id must be a number or a string'); }\n}\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord$5(coord) {\n    if (!coord) { throw new Error('coord is required'); }\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') { return coord.geometry.coordinates; }\n    if (coord.type === 'Point') { return coord.coordinates; }\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) { return coord; }\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n//http://en.wikipedia.org/wiki/Haversine_formula\n//http://www.movable-type.co.uk/scripts/latlong.html\n/**\n * Takes a {@link Point} and calculates the location of a destination point given a distance in degrees, radians, miles, or kilometers; and bearing in degrees. This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.\n *\n * @name destination\n * @param {Coord} origin starting point\n * @param {number} distance distance from the origin point\n * @param {number} bearing ranging from -180 to 180\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] miles, kilometers, degrees, or radians\n * @param {Object} [options.properties={}] Translate properties to Point\n * @returns {Feature<Point>} destination point\n * @example\n * var point = turf.point([-75.343, 39.984]);\n * var distance = 50;\n * var bearing = 90;\n * var options = {units: 'miles'};\n *\n * var destination = turf.destination(point, distance, bearing, options);\n *\n * //addToMap\n * var addToMap = [point, destination]\n * destination.properties['marker-color'] = '#f00';\n * point.properties['marker-color'] = '#0f0';\n */\nfunction destination(origin, distance, bearing, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$6(options)) { throw new Error('options is invalid'); }\n    var units = options.units;\n    var properties = options.properties;\n\n    // Handle input\n    var coordinates1 = getCoord$5(origin);\n    var longitude1 = degreesToRadians$3(coordinates1[0]);\n    var latitude1 = degreesToRadians$3(coordinates1[1]);\n    var bearing_rad = degreesToRadians$3(bearing);\n    var radians = lengthToRadians$2(distance, units);\n\n    // Main\n    var latitude2 = Math.asin(Math.sin(latitude1) * Math.cos(radians) +\n        Math.cos(latitude1) * Math.sin(radians) * Math.cos(bearing_rad));\n    var longitude2 = longitude1 + Math.atan2(Math.sin(bearing_rad) * Math.sin(radians) * Math.cos(latitude1),\n        Math.cos(radians) - Math.sin(latitude1) * Math.sin(latitude2));\n    var lng = radiansToDegrees$1(longitude2);\n    var lat = radiansToDegrees$1(latitude2);\n\n    return point$3([lng, lat], properties);\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\nvar earthRadius$2 = 6371008.8;\n\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n */\nvar factors$2 = {\n    meters: earthRadius$2,\n    metres: earthRadius$2,\n    millimeters: earthRadius$2 * 1000,\n    millimetres: earthRadius$2 * 1000,\n    centimeters: earthRadius$2 * 100,\n    centimetres: earthRadius$2 * 100,\n    kilometers: earthRadius$2 / 1000,\n    kilometres: earthRadius$2 / 1000,\n    miles: earthRadius$2 / 1609.344,\n    nauticalmiles: earthRadius$2 / 1852,\n    inches: earthRadius$2 * 39.370,\n    yards: earthRadius$2 / 1.0936,\n    feet: earthRadius$2 * 3.28084,\n    radians: 1,\n    degrees: earthRadius$2 / 111325,\n};\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from radians to a more friendly unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name radiansToLength\n * @param {number} radians in radians across the sphere\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} distance\n */\nfunction radiansToLength$2(radians, units) {\n    if (radians === undefined || radians === null) { throw new Error('radians is required'); }\n\n    if (units && typeof units !== 'string') { throw new Error('units must be a string'); }\n    var factor = factors$2[units || 'kilometers'];\n    if (!factor) { throw new Error(units + ' units is invalid'); }\n    return radians * factor;\n}\n\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nfunction degreesToRadians$2(degrees) {\n    if (degrees === null || degrees === undefined) { throw new Error('degrees is required'); }\n\n    var radians = degrees % 360;\n    return radians * Math.PI / 180;\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$5(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord$4(coord) {\n    if (!coord) { throw new Error('coord is required'); }\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') { return coord.geometry.coordinates; }\n    if (coord.type === 'Point') { return coord.coordinates; }\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) { return coord; }\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n//http://en.wikipedia.org/wiki/Haversine_formula\n//http://www.movable-type.co.uk/scripts/latlong.html\n\n/**\n * Calculates the distance between two {@link Point|points} in degrees, radians,\n * miles, or kilometers. This uses the\n * [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula)\n * to account for global curvature.\n *\n * @name distance\n * @param {Coord} from origin point\n * @param {Coord} to destination point\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] can be degrees, radians, miles, or kilometers\n * @returns {number} distance between the two points\n * @example\n * var from = turf.point([-75.343, 39.984]);\n * var to = turf.point([-75.534, 39.123]);\n * var options = {units: 'miles'};\n *\n * var distance = turf.distance(from, to, options);\n *\n * //addToMap\n * var addToMap = [from, to];\n * from.properties.distance = distance;\n * to.properties.distance = distance;\n */\nfunction distance(from, to, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$5(options)) { throw new Error('options is invalid'); }\n    var units = options.units;\n\n    var coordinates1 = getCoord$4(from);\n    var coordinates2 = getCoord$4(to);\n    var dLat = degreesToRadians$2((coordinates2[1] - coordinates1[1]));\n    var dLon = degreesToRadians$2((coordinates2[0] - coordinates1[0]));\n    var lat1 = degreesToRadians$2(coordinates1[1]);\n    var lat2 = degreesToRadians$2(coordinates2[1]);\n\n    var a = Math.pow(Math.sin(dLat / 2), 2) +\n          Math.pow(Math.sin(dLon / 2), 2) * Math.cos(lat1) * Math.cos(lat2);\n\n    return radiansToLength$2(2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)), units);\n}\n\n/**\n * Takes two {@link Point|points} and returns a point midway between them.\n * The midpoint is calculated geodesically, meaning the curvature of the earth is taken into account.\n *\n * @name midpoint\n * @param {Coord} point1 first point\n * @param {Coord} point2 second point\n * @returns {Feature<Point>} a point midway between `pt1` and `pt2`\n * @example\n * var point1 = turf.point([144.834823, -37.771257]);\n * var point2 = turf.point([145.14244, -37.830937]);\n *\n * var midpoint = turf.midpoint(point1, point2);\n *\n * //addToMap\n * var addToMap = [point1, point2, midpoint];\n * midpoint.properties['marker-color'] = '#f00';\n */\nfunction midpoint(point1, point2) {\n    var dist = distance(point1, point2);\n    var heading = bearing(point1, point2);\n    var midpoint = destination(point1, dist / 2, heading);\n\n    return midpoint;\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\n\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature$2(geometry, properties, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject$4(options)) { throw new Error('options is invalid'); }\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (geometry === undefined) { throw new Error('geometry is required'); }\n    if (properties && properties.constructor !== Object) { throw new Error('properties must be an Object'); }\n    if (bbox) { validateBBox$2(bbox); }\n    if (id) { validateId$2(id); }\n\n    // Main\n    var feat = {type: 'Feature'};\n    if (id) { feat.id = id; }\n    if (bbox) { feat.bbox = bbox; }\n    feat.properties = properties || {};\n    feat.geometry = geometry;\n    return feat;\n}\n\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point$2(coordinates, properties, options) {\n    if (!coordinates) { throw new Error('coordinates is required'); }\n    if (!Array.isArray(coordinates)) { throw new Error('coordinates must be an Array'); }\n    if (coordinates.length < 2) { throw new Error('coordinates must be at least 2 numbers long'); }\n    if (!isNumber$2(coordinates[0]) || !isNumber$2(coordinates[1])) { throw new Error('coordinates must contain numbers'); }\n\n    return feature$2({\n        type: 'Point',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber$2(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$4(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nfunction validateBBox$2(bbox) {\n    if (!bbox) { throw new Error('bbox is required'); }\n    if (!Array.isArray(bbox)) { throw new Error('bbox must be an Array'); }\n    if (bbox.length !== 4 && bbox.length !== 6) { throw new Error('bbox must be an Array of 4 or 6 numbers'); }\n    bbox.forEach(function (num) {\n        if (!isNumber$2(num)) { throw new Error('bbox must only contain numbers'); }\n    });\n}\n\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nfunction validateId$2(id) {\n    if (!id) { throw new Error('id is required'); }\n    if (['string', 'number'].indexOf(typeof id) === -1) { throw new Error('id must be a number or a string'); }\n}\n\n/**\n * Callback for coordEach\n *\n * @callback coordEachCallback\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Iterate over coordinates in any GeoJSON object, similar to Array.forEach()\n *\n * @name coordEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentCoord, coordIndex, featureIndex, multiFeatureIndex)\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordEach(features, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction coordEach$1(geojson, callback, excludeWrapCoord) {\n    // Handles null Geometry -- Skips this GeoJSON\n    if (geojson === null) { return; }\n    var j, k, l, geometry, stopG, coords,\n        geometryMaybeCollection,\n        wrapShrink = 0,\n        coordIndex = 0,\n        isGeometryCollection,\n        type = geojson.type,\n        isFeatureCollection = type === 'FeatureCollection',\n        isFeature = type === 'Feature',\n        stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n        geometryMaybeCollection = (isFeatureCollection ? geojson.features[featureIndex].geometry :\n            (isFeature ? geojson.geometry : geojson));\n        isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n        stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n        for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n            var multiFeatureIndex = 0;\n            var geometryIndex = 0;\n            geometry = isGeometryCollection ?\n                geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n\n            // Handles null Geometry -- Skips this geometry\n            if (geometry === null) { continue; }\n            coords = geometry.coordinates;\n            var geomType = geometry.type;\n\n            wrapShrink = (excludeWrapCoord && (geomType === 'Polygon' || geomType === 'MultiPolygon')) ? 1 : 0;\n\n            switch (geomType) {\n            case null:\n                break;\n            case 'Point':\n                if (callback(coords, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                coordIndex++;\n                multiFeatureIndex++;\n                break;\n            case 'LineString':\n            case 'MultiPoint':\n                for (j = 0; j < coords.length; j++) {\n                    if (callback(coords[j], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                    coordIndex++;\n                    if (geomType === 'MultiPoint') { multiFeatureIndex++; }\n                }\n                if (geomType === 'LineString') { multiFeatureIndex++; }\n                break;\n            case 'Polygon':\n            case 'MultiLineString':\n                for (j = 0; j < coords.length; j++) {\n                    for (k = 0; k < coords[j].length - wrapShrink; k++) {\n                        if (callback(coords[j][k], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                        coordIndex++;\n                    }\n                    if (geomType === 'MultiLineString') { multiFeatureIndex++; }\n                    if (geomType === 'Polygon') { geometryIndex++; }\n                }\n                if (geomType === 'Polygon') { multiFeatureIndex++; }\n                break;\n            case 'MultiPolygon':\n                for (j = 0; j < coords.length; j++) {\n                    if (geomType === 'MultiPolygon') { geometryIndex = 0; }\n                    for (k = 0; k < coords[j].length; k++) {\n                        for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                            if (callback(coords[j][k][l], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                            coordIndex++;\n                        }\n                        geometryIndex++;\n                    }\n                    multiFeatureIndex++;\n                }\n                break;\n            case 'GeometryCollection':\n                for (j = 0; j < geometry.geometries.length; j++)\n                    { if (coordEach$1(geometry.geometries[j], callback, excludeWrapCoord) === false) { return false; } }\n                break;\n            default:\n                throw new Error('Unknown Geometry Type');\n            }\n        }\n    }\n}\n\n/**\n * Takes one or more features and calculates the centroid using the mean of all vertices.\n * This lessens the effect of small islands and artifacts when calculating the centroid of a set of polygons.\n *\n * @name centroid\n * @param {GeoJSON} geojson GeoJSON to be centered\n * @param {Object} [properties={}] an Object that is used as the {@link Feature}'s properties\n * @returns {Feature<Point>} the centroid of the input features\n * @example\n * var polygon = turf.polygon([[[-81, 41], [-88, 36], [-84, 31], [-80, 33], [-77, 39], [-81, 41]]]);\n *\n * var centroid = turf.centroid(polygon);\n *\n * //addToMap\n * var addToMap = [polygon, centroid]\n */\nfunction centroid$1(geojson, properties) {\n    var xSum = 0;\n    var ySum = 0;\n    var len = 0;\n    coordEach$1(geojson, function (coord) {\n        xSum += coord[0];\n        ySum += coord[1];\n        len++;\n    }, true);\n    return point$2([xSum / len, ySum / len], properties);\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\n\n/**\n * Converts an angle in radians to degrees\n *\n * @name radiansToDegrees\n * @param {number} radians angle in radians\n * @returns {number} degrees between 0 and 360 degrees\n */\nfunction radiansToDegrees(radians) {\n    if (radians === null || radians === undefined) { throw new Error('radians is required'); }\n\n    var degrees = radians % (2 * Math.PI);\n    return degrees * 180 / Math.PI;\n}\n\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nfunction degreesToRadians$1(degrees) {\n    if (degrees === null || degrees === undefined) { throw new Error('degrees is required'); }\n\n    var radians = degrees % 360;\n    return radians * Math.PI / 180;\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$3(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord$3(coord) {\n    if (!coord) { throw new Error('coord is required'); }\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') { return coord.geometry.coordinates; }\n    if (coord.type === 'Point') { return coord.coordinates; }\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) { return coord; }\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n// https://en.wikipedia.org/wiki/Rhumb_line\n/**\n * Takes two {@link Point|points} and finds the bearing angle between them along a Rhumb line\n * i.e. the angle measured in degrees start the north line (0 degrees)\n *\n * @name rhumbBearing\n * @param {Coord} start starting Point\n * @param {Coord} end ending Point\n * @param {Object} [options] Optional parameters\n * @param {boolean} [options.final=false] calculates the final bearing if true\n * @returns {number} bearing from north in decimal degrees, between -180 and 180 degrees (positive clockwise)\n * @example\n * var point1 = turf.point([-75.343, 39.984], {\"marker-color\": \"#F00\"});\n * var point2 = turf.point([-75.534, 39.123], {\"marker-color\": \"#00F\"});\n *\n * var bearing = turf.rhumbBearing(point1, point2);\n *\n * //addToMap\n * var addToMap = [point1, point2];\n * point1.properties.bearing = bearing;\n * point2.properties.bearing = bearing;\n */\nfunction rhumbBearing(start, end, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$3(options)) { throw new Error('options is invalid'); }\n    var final = options.final;\n\n    // validation\n    if (!start) { throw new Error('start point is required'); }\n    if (!end) { throw new Error('end point is required'); }\n\n    var bear360;\n\n    if (final) { bear360 = calculateRhumbBearing(getCoord$3(end), getCoord$3(start)); }\n    else { bear360 = calculateRhumbBearing(getCoord$3(start), getCoord$3(end)); }\n\n    var bear180 = (bear360 > 180) ? -(360 - bear360) : bear360;\n\n    return bear180;\n}\n\n/**\n * Returns the bearing from ‘this’ point to destination point along a rhumb line.\n * Adapted from Geodesy: https://github.com/chrisveness/geodesy/blob/master/latlon-spherical.js\n *\n * @private\n * @param   {Array<number>} from - origin point.\n * @param   {Array<number>} to - destination point.\n * @returns {number} Bearing in degrees from north.\n * @example\n * var p1 = new LatLon(51.127, 1.338);\n * var p2 = new LatLon(50.964, 1.853);\n * var d = p1.rhumbBearingTo(p2); // 116.7 m\n */\nfunction calculateRhumbBearing(from, to) {\n    // φ => phi\n    // Δλ => deltaLambda\n    // Δψ => deltaPsi\n    // θ => theta\n    var phi1 = degreesToRadians$1(from[1]);\n    var phi2 = degreesToRadians$1(to[1]);\n    var deltaLambda = degreesToRadians$1((to[0] - from[0]));\n    // if deltaLambdaon over 180° take shorter rhumb line across the anti-meridian:\n    if (deltaLambda > Math.PI) { deltaLambda -= 2 * Math.PI; }\n    if (deltaLambda < -Math.PI) { deltaLambda += 2 * Math.PI; }\n\n    var deltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n\n    var theta = Math.atan2(deltaLambda, deltaPsi);\n\n    return (radiansToDegrees(theta) + 360) % 360;\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\nvar earthRadius$1 = 6371008.8;\n\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n */\nvar factors$1 = {\n    meters: earthRadius$1,\n    metres: earthRadius$1,\n    millimeters: earthRadius$1 * 1000,\n    millimetres: earthRadius$1 * 1000,\n    centimeters: earthRadius$1 * 100,\n    centimetres: earthRadius$1 * 100,\n    kilometers: earthRadius$1 / 1000,\n    kilometres: earthRadius$1 / 1000,\n    miles: earthRadius$1 / 1609.344,\n    nauticalmiles: earthRadius$1 / 1852,\n    inches: earthRadius$1 * 39.370,\n    yards: earthRadius$1 / 1.0936,\n    feet: earthRadius$1 * 3.28084,\n    radians: 1,\n    degrees: earthRadius$1 / 111325,\n};\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from radians to a more friendly unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name radiansToLength\n * @param {number} radians in radians across the sphere\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} distance\n */\nfunction radiansToLength$1(radians, units) {\n    if (radians === undefined || radians === null) { throw new Error('radians is required'); }\n\n    if (units && typeof units !== 'string') { throw new Error('units must be a string'); }\n    var factor = factors$1[units || 'kilometers'];\n    if (!factor) { throw new Error(units + ' units is invalid'); }\n    return radians * factor;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into radians\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name lengthToRadians\n * @param {number} distance in real units\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} radians\n */\nfunction lengthToRadians$1(distance, units) {\n    if (distance === undefined || distance === null) { throw new Error('distance is required'); }\n\n    if (units && typeof units !== 'string') { throw new Error('units must be a string'); }\n    var factor = factors$1[units || 'kilometers'];\n    if (!factor) { throw new Error(units + ' units is invalid'); }\n    return distance / factor;\n}\n\n/**\n * Converts a length to the requested unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @param {number} length to be converted\n * @param {string} originalUnit of the length\n * @param {string} [finalUnit='kilometers'] returned unit\n * @returns {number} the converted length\n */\nfunction convertLength$1(length, originalUnit, finalUnit) {\n    if (length === null || length === undefined) { throw new Error('length is required'); }\n    if (!(length >= 0)) { throw new Error('length must be a positive number'); }\n\n    return radiansToLength$1(lengthToRadians$1(length, originalUnit), finalUnit || 'kilometers');\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$2(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord$2(coord) {\n    if (!coord) { throw new Error('coord is required'); }\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') { return coord.geometry.coordinates; }\n    if (coord.type === 'Point') { return coord.coordinates; }\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) { return coord; }\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n// https://en.wikipedia.org/wiki/Rhumb_line\n/**\n * Calculates the distance along a rhumb line between two {@link Point|points} in degrees, radians,\n * miles, or kilometers.\n *\n * @name rhumbDistance\n * @param {Coord} from origin point\n * @param {Coord} to destination point\n * @param {Object} [options] Optional parameters\n * @param {string} [options.units=\"kilometers\"] can be degrees, radians, miles, or kilometers\n * @returns {number} distance between the two points\n * @example\n * var from = turf.point([-75.343, 39.984]);\n * var to = turf.point([-75.534, 39.123]);\n * var options = {units: 'miles'};\n *\n * var distance = turf.rhumbDistance(from, to, options);\n *\n * //addToMap\n * var addToMap = [from, to];\n * from.properties.distance = distance;\n * to.properties.distance = distance;\n */\nfunction rhumbDistance(from, to, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$2(options)) { throw new Error('options is invalid'); }\n    var units = options.units;\n\n    // validation\n    if (!from) { throw new Error('from point is required'); }\n    if (!to) { throw new Error('to point is required'); }\n\n    var origin = getCoord$2(from);\n    var destination = getCoord$2(to);\n\n    // compensate the crossing of the 180th meridian (https://macwright.org/2016/09/26/the-180th-meridian.html)\n    // solution from https://github.com/mapbox/mapbox-gl-js/issues/3250#issuecomment-294887678\n    destination[0] += (destination[0] - origin[0] > 180) ? -360 : (origin[0] - destination[0] > 180) ? 360 : 0;\n    var distanceInMeters = calculateRhumbDistance(origin, destination);\n    var distance = convertLength$1(distanceInMeters, 'meters', units);\n    return distance;\n}\n\n/**\n * Returns the distance travelling from ‘this’ point to destination point along a rhumb line.\n * Adapted from Geodesy: https://github.com/chrisveness/geodesy/blob/master/latlon-spherical.js\n *\n * @private\n * @param   {Array<number>} origin point.\n * @param   {Array<number>} destination point.\n * @param   {number} [radius=6371e3] - (Mean) radius of earth (defaults to radius in metres).\n * @returns {number} Distance in km between this point and destination point (same units as radius).\n *\n * @example\n *     var p1 = new LatLon(51.127, 1.338);\n *     var p2 = new LatLon(50.964, 1.853);\n *     var d = p1.distanceTo(p2); // 40.31 km\n */\nfunction calculateRhumbDistance(origin, destination, radius) {\n    // φ => phi\n    // λ => lambda\n    // ψ => psi\n    // Δ => Delta\n    // δ => delta\n    // θ => theta\n\n    radius = (radius === undefined) ? earthRadius$1 : Number(radius);\n    // see www.edwilliams.org/avform.htm#Rhumb\n\n    var R = radius;\n    var phi1 = origin[1] * Math.PI / 180;\n    var phi2 = destination[1] * Math.PI / 180;\n    var DeltaPhi = phi2 - phi1;\n    var DeltaLambda = Math.abs(destination[0] - origin[0]) * Math.PI / 180;\n    // if dLon over 180° take shorter rhumb line across the anti-meridian:\n    if (DeltaLambda > Math.PI) { DeltaLambda -= 2 * Math.PI; }\n\n    // on Mercator projection, longitude distances shrink by latitude; q is the 'stretch factor'\n    // q becomes ill-conditioned along E-W line (0/0); use empirical tolerance to avoid it\n    var DeltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n    var q = Math.abs(DeltaPsi) > 10e-12 ? DeltaPhi / DeltaPsi : Math.cos(phi1);\n\n    // distance is pythagoras on 'stretched' Mercator projection\n    var delta = Math.sqrt(DeltaPhi * DeltaPhi + q * q * DeltaLambda * DeltaLambda); // angular distance in radians\n    var dist = delta * R;\n\n    return dist;\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\nvar earthRadius = 6371008.8;\n\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n */\nvar factors = {\n    meters: earthRadius,\n    metres: earthRadius,\n    millimeters: earthRadius * 1000,\n    millimetres: earthRadius * 1000,\n    centimeters: earthRadius * 100,\n    centimetres: earthRadius * 100,\n    kilometers: earthRadius / 1000,\n    kilometres: earthRadius / 1000,\n    miles: earthRadius / 1609.344,\n    nauticalmiles: earthRadius / 1852,\n    inches: earthRadius * 39.370,\n    yards: earthRadius / 1.0936,\n    feet: earthRadius * 3.28084,\n    radians: 1,\n    degrees: earthRadius / 111325,\n};\n\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature$1(geometry, properties, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject$1(options)) { throw new Error('options is invalid'); }\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (geometry === undefined) { throw new Error('geometry is required'); }\n    if (properties && properties.constructor !== Object) { throw new Error('properties must be an Object'); }\n    if (bbox) { validateBBox$1(bbox); }\n    if (id) { validateId$1(id); }\n\n    // Main\n    var feat = {type: 'Feature'};\n    if (id) { feat.id = id; }\n    if (bbox) { feat.bbox = bbox; }\n    feat.properties = properties || {};\n    feat.geometry = geometry;\n    return feat;\n}\n\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point$1(coordinates, properties, options) {\n    if (!coordinates) { throw new Error('coordinates is required'); }\n    if (!Array.isArray(coordinates)) { throw new Error('coordinates must be an Array'); }\n    if (coordinates.length < 2) { throw new Error('coordinates must be at least 2 numbers long'); }\n    if (!isNumber$1(coordinates[0]) || !isNumber$1(coordinates[1])) { throw new Error('coordinates must contain numbers'); }\n\n    return feature$1({\n        type: 'Point',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from radians to a more friendly unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name radiansToLength\n * @param {number} radians in radians across the sphere\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} distance\n */\nfunction radiansToLength(radians, units) {\n    if (radians === undefined || radians === null) { throw new Error('radians is required'); }\n\n    if (units && typeof units !== 'string') { throw new Error('units must be a string'); }\n    var factor = factors[units || 'kilometers'];\n    if (!factor) { throw new Error(units + ' units is invalid'); }\n    return radians * factor;\n}\n\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into radians\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name lengthToRadians\n * @param {number} distance in real units\n * @param {string} [units='kilometers'] can be degrees, radians, miles, or kilometers inches, yards, metres, meters, kilometres, kilometers.\n * @returns {number} radians\n */\nfunction lengthToRadians(distance, units) {\n    if (distance === undefined || distance === null) { throw new Error('distance is required'); }\n\n    if (units && typeof units !== 'string') { throw new Error('units must be a string'); }\n    var factor = factors[units || 'kilometers'];\n    if (!factor) { throw new Error(units + ' units is invalid'); }\n    return distance / factor;\n}\n\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nfunction degreesToRadians(degrees) {\n    if (degrees === null || degrees === undefined) { throw new Error('degrees is required'); }\n\n    var radians = degrees % 360;\n    return radians * Math.PI / 180;\n}\n\n/**\n * Converts a length to the requested unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @param {number} length to be converted\n * @param {string} originalUnit of the length\n * @param {string} [finalUnit='kilometers'] returned unit\n * @returns {number} the converted length\n */\nfunction convertLength(length, originalUnit, finalUnit) {\n    if (length === null || length === undefined) { throw new Error('length is required'); }\n    if (!(length >= 0)) { throw new Error('length must be a positive number'); }\n\n    return radiansToLength(lengthToRadians(length, originalUnit), finalUnit || 'kilometers');\n}\n\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber$1(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject$1(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nfunction validateBBox$1(bbox) {\n    if (!bbox) { throw new Error('bbox is required'); }\n    if (!Array.isArray(bbox)) { throw new Error('bbox must be an Array'); }\n    if (bbox.length !== 4 && bbox.length !== 6) { throw new Error('bbox must be an Array of 4 or 6 numbers'); }\n    bbox.forEach(function (num) {\n        if (!isNumber$1(num)) { throw new Error('bbox must only contain numbers'); }\n    });\n}\n\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nfunction validateId$1(id) {\n    if (!id) { throw new Error('id is required'); }\n    if (['string', 'number'].indexOf(typeof id) === -1) { throw new Error('id must be a number or a string'); }\n}\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord$1(coord) {\n    if (!coord) { throw new Error('coord is required'); }\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') { return coord.geometry.coordinates; }\n    if (coord.type === 'Point') { return coord.coordinates; }\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) { return coord; }\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n// https://en.wikipedia.org/wiki/Rhumb_line\n/**\n * Returns the destination {@link Point} having travelled the given distance along a Rhumb line from the\n * origin Point with the (varant) given bearing.\n *\n * @name rhumbDestination\n * @param {Coord} origin starting point\n * @param {number} distance distance from the starting point\n * @param {number} bearing varant bearing angle ranging from -180 to 180 degrees from north\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] can be degrees, radians, miles, or kilometers\n * @param {Object} [options.properties={}] translate properties to destination point\n * @returns {Feature<Point>} Destination point.\n * @example\n * var pt = turf.point([-75.343, 39.984], {\"marker-color\": \"F00\"});\n * var distance = 50;\n * var bearing = 90;\n * var options = {units: 'miles'};\n *\n * var destination = turf.rhumbDestination(pt, distance, bearing, options);\n *\n * //addToMap\n * var addToMap = [pt, destination]\n * destination.properties['marker-color'] = '#00F';\n */\nfunction rhumbDestination(origin, distance, bearing, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$1(options)) { throw new Error('options is invalid'); }\n    var units = options.units;\n    var properties = options.properties;\n\n    // validation\n    if (!origin) { throw new Error('origin is required'); }\n    if (distance === undefined || distance === null) { throw new Error('distance is required'); }\n    if (bearing === undefined || bearing === null) { throw new Error('bearing is required'); }\n    if (!(distance >= 0)) { throw new Error('distance must be greater than 0'); }\n\n    var distanceInMeters = convertLength(distance, units, 'meters');\n    var coords = getCoord$1(origin);\n    var destination = calculateRhumbDestination(coords, distanceInMeters, bearing);\n\n    // compensate the crossing of the 180th meridian (https://macwright.org/2016/09/26/the-180th-meridian.html)\n    // solution from https://github.com/mapbox/mapbox-gl-js/issues/3250#issuecomment-294887678\n    destination[0] += (destination[0] - coords[0] > 180) ? -360 : (coords[0] - destination[0] > 180) ? 360 : 0;\n    return point$1(destination, properties);\n}\n\n/**\n * Returns the destination point having travelled along a rhumb line from origin point the given\n * distance on the  given bearing.\n * Adapted from Geodesy: http://www.movable-type.co.uk/scripts/latlong.html#rhumblines\n *\n * @private\n * @param   {Array<number>} origin - point\n * @param   {number} distance - Distance travelled, in same units as earth radius (default: metres).\n * @param   {number} bearing - Bearing in degrees from north.\n * @param   {number} [radius=6371e3] - (Mean) radius of earth (defaults to radius in metres).\n * @returns {Array<number>} Destination point.\n */\nfunction calculateRhumbDestination(origin, distance, bearing, radius) {\n    // φ => phi\n    // λ => lambda\n    // ψ => psi\n    // Δ => Delta\n    // δ => delta\n    // θ => theta\n\n    radius = (radius === undefined) ? earthRadius : Number(radius);\n\n    var delta = distance / radius; // angular distance in radians\n    var lambda1 = origin[0] * Math.PI / 180; // to radians, but without normalize to 𝜋\n    var phi1 = degreesToRadians(origin[1]);\n    var theta = degreesToRadians(bearing);\n\n    var DeltaPhi = delta * Math.cos(theta);\n    var phi2 = phi1 + DeltaPhi;\n\n    // check for some daft bugger going past the pole, normalise latitude if so\n    if (Math.abs(phi2) > Math.PI / 2) { phi2 = phi2 > 0 ? Math.PI - phi2 : -Math.PI - phi2; }\n\n    var DeltaPsi = Math.log(Math.tan(phi2 / 2 + Math.PI / 4) / Math.tan(phi1 / 2 + Math.PI / 4));\n    var q = Math.abs(DeltaPsi) > 10e-12 ? DeltaPhi / DeltaPsi : Math.cos(phi1); // E-W course becomes ill-conditioned with 0/0\n\n    var DeltaLambda = delta * Math.sin(theta) / q;\n    var lambda2 = lambda1 + DeltaLambda;\n\n    return [((lambda2 * 180 / Math.PI) + 540) % 360 - 180, phi2 * 180 / Math.PI]; // normalise to −180..+180°\n}\n\n/**\n * Returns a cloned copy of the passed GeoJSON Object, including possible 'Foreign Members'.\n * ~3-5x faster than the common JSON.parse + JSON.stringify combo method.\n *\n * @name clone\n * @param {GeoJSON} geojson GeoJSON Object\n * @returns {GeoJSON} cloned GeoJSON Object\n * @example\n * var line = turf.lineString([[-74, 40], [-78, 42], [-82, 35]], {color: 'red'});\n *\n * var lineCloned = turf.clone(line);\n */\nfunction clone(geojson) {\n    if (!geojson) { throw new Error('geojson is required'); }\n\n    switch (geojson.type) {\n    case 'Feature':\n        return cloneFeature(geojson);\n    case 'FeatureCollection':\n        return cloneFeatureCollection(geojson);\n    case 'Point':\n    case 'LineString':\n    case 'Polygon':\n    case 'MultiPoint':\n    case 'MultiLineString':\n    case 'MultiPolygon':\n    case 'GeometryCollection':\n        return cloneGeometry(geojson);\n    default:\n        throw new Error('unknown GeoJSON type');\n    }\n}\n\n/**\n * Clone Feature\n *\n * @private\n * @param {Feature<any>} geojson GeoJSON Feature\n * @returns {Feature<any>} cloned Feature\n */\nfunction cloneFeature(geojson) {\n    var cloned = {type: 'Feature'};\n    // Preserve Foreign Members\n    Object.keys(geojson).forEach(function (key) {\n        switch (key) {\n        case 'type':\n        case 'properties':\n        case 'geometry':\n            return;\n        default:\n            cloned[key] = geojson[key];\n        }\n    });\n    // Add properties & geometry last\n    cloned.properties = cloneProperties(geojson.properties);\n    cloned.geometry = cloneGeometry(geojson.geometry);\n    return cloned;\n}\n\n/**\n * Clone Properties\n *\n * @private\n * @param {Object} properties GeoJSON Properties\n * @returns {Object} cloned Properties\n */\nfunction cloneProperties(properties) {\n    var cloned = {};\n    if (!properties) { return cloned; }\n    Object.keys(properties).forEach(function (key) {\n        var value = properties[key];\n        if (typeof value === 'object') {\n            if (value === null) {\n                // handle null\n                cloned[key] = null;\n            } else if (value.length) {\n                // handle Array\n                cloned[key] = value.map(function (item) {\n                    return item;\n                });\n            } else {\n                // handle generic Object\n                cloned[key] = cloneProperties(value);\n            }\n        } else { cloned[key] = value; }\n    });\n    return cloned;\n}\n\n/**\n * Clone Feature Collection\n *\n * @private\n * @param {FeatureCollection<any>} geojson GeoJSON Feature Collection\n * @returns {FeatureCollection<any>} cloned Feature Collection\n */\nfunction cloneFeatureCollection(geojson) {\n    var cloned = {type: 'FeatureCollection'};\n\n    // Preserve Foreign Members\n    Object.keys(geojson).forEach(function (key) {\n        switch (key) {\n        case 'type':\n        case 'features':\n            return;\n        default:\n            cloned[key] = geojson[key];\n        }\n    });\n    // Add features\n    cloned.features = geojson.features.map(function (feature) {\n        return cloneFeature(feature);\n    });\n    return cloned;\n}\n\n/**\n * Clone Geometry\n *\n * @private\n * @param {Geometry<any>} geometry GeoJSON Geometry\n * @returns {Geometry<any>} cloned Geometry\n */\nfunction cloneGeometry(geometry) {\n    var geom = {type: geometry.type};\n    if (geometry.bbox) { geom.bbox = geometry.bbox; }\n\n    if (geometry.type === 'GeometryCollection') {\n        geom.geometries = geometry.geometries.map(function (geom) {\n            return cloneGeometry(geom);\n        });\n        return geom;\n    }\n    geom.coordinates = deepSlice(geometry.coordinates);\n    return geom;\n}\n\n/**\n * Deep Slice coordinates\n *\n * @private\n * @param {Coordinates} coords Coordinates\n * @returns {Coordinates} all coordinates sliced\n */\nfunction deepSlice(coords) {\n    if (typeof coords[0] !== 'object') { return coords.slice(); }\n    return coords.map(function (coord) {\n        return deepSlice(coord);\n    });\n}\n\n/**\n * Unwrap coordinates from a Feature, Geometry Object or an Array\n *\n * @name getCoords\n * @param {Array<any>|Geometry|Feature} coords Feature, Geometry Object or an Array\n * @returns {Array<any>} coordinates\n * @example\n * var poly = turf.polygon([[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]);\n *\n * var coords = turf.getCoords(poly);\n * //= [[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]\n */\nfunction getCoords$1(coords) {\n    if (!coords) { throw new Error('coords is required'); }\n\n    // Feature\n    if (coords.type === 'Feature' && coords.geometry !== null) { return coords.geometry.coordinates; }\n\n    // Geometry\n    if (coords.coordinates) { return coords.coordinates; }\n\n    // Array of numbers\n    if (Array.isArray(coords)) { return coords; }\n\n    throw new Error('coords must be GeoJSON Feature, Geometry Object or an Array');\n}\n\n/**\n * Rotates any geojson Feature or Geometry of a specified angle, around its `centroid` or a given `pivot` point;\n * all rotations follow the right-hand rule: https://en.wikipedia.org/wiki/Right-hand_rule\n *\n * @name transformRotate\n * @param {GeoJSON} geojson object to be rotated\n * @param {number} angle of rotation (along the vertical axis), from North in decimal degrees, negative clockwise\n * @param {Object} [options={}] Optional parameters\n * @param {Coord} [options.pivot='centroid'] point around which the rotation will be performed\n * @param {boolean} [options.mutate=false] allows GeoJSON input to be mutated (significant performance increase if true)\n * @returns {GeoJSON} the rotated GeoJSON feature\n * @example\n * var poly = turf.polygon([[[0,29],[3.5,29],[2.5,32],[0,29]]]);\n * var options = {pivot: [0, 25]};\n * var rotatedPoly = turf.transformRotate(poly, 10, options);\n *\n * //addToMap\n * var addToMap = [poly, rotatedPoly];\n * rotatedPoly.properties = {stroke: '#F00', 'stroke-width': 4};\n */\nfunction transformRotate(geojson, angle, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject$4(options)) { throw new Error('options is invalid'); }\n    var pivot = options.pivot;\n    var mutate = options.mutate;\n\n    // Input validation\n    if (!geojson) { throw new Error('geojson is required'); }\n    if (angle === undefined || angle === null || isNaN(angle)) { throw new Error('angle is required'); }\n\n    // Shortcut no-rotation\n    if (angle === 0) { return geojson; }\n\n    // Use centroid of GeoJSON if pivot is not provided\n    if (!pivot) { pivot = centroid$1(geojson); }\n\n    // Clone geojson to avoid side effects\n    if (mutate === false || mutate === undefined) { geojson = clone(geojson); }\n\n    // Rotate each coordinate\n    coordEach$1(geojson, function (pointCoords) {\n        var initialAngle = rhumbBearing(pivot, pointCoords);\n        var finalAngle = initialAngle + angle;\n        var distance = rhumbDistance(pivot, pointCoords);\n        var newCoords = getCoords$1(rhumbDestination(pivot, distance, finalAngle));\n        pointCoords[0] = newCoords[0];\n        pointCoords[1] = newCoords[1];\n    });\n    return geojson;\n}\n\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n */\n\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nfunction feature(geometry, properties, options) {\n    // Optional Parameters\n    options = options || {};\n    if (!isObject(options)) { throw new Error('options is invalid'); }\n    var bbox = options.bbox;\n    var id = options.id;\n\n    // Validation\n    if (geometry === undefined) { throw new Error('geometry is required'); }\n    if (properties && properties.constructor !== Object) { throw new Error('properties must be an Object'); }\n    if (bbox) { validateBBox(bbox); }\n    if (id) { validateId(id); }\n\n    // Main\n    var feat = {type: 'Feature'};\n    if (id) { feat.id = id; }\n    if (bbox) { feat.bbox = bbox; }\n    feat.properties = properties || {};\n    feat.geometry = geometry;\n    return feat;\n}\n\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nfunction point(coordinates, properties, options) {\n    if (!coordinates) { throw new Error('coordinates is required'); }\n    if (!Array.isArray(coordinates)) { throw new Error('coordinates must be an Array'); }\n    if (coordinates.length < 2) { throw new Error('coordinates must be at least 2 numbers long'); }\n    if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) { throw new Error('coordinates must contain numbers'); }\n\n    return feature({\n        type: 'Point',\n        coordinates: coordinates\n    }, properties, options);\n}\n\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nfunction isNumber(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nfunction isObject(input) {\n    return (!!input) && (input.constructor === Object);\n}\n\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nfunction validateBBox(bbox) {\n    if (!bbox) { throw new Error('bbox is required'); }\n    if (!Array.isArray(bbox)) { throw new Error('bbox must be an Array'); }\n    if (bbox.length !== 4 && bbox.length !== 6) { throw new Error('bbox must be an Array of 4 or 6 numbers'); }\n    bbox.forEach(function (num) {\n        if (!isNumber(num)) { throw new Error('bbox must only contain numbers'); }\n    });\n}\n\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nfunction validateId(id) {\n    if (!id) { throw new Error('id is required'); }\n    if (['string', 'number'].indexOf(typeof id) === -1) { throw new Error('id must be a number or a string'); }\n}\n\n/**\n * Callback for coordEach\n *\n * @callback coordEachCallback\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Iterate over coordinates in any GeoJSON object, similar to Array.forEach()\n *\n * @name coordEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentCoord, coordIndex, featureIndex, multiFeatureIndex)\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordEach(features, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction coordEach(geojson, callback, excludeWrapCoord) {\n    // Handles null Geometry -- Skips this GeoJSON\n    if (geojson === null) { return; }\n    var j, k, l, geometry, stopG, coords,\n        geometryMaybeCollection,\n        wrapShrink = 0,\n        coordIndex = 0,\n        isGeometryCollection,\n        type = geojson.type,\n        isFeatureCollection = type === 'FeatureCollection',\n        isFeature = type === 'Feature',\n        stop = isFeatureCollection ? geojson.features.length : 1;\n\n    // This logic may look a little weird. The reason why it is that way\n    // is because it's trying to be fast. GeoJSON supports multiple kinds\n    // of objects at its root: FeatureCollection, Features, Geometries.\n    // This function has the responsibility of handling all of them, and that\n    // means that some of the `for` loops you see below actually just don't apply\n    // to certain inputs. For instance, if you give this just a\n    // Point geometry, then both loops are short-circuited and all we do\n    // is gradually rename the input until it's called 'geometry'.\n    //\n    // This also aims to allocate as few resources as possible: just a\n    // few numbers and booleans, rather than any temporary arrays as would\n    // be required with the normalization approach.\n    for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n        geometryMaybeCollection = (isFeatureCollection ? geojson.features[featureIndex].geometry :\n            (isFeature ? geojson.geometry : geojson));\n        isGeometryCollection = (geometryMaybeCollection) ? geometryMaybeCollection.type === 'GeometryCollection' : false;\n        stopG = isGeometryCollection ? geometryMaybeCollection.geometries.length : 1;\n\n        for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n            var multiFeatureIndex = 0;\n            var geometryIndex = 0;\n            geometry = isGeometryCollection ?\n                geometryMaybeCollection.geometries[geomIndex] : geometryMaybeCollection;\n\n            // Handles null Geometry -- Skips this geometry\n            if (geometry === null) { continue; }\n            coords = geometry.coordinates;\n            var geomType = geometry.type;\n\n            wrapShrink = (excludeWrapCoord && (geomType === 'Polygon' || geomType === 'MultiPolygon')) ? 1 : 0;\n\n            switch (geomType) {\n            case null:\n                break;\n            case 'Point':\n                if (callback(coords, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                coordIndex++;\n                multiFeatureIndex++;\n                break;\n            case 'LineString':\n            case 'MultiPoint':\n                for (j = 0; j < coords.length; j++) {\n                    if (callback(coords[j], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                    coordIndex++;\n                    if (geomType === 'MultiPoint') { multiFeatureIndex++; }\n                }\n                if (geomType === 'LineString') { multiFeatureIndex++; }\n                break;\n            case 'Polygon':\n            case 'MultiLineString':\n                for (j = 0; j < coords.length; j++) {\n                    for (k = 0; k < coords[j].length - wrapShrink; k++) {\n                        if (callback(coords[j][k], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                        coordIndex++;\n                    }\n                    if (geomType === 'MultiLineString') { multiFeatureIndex++; }\n                    if (geomType === 'Polygon') { geometryIndex++; }\n                }\n                if (geomType === 'Polygon') { multiFeatureIndex++; }\n                break;\n            case 'MultiPolygon':\n                for (j = 0; j < coords.length; j++) {\n                    if (geomType === 'MultiPolygon') { geometryIndex = 0; }\n                    for (k = 0; k < coords[j].length; k++) {\n                        for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                            if (callback(coords[j][k][l], coordIndex, featureIndex, multiFeatureIndex, geometryIndex) === false) { return false; }\n                            coordIndex++;\n                        }\n                        geometryIndex++;\n                    }\n                    multiFeatureIndex++;\n                }\n                break;\n            case 'GeometryCollection':\n                for (j = 0; j < geometry.geometries.length; j++)\n                    { if (coordEach(geometry.geometries[j], callback, excludeWrapCoord) === false) { return false; } }\n                break;\n            default:\n                throw new Error('Unknown Geometry Type');\n            }\n        }\n    }\n}\n\n/**\n * Callback for featureEach\n *\n * @callback featureEachCallback\n * @param {Feature<any>} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Iterate over features in any GeoJSON object, similar to\n * Array.forEach.\n *\n * @name featureEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentFeature, featureIndex)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {foo: 'bar'}),\n *   turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.featureEach(features, function (currentFeature, featureIndex) {\n *   //=currentFeature\n *   //=featureIndex\n * });\n */\nfunction featureEach(geojson, callback) {\n    if (geojson.type === 'Feature') {\n        callback(geojson, 0);\n    } else if (geojson.type === 'FeatureCollection') {\n        for (var i = 0; i < geojson.features.length; i++) {\n            if (callback(geojson.features[i], i) === false) { break; }\n        }\n    }\n}\n\n/**\n * Takes one or more features and calculates the centroid using the mean of all vertices.\n * This lessens the effect of small islands and artifacts when calculating the centroid of a set of polygons.\n *\n * @name centroid\n * @param {GeoJSON} geojson GeoJSON to be centered\n * @param {Object} [properties={}] an Object that is used as the {@link Feature}'s properties\n * @returns {Feature<Point>} the centroid of the input features\n * @example\n * var polygon = turf.polygon([[[-81, 41], [-88, 36], [-84, 31], [-80, 33], [-77, 39], [-81, 41]]]);\n *\n * var centroid = turf.centroid(polygon);\n *\n * //addToMap\n * var addToMap = [polygon, centroid]\n */\nfunction centroid(geojson, properties) {\n    var xSum = 0;\n    var ySum = 0;\n    var len = 0;\n    coordEach(geojson, function (coord) {\n        xSum += coord[0];\n        ySum += coord[1];\n        len++;\n    }, true);\n    return point([xSum / len, ySum / len], properties);\n}\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nfunction getCoord(coord) {\n    if (!coord) { throw new Error('coord is required'); }\n    if (coord.type === 'Feature' && coord.geometry !== null && coord.geometry.type === 'Point') { return coord.geometry.coordinates; }\n    if (coord.type === 'Point') { return coord.coordinates; }\n    if (Array.isArray(coord) && coord.length >= 2 && coord[0].length === undefined && coord[1].length === undefined) { return coord; }\n\n    throw new Error('coord must be GeoJSON Point or an Array of numbers');\n}\n\n/**\n * Unwrap coordinates from a Feature, Geometry Object or an Array\n *\n * @name getCoords\n * @param {Array<any>|Geometry|Feature} coords Feature, Geometry Object or an Array\n * @returns {Array<any>} coordinates\n * @example\n * var poly = turf.polygon([[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]);\n *\n * var coords = turf.getCoords(poly);\n * //= [[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]\n */\nfunction getCoords(coords) {\n    if (!coords) { throw new Error('coords is required'); }\n\n    // Feature\n    if (coords.type === 'Feature' && coords.geometry !== null) { return coords.geometry.coordinates; }\n\n    // Geometry\n    if (coords.coordinates) { return coords.coordinates; }\n\n    // Array of numbers\n    if (Array.isArray(coords)) { return coords; }\n\n    throw new Error('coords must be GeoJSON Feature, Geometry Object or an Array');\n}\n\n/**\n * Get GeoJSON object's type, Geometry type is prioritize.\n *\n * @param {GeoJSON} geojson GeoJSON object\n * @param {string} [name=\"geojson\"] name of the variable to display in error message\n * @returns {string} GeoJSON type\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getType(point)\n * //=\"Point\"\n */\nfunction getType(geojson, name) {\n    if (!geojson) { throw new Error((name || 'geojson') + ' is required'); }\n    // GeoJSON Feature & GeometryCollection\n    if (geojson.geometry && geojson.geometry.type) { return geojson.geometry.type; }\n    // GeoJSON Geometry & FeatureCollection\n    if (geojson.type) { return geojson.type; }\n    throw new Error((name || 'geojson') + ' is invalid');\n}\n\n/**\n * Scale a GeoJSON from a given point by a factor of scaling (ex: factor=2 would make the GeoJSON 200% larger).\n * If a FeatureCollection is provided, the origin point will be calculated based on each individual Feature.\n *\n * @name transformScale\n * @param {GeoJSON} geojson GeoJSON to be scaled\n * @param {number} factor of scaling, positive or negative values greater than 0\n * @param {Object} [options={}] Optional parameters\n * @param {string|Coord} [options.origin='centroid'] Point from which the scaling will occur (string options: sw/se/nw/ne/center/centroid)\n * @param {boolean} [options.mutate=false] allows GeoJSON input to be mutated (significant performance increase if true)\n * @returns {GeoJSON} scaled GeoJSON\n * @example\n * var poly = turf.polygon([[[0,29],[3.5,29],[2.5,32],[0,29]]]);\n * var scaledPoly = turf.transformScale(poly, 3);\n *\n * //addToMap\n * var addToMap = [poly, scaledPoly];\n * scaledPoly.properties = {stroke: '#F00', 'stroke-width': 4};\n */\nfunction transformScale(geojson, factor, options) {\n    // Optional parameters\n    options = options || {};\n    if (!isObject(options)) { throw new Error('options is invalid'); }\n    var origin = options.origin;\n    var mutate = options.mutate;\n\n    // Input validation\n    if (!geojson) { throw new Error('geojson required'); }\n    if (typeof factor !== 'number' || factor === 0) { throw new Error('invalid factor'); }\n    var originIsPoint = Array.isArray(origin) || typeof origin === 'object';\n\n    // Clone geojson to avoid side effects\n    if (mutate !== true) { geojson = clone(geojson); }\n\n    // Scale each Feature separately\n    if (geojson.type === 'FeatureCollection' && !originIsPoint) {\n        featureEach(geojson, function (feature, index) {\n            geojson.features[index] = scale(feature, factor, origin);\n        });\n        return geojson;\n    }\n    // Scale Feature/Geometry\n    return scale(geojson, factor, origin);\n}\n\n/**\n * Scale Feature/Geometry\n *\n * @private\n * @param {Feature|Geometry} feature GeoJSON Feature/Geometry\n * @param {number} factor of scaling, positive or negative values greater than 0\n * @param {string|Coord} [origin=\"centroid\"] Point from which the scaling will occur (string options: sw/se/nw/ne/center/centroid)\n * @returns {Feature|Geometry} scaled GeoJSON Feature/Geometry\n */\nfunction scale(feature, factor, origin) {\n    // Default params\n    var isPoint = getType(feature) === 'Point';\n    origin = defineOrigin(feature, origin);\n\n    // Shortcut no-scaling\n    if (factor === 1 || isPoint) { return feature; }\n\n    // Scale each coordinate\n    coordEach(feature, function (coord) {\n        var originalDistance = rhumbDistance(origin, coord);\n        var bearing = rhumbBearing(origin, coord);\n        var newDistance = originalDistance * factor;\n        var newCoord = getCoords(rhumbDestination(origin, newDistance, bearing));\n        coord[0] = newCoord[0];\n        coord[1] = newCoord[1];\n        if (coord.length === 3) { coord[2] *= factor; }\n    });\n\n    return feature;\n}\n\n/**\n * Define Origin\n *\n * @private\n * @param {GeoJSON} geojson GeoJSON\n * @param {string|Coord} origin sw/se/nw/ne/center/centroid\n * @returns {Feature<Point>} Point origin\n */\nfunction defineOrigin(geojson, origin) {\n    // Default params\n    if (origin === undefined || origin === null) { origin = 'centroid'; }\n\n    // Input Coord\n    if (Array.isArray(origin) || typeof origin === 'object') { return getCoord(origin); }\n\n    // Define BBox\n    var bbox$1 = (geojson.bbox) ? geojson.bbox : bbox(geojson);\n    var west = bbox$1[0];\n    var south = bbox$1[1];\n    var east = bbox$1[2];\n    var north = bbox$1[3];\n\n    switch (origin) {\n    case 'sw':\n    case 'southwest':\n    case 'westsouth':\n    case 'bottomleft':\n        return point([west, south]);\n    case 'se':\n    case 'southeast':\n    case 'eastsouth':\n    case 'bottomright':\n        return point([east, south]);\n    case 'nw':\n    case 'northwest':\n    case 'westnorth':\n    case 'topleft':\n        return point([west, north]);\n    case 'ne':\n    case 'northeast':\n    case 'eastnorth':\n    case 'topright':\n        return point([east, north]);\n    case 'center':\n        return center(geojson);\n    case undefined:\n    case null:\n    case 'centroid':\n        return centroid(geojson);\n    default:\n        throw new Error('invalid origin');\n    }\n}\n\nvar img$1 = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1pJREFUeNrElk9IVFEUxs+89yYoDAumxUgkoYIDZfaXCqfA3GSBi8poEYWzjVrUJiqiJFoJZUEQEYYRBAaFpIsgq5F0UThYZJSLdKEtgpRSQd/M6zvXe8c743vznhs78GOGmXfPd+49551zQ47j0BKtGqyV31Pg95JWs6APO8AdMOC42wToBAlg+fkLaTuMgFMgDpLgLbgKDucEOPmdnLm/4rtRXEEULtL/HgLPwBWvDSpBFhsE0UVPwHl65CWlR7uF2CKDoBndR0ZpPRmRrerXbnAWDHsJNoPLmfF3cN5NVqyJQog+PfyU7K8PhWgQY0Fr+yUKrRJxz4Bd4LOb4Buwfy55hjK/BsgsP07OxDfxPfsgnBgl2EkENRNePX+84pkUcaD6jq2qc2RuqFeiVfpOXQVzIoKQiR1LB+6FNz1O9mBrjjDvVK7pA3uzp1DoiPhYV9S26dE+BkdBreQC6OWgwrtvChFl9uBtlfM9MmX+gsa6bWQjj3LhSvBIVmGPpEVWNQvPcGBZUeSdRaUdCCTIRZNG0aTHskcV93i0RRaIEOUaYOP0aLusFkftV3miWNZUkNZZvIyr8STosCqbyJkapxAKiNMi85jSO02z429jIBKgMz1xWZtQ/+sPsmjS5eEfoD2gmOI8eA7adLH81rYsZtAy238V3CSnhCM/6wL6WA86wYRcm09S+s6Zh+Vg2qVg6gIUSFeACv+iZqV6Dxu4k6RHu8j+eINMvEdWLMG/Xwf9wGtcbAQHuZfOvj7tOlXC8bs8RWKyafQYegfJjCXnOwy6i9Yh7hc4zmLVxgKPMPkplMzyxoW5239ROTkB3nvklLtHH3cTMR0qm1Rn8RXkLjvEA1T1QXFMGFfaTl/JwLjzX5O0gxIRLE8Ue8r9VqCZyqEt7yEd1mbcDGb/EOeTF7OoWdZIFgcSLqrBMzX5TrhJa+OocG/O6zRcKQ9EBJ9axbTIv0KEFu4tRNM/5ycCTiNnYJcdE+vZeJ7KY+aFKbfWlhUVkaNqdYeFjNPBk4KvGSpYmaLs1PfqpUdkrmJCGFcHruAMXxH1Y4Njvioa0TiZpYfyr4y67QQfCgmy8ep7clpHA3adXnALjGjDOqnE/AT1C3KDdLBFTW5pk/LVYKcvdMde9k+AAQDas8HyPpQD4AAAAABJRU5ErkJggg==\";\n\nvar img = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAActJREFUeNpi/P//PwMJwAWIbYH4MBDvIUUjA8giIvGy/6igmQS9RFnEA7fk1+f/v6/NQbZsGbUsAllyDGbJz73x/3+ss/r/61A2mE+KZUwEQnY6EFv+/3ib4de+BAYQDQL/3pxn+HU4h4Hh9xcQNxKIiwlFESGLQBHP8PtEJcP/b89R4xZo6e+zrSjq8AEWAvKg1CXPJOcJNPgOAyO3JMPfOysZmCTtIK4UMUBWR1Gqc0GOeVBCAMURWoIAARNK4wiUV1yBuAlZkJGVB8YsAWJTID5DrXzkAkt5f1+fI8knpOQjbBn2GimWgDAjiUWQIBAbQCP/DykaSbWIbMDEQCdAjkUGtLYoGYiPAfF5KK1Di2oiGZbc/n24BWM+A2IRYlMdMT4ygZVlf4BlG6hw/ff8EIgrSUwZR2zQgSw5DcTxYN9DC9Z/H27D5NdBg5Fii+pBBKggBWE4+POV4c/1ubBqw5KYaoJQPvoAxPw/t7jD6h5UVwJLcVaLdhBzIxAHUOIjcPHPZjuFgQFRkEJcyK/KwKKZRLVqQgZWlYNS24/NbuBqAlSlI1Xlx6hVqKJY9ut4BcntBVJKb7hl5LSAyCm9i5EakL2kaAQIMAAP/aLE8VYEBwAAAABJRU5ErkJggg==\";\n\n// const rotate = require('./img/rotate.png');\n// const scale = require('./img/scale.png');\n\nvar SRMode = {}; //scale rotate mode\n\nfunction parseSRCenter(value, defaultSRCenter) {\n    if ( defaultSRCenter === void 0 ) defaultSRCenter = SRCenter.Center;\n\n    if (value == undefined || value == null) { return defaultSRCenter; }\n  \n    if (value === SRCenter.Center || value === SRCenter.Opposite) { return value; }\n  \n    if (value == 'center') { return SRCenter.Center; }\n  \n    if (value == 'opposite') { return SRCenter.Opposite; }\n  \n    throw Error('Invalid SRCenter: ' + value);\n  }\n  \n  /*\n      opts = {\n          featureId: ...,\n  \n          canScale: default true,\n          canRotate: default true,\n  \n          rotatePivot: default 'center' or 'opposite',\n          scaleCenter: default 'center' or 'opposite',\n  \n          canSelectFeatures: default true,    // can exit to simple_select mode\n      }\n   */\n  SRMode.onSetup = function (opts) {\n    var featureId = this.getSelected()[0].id;\n  \n    var feature = this.getFeature(featureId);\n  \n    if (!feature) {\n      throw new Error('You must provide a valid featureId to enter SRMode');\n    }\n  \n    if (\n      feature.type === geojsonTypes.POINT ||\n      feature.type === geojsonTypes.MULTI_POINT\n    ) {\n      throw new TypeError('SRMode can not handle points');\n    }\n    //   if (\n    //     feature.coordinates === undefined ||\n    //     feature.coordinates.length != 1 ||\n    //     feature.coordinates[0].length <= 2\n    //   ) {\n    //     throw new TypeError('SRMode can only handle polygons');\n    //   }\n  \n    var state = {\n      featureId: featureId,\n      feature: feature,\n  \n      canTrash: opts.canTrash != undefined ? opts.canTrash : true,\n  \n      canScale: opts.canScale != undefined ? opts.canScale : true,\n      canRotate: opts.canRotate != undefined ? opts.canRotate : true,\n  \n      singleRotationPoint:\n        opts.singleRotationPoint != undefined ? opts.singleRotationPoint : false,\n      rotationPointRadius:\n        opts.rotationPointRadius != undefined ? opts.rotationPointRadius : 1.0,\n  \n      rotatePivot: parseSRCenter(opts.rotatePivot, SRCenter.Center),\n      scaleCenter: parseSRCenter(opts.scaleCenter, SRCenter.Center),\n  \n      canSelectFeatures:\n        opts.canSelectFeatures != undefined ? opts.canSelectFeatures : true,\n      // selectedFeatureMode: opts.selectedFeatureMode != undefined ? opts.selectedFeatureMode : 'simple_select',\n  \n      dragMoveLocation: opts.startPos || null,\n      dragMoving: false,\n      canDragMove: false,\n      selectedCoordPaths: opts.coordPath ? [opts.coordPath] : [],\n    };\n  \n    if (!(state.canRotate || state.canScale)) {\n      console.warn('Non of canScale or canRotate is true');\n    }\n  \n    this.setSelectedCoordinates(\n      this.pathsToCoordinates(featureId, state.selectedCoordPaths)\n    );\n    this.setSelected(featureId);\n    doubleClickZoom.disable(this);\n  \n    this.setActionableState({\n      combineFeatures: false,\n      uncombineFeatures: false,\n      trash: state.canTrash,\n    });\n  \n    var _this = this;\n\n    //\n    // const img_rotate = new Image();\n    // img_rotate.src = \"./img/rotate.png\";\n    // const img_scale = new Image();\n    // img_scale.src = \"./img/scale.png\";\n\n    this.map.loadImage(img$1, function (error, image) {\n      if (error) { throw error; }\n      if (!_this.map.getImage('rotate')) { _this.map.addImage('rotate', image); }\n    });\n    this.map.loadImage(img, function (error, image) {\n      if (error) { throw error; }\n      if (!_this.map.getImage('scale')) { _this.map.addImage('scale', image); }\n    });\n  \n    return state;\n  };\n  \n  SRMode.toDisplayFeatures = function (state, geojson, push) {\n    if (state.featureId === geojson.properties.id) {\n      geojson.properties.active = activeStates.ACTIVE;\n      push(geojson);\n  \n      var suppPoints = createSupplementaryPoints(geojson, {\n        map: this.map,\n        midpoints: false,\n        selectedPaths: state.selectedCoordPaths,\n      });\n  \n      if (state.canScale) {\n        this.computeBisectrix(suppPoints);\n        suppPoints.forEach(push);\n      }\n  \n      if (state.canRotate) {\n        var rotPoints = this.createRotationPoints(state, geojson, suppPoints);\n        rotPoints.forEach(push);\n      }\n    } else {\n      geojson.properties.active = activeStates.INACTIVE;\n      push(geojson);\n    }\n  \n    // this.fireActionable(state);\n    this.setActionableState({\n      combineFeatures: false,\n      uncombineFeatures: false,\n      trash: state.canTrash,\n    });\n  \n    // this.fireUpdate();\n  };\n  \n  SRMode.onStop = function () {\n    doubleClickZoom.enable(this);\n    this.clearSelectedCoordinates();\n  };\n  \n  // TODO why I need this?\n  SRMode.pathsToCoordinates = function (featureId, paths) {\n    return paths.map(function (coord_path) {\n      return { feature_id: featureId, coord_path: coord_path };\n    });\n  };\n  \n  SRMode.computeBisectrix = function (points) {\n    for (var i1 = 0; i1 < points.length; i1++) {\n      var i0 = (i1 - 1 + points.length) % points.length;\n      var i2 = (i1 + 1) % points.length;\n  \n      lineString([\n        points[i0].geometry.coordinates,\n        points[i1].geometry.coordinates ]);\n      lineString([\n        points[i1].geometry.coordinates,\n        points[i2].geometry.coordinates ]);\n      var a1 = bearing(\n        points[i0].geometry.coordinates,\n        points[i1].geometry.coordinates\n      );\n      var a2 = bearing(\n        points[i2].geometry.coordinates,\n        points[i1].geometry.coordinates\n      );\n  \n      var a = (a1 + a2) / 2.0;\n  \n      if (a < 0.0) { a += 360; }\n      if (a > 360) { a -= 360; }\n  \n      points[i1].properties.heading = a;\n    }\n  };\n  \n  SRMode._createRotationPoint = function (\n    rotationWidgets,\n    featureId,\n    v1,\n    v2,\n    rotCenter,\n    radiusScale\n  ) {\n    var cR0 = midpoint(v1, v2).geometry.coordinates;\n    var heading = bearing(rotCenter, cR0);\n    var distance0 = distance(rotCenter, cR0);\n    var distance1 = radiusScale * distance0; // TODO depends on map scale\n    var cR1 = destination(rotCenter, distance1, heading, {}).geometry.coordinates;\n  \n    rotationWidgets.push({\n      type: geojsonTypes.FEATURE,\n      properties: {\n        meta: meta.MIDPOINT,\n        icon: 'rotate',\n        parent: featureId,\n        lng: cR1[0],\n        lat: cR1[1],\n        coord_path: v1.properties.coord_path,\n        heading: heading,\n      },\n      geometry: {\n        type: geojsonTypes.POINT,\n        coordinates: cR1,\n      },\n    });\n  };\n  \n  SRMode.createRotationPoints = function (state, geojson, suppPoints) {\n    var this$1$1 = this;\n\n    var ref = geojson.geometry;\n    var type = ref.type;\n    ref.coordinates;\n    var featureId = geojson.properties && geojson.properties.id;\n  \n    var rotationWidgets = [];\n    if (\n      type === geojsonTypes.POINT ||\n      type === geojsonTypes.MULTI_POINT\n    ) {\n      return;\n    }\n  \n    var corners = suppPoints.slice(0);\n    corners[corners.length] = corners[0];\n  \n    var v1 = null;\n  \n    var rotCenter = this.computeRotationCenter(state, geojson);\n  \n    if (state.singleRotationPoint) {\n      this._createRotationPoint(\n        rotationWidgets,\n        featureId,\n        corners[0],\n        corners[1],\n        rotCenter,\n        state.rotationPointRadius\n      );\n    } else {\n      corners.forEach(function (v2) {\n        if (v1 != null) {\n          this$1$1._createRotationPoint(\n            rotationWidgets,\n            featureId,\n            v1,\n            v2,\n            rotCenter,\n            state.rotationPointRadius\n          );\n        }\n  \n        v1 = v2;\n      });\n    }\n    return rotationWidgets;\n  };\n  \n  SRMode.startDragging = function (state, e) {\n    this.map.dragPan.disable();\n    state.canDragMove = true;\n    state.dragMoveLocation = e.lngLat;\n  };\n  \n  SRMode.stopDragging = function (state) {\n    this.map.dragPan.enable();\n    state.dragMoving = false;\n    state.canDragMove = false;\n    state.dragMoveLocation = null;\n  };\n  \n  var isRotatePoint = isOfMetaType(meta.MIDPOINT);\n  var isVertex = isOfMetaType(meta.VERTEX);\n  \n  SRMode.onTouchStart = SRMode.onMouseDown = function (state, e) {\n    if (isVertex(e)) { return this.onVertex(state, e); }\n    if (isRotatePoint(e)) { return this.onRotatePoint(state, e); }\n    if (isActiveFeature(e)) { return this.onFeature(state, e); }\n    // if (isMidpoint(e)) return this.onMidpoint(state, e);\n  };\n  \n  var TxMode = {\n    Scale: 1,\n    Rotate: 2,\n  };\n  \n  SRMode.onVertex = function (state, e) {\n    // convert internal MapboxDraw feature to valid GeoJSON:\n    this.computeAxes(state, state.feature.toGeoJSON());\n  \n    this.startDragging(state, e);\n    var about = e.featureTarget.properties;\n    state.selectedCoordPaths = [about.coord_path];\n    state.txMode = TxMode.Scale;\n  };\n  \n  SRMode.onRotatePoint = function (state, e) {\n    // convert internal MapboxDraw feature to valid GeoJSON:\n    this.computeAxes(state, state.feature.toGeoJSON());\n  \n    this.startDragging(state, e);\n    var about = e.featureTarget.properties;\n    state.selectedCoordPaths = [about.coord_path];\n    state.txMode = TxMode.Rotate;\n  };\n  \n  SRMode.onFeature = function (state, e) {\n    state.selectedCoordPaths = [];\n    this.startDragging(state, e);\n  };\n  \n  SRMode.coordinateIndex = function (coordPaths) {\n    if (coordPaths.length >= 1) {\n      var parts = coordPaths[0].split('.');\n      return parseInt(parts[parts.length - 1]);\n    } else {\n      return 0;\n    }\n  };\n  \n  SRMode.computeRotationCenter = function (state, polygon) {\n    var center0 = center(polygon);\n    return center0;\n  };\n  \n  SRMode.computeAxes = function (state, polygon) {\n    // TODO check min 3 points\n    var center0 = this.computeRotationCenter(state, polygon);\n    var corners;\n    if (polygon.geometry.type === geojsonTypes.POLYGON)\n      { corners = polygon.geometry.coordinates[0].slice(0); }\n    else if (polygon.geometry.type === geojsonTypes.MULTI_POLYGON) {\n      var temp = [];\n      polygon.geometry.coordinates.forEach(function (c) {\n        c.forEach(function (c2) {\n          c2.forEach(function (c3) {\n            temp.push(c3);\n          });\n        });\n      });\n      corners = temp;\n    } else if (polygon.geometry.type === geojsonTypes.LINE_STRING)\n      { corners = polygon.geometry.coordinates; }\n    else if (polygon.geometry.type === geojsonTypes.MULTI_LINE_STRING) {\n      var temp$1 = [];\n      polygon.geometry.coordinates.forEach(function (c) {\n        c.forEach(function (c2) {\n          temp$1.push(c2);\n        });\n      });\n      corners = temp$1;\n    }\n  \n    var n = corners.length - 1;\n    var iHalf = Math.floor(n / 2);\n  \n    var rotateCenters = [];\n    var headings = [];\n  \n    for (var i1 = 0; i1 < n; i1++) {\n      var i0 = i1 - 1;\n      if (i0 < 0) { i0 += n; }\n  \n      var c0$1 = corners[i0];\n      var c1$1 = corners[i1];\n      var rotPoint = midpoint(point$5(c0$1), point$5(c1$1));\n  \n      var rotCenter = center0;\n      if (SRCenter.Opposite === state.rotatePivot) {\n        var i3 = (i1 + iHalf) % n; // opposite corner\n        var i2 = i3 - 1;\n        if (i2 < 0) { i2 += n; }\n  \n        var c2 = corners[i2];\n        var c3 = corners[i3];\n        rotCenter = midpoint(point$5(c2), point$5(c3));\n      }\n  \n      rotateCenters[i1] = rotCenter.geometry.coordinates;\n      headings[i1] = bearing(rotCenter, rotPoint);\n    }\n  \n    state.rotation = {\n      feature0: polygon, // initial feature state\n      centers: rotateCenters,\n      headings: headings, // rotation start heading for each point\n    };\n  \n    // compute current distances from centers for scaling\n  \n    var scaleCenters = [];\n    var distances = [];\n    for (var i = 0; i < n; i++) {\n      var c1 = corners[i];\n      var c0 = center0.geometry.coordinates;\n      if (SRCenter.Opposite === state.scaleCenter) {\n        var i2 = (i + iHalf) % n; // opposite corner\n        c0 = corners[i2];\n      }\n      scaleCenters[i] = c0;\n      distances[i] = distance(point$5(c0), point$5(c1), { units: 'meters' });\n    }\n  \n    state.scaling = {\n      feature0: polygon, // initial feature state\n      centers: scaleCenters,\n      distances: distances,\n    };\n  };\n  \n  SRMode.onDrag = function (state, e) {\n    if (state.canDragMove !== true) { return; }\n    state.dragMoving = true;\n    e.originalEvent.stopPropagation();\n  \n    var delta = {\n      lng: e.lngLat.lng - state.dragMoveLocation.lng,\n      lat: e.lngLat.lat - state.dragMoveLocation.lat,\n    };\n    if (state.selectedCoordPaths.length > 0 && state.txMode) {\n      switch (state.txMode) {\n        case TxMode.Rotate:\n          this.dragRotatePoint(state, e, delta);\n          break;\n        case TxMode.Scale:\n          this.dragScalePoint(state, e, delta);\n          break;\n      }\n    } else {\n      this.dragFeature(state, e, delta);\n    }\n  \n    state.dragMoveLocation = e.lngLat;\n  };\n  \n  SRMode.dragRotatePoint = function (state, e, delta) {\n    if (state.rotation === undefined || state.rotation == null) {\n      throw new Error('state.rotation required');\n    }\n  \n    state.feature.toGeoJSON();\n    var m1 = point$5([e.lngLat.lng, e.lngLat.lat]);\n  \n    var n = state.rotation.centers.length;\n    var cIdx = (this.coordinateIndex(state.selectedCoordPaths) + 1) % n;\n    // TODO validate cIdx\n    var cCenter = state.rotation.centers[cIdx];\n    var center = point$5(cCenter);\n  \n    var heading1 = bearing(center, m1);\n  \n    var heading0 = state.rotation.headings[cIdx];\n    var rotateAngle = heading1 - heading0; // in degrees\n    if (isShiftDown(e)) {\n      rotateAngle = 5.0 * Math.round(rotateAngle / 5.0);\n    }\n  \n    var rotatedFeature = transformRotate(state.rotation.feature0, rotateAngle, {\n      pivot: center,\n      mutate: false,\n    });\n  \n    state.feature.incomingCoords(rotatedFeature.geometry.coordinates);\n    // TODO add option for this:\n    this.fireUpdate();\n  };\n  \n  SRMode.dragScalePoint = function (state, e, delta) {\n    if (state.scaling === undefined || state.scaling == null) {\n      throw new Error('state.scaling required');\n    }\n  \n    state.feature.toGeoJSON();\n  \n    var cIdx = this.coordinateIndex(state.selectedCoordPaths);\n    // TODO validate cIdx\n  \n    var cCenter = state.scaling.centers[cIdx];\n    var center = point$5(cCenter);\n    var m1 = point$5([e.lngLat.lng, e.lngLat.lat]);\n  \n    var dist = distance(center, m1, { units: 'meters' });\n    var scale = dist / state.scaling.distances[cIdx];\n  \n    if (isShiftDown(e)) {\n      // TODO discrete scaling\n      scale = 0.05 * Math.round(scale / 0.05);\n    }\n  \n    var scaledFeature = transformScale(state.scaling.feature0, scale, {\n      origin: cCenter,\n      mutate: false,\n    });\n  \n    state.feature.incomingCoords(scaledFeature.geometry.coordinates);\n    // TODO add option for this:\n    this.fireUpdate();\n  };\n  \n  SRMode.dragFeature = function (state, e, delta) {\n    moveFeatures(this.getSelected(), delta);\n    state.dragMoveLocation = e.lngLat;\n    // TODO add option for this:\n    this.fireUpdate();\n  };\n  \n  SRMode.fireUpdate = function () {\n    this.map.fire(events$1.UPDATE, {\n      action: updateActions.CHANGE_COORDINATES,\n      features: this.getSelected().map(function (f) { return f.toGeoJSON(); }),\n    });\n  };\n  \n  SRMode.onMouseOut = function (state) {\n    // As soon as you mouse leaves the canvas, update the feature\n    if (state.dragMoving) {\n      this.fireUpdate();\n    }\n  };\n  \n  SRMode.onTouchEnd = SRMode.onMouseUp = function (state) {\n    if (state.dragMoving) {\n      this.fireUpdate();\n    }\n    this.stopDragging(state);\n  };\n  \n  SRMode.clickActiveFeature = function (state) {\n    state.selectedCoordPaths = [];\n    this.clearSelectedCoordinates();\n    state.feature.changed();\n  };\n  \n  SRMode.onClick = function (state, e) {\n    if (noTarget(e)) { return this.clickNoTarget(state, e); }\n    if (isActiveFeature(e))\n      { return this.clickActiveFeature(state, e); }\n    if (isInactiveFeature(e)) { return this.clickInactive(state, e); }\n    this.stopDragging(state);\n  };\n  \n  SRMode.clickNoTarget = function (state, e) {\n    if (state.canSelectFeatures){\n      // activate 해제\n      state.feature.ctx.ui.deactivateButtons();\n      this.changeMode(modes$1.SIMPLE_SELECT);\n    } \n  };\n  \n  SRMode.clickInactive = function (state, e) {\n    if (state.canSelectFeatures){\n      // activate 해제\n      state.feature.ctx.ui.deactivateButtons();\n      this.changeMode(modes$1.SIMPLE_SELECT, {\n        featureIds: [e.featureTarget.properties.id],\n      });\n    }\n  };\n  \n  SRMode.onTrash = function () {\n    this.deleteFeature(this.getSelectedIds());\n    // this.fireActionable();\n  };\n\nvar modes = {\n  simple_select: SimpleSelect,\n  direct_select: DirectSelect,\n  draw_point: DrawPoint,\n  draw_polygon: DrawPolygon,\n  draw_line_string: DrawLineString,\n  SRMode: SRMode,\n};\n\nvar SRStyle = [\n    {\n      id: 'gl-draw-polygon-fill-inactive',\n      type: 'fill',\n      filter: [\n        'all',\n        ['==', 'active', 'false'],\n        ['==', '$type', 'Polygon'],\n        ['!=', 'user_type', 'overlay'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'fill-color': '#3bb2d0',\n        'fill-outline-color': '#3bb2d0',\n        'fill-opacity': 0.2,\n      },\n    },\n    {\n      id: 'gl-draw-polygon-fill-active',\n      type: 'fill',\n      filter: [\n        'all',\n        ['==', 'active', 'true'],\n        ['==', '$type', 'Polygon'],\n        ['!=', 'user_type', 'overlay'] ],\n      paint: {\n        'fill-color': '#fbb03b',\n        'fill-outline-color': '#fbb03b',\n        'fill-opacity': 0.2,\n      },\n    },\n  \n    {\n      id: 'gl-draw-overlay-polygon-fill-inactive',\n      type: 'fill',\n      filter: [\n        'all',\n        ['==', 'active', 'false'],\n        ['==', '$type', 'Polygon'],\n        ['==', 'user_type', 'overlay'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'fill-color': '#3bb2d0',\n        'fill-outline-color': '#3bb2d0',\n        'fill-opacity': 0.01,\n      },\n    },\n    {\n      id: 'gl-draw-overlay-polygon-fill-active',\n      type: 'fill',\n      filter: [\n        'all',\n        ['==', 'active', 'true'],\n        ['==', '$type', 'Polygon'],\n        ['==', 'user_type', 'overlay'] ],\n      paint: {\n        'fill-color': '#fbb03b',\n        'fill-outline-color': '#fbb03b',\n        'fill-opacity': 0.01,\n      },\n    },\n  \n    {\n      id: 'gl-draw-polygon-stroke-inactive',\n      type: 'line',\n      filter: [\n        'all',\n        ['==', 'active', 'false'],\n        ['==', '$type', 'Polygon'],\n        ['!=', 'user_type', 'overlay'],\n        ['!=', 'mode', 'static'] ],\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#3bb2d0',\n        'line-width': 2,\n      },\n    },\n  \n    {\n      id: 'gl-draw-polygon-stroke-active',\n      type: 'line',\n      filter: ['all', ['==', 'active', 'true'], ['==', '$type', 'Polygon']],\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#fbb03b',\n        'line-dasharray': [0.2, 2],\n        'line-width': 2,\n      },\n    },\n  \n    {\n      id: 'gl-draw-polygon-midpoint',\n      type: 'circle',\n      filter: ['all', ['==', '$type', 'Point'], ['==', 'meta', 'midpoint']],\n      paint: {\n        'circle-radius': 3,\n        'circle-color': '#fbb03b',\n      },\n    },\n  \n    {\n      id: 'gl-draw-line-inactive',\n      type: 'line',\n      filter: [\n        'all',\n        ['==', 'active', 'false'],\n        ['==', '$type', 'LineString'],\n        ['!=', 'mode', 'static'] ],\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#3bb2d0',\n        'line-width': 2,\n      },\n    },\n    {\n      id: 'gl-draw-line-active',\n      type: 'line',\n      filter: ['all', ['==', '$type', 'LineString'], ['==', 'active', 'true']],\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#fbb03b',\n        'line-dasharray': [0.2, 2],\n        'line-width': 2,\n      },\n    },\n    {\n      id: 'gl-draw-polygon-and-line-vertex-stroke-inactive',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', 'meta', 'vertex'],\n        ['==', '$type', 'Point'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'circle-radius': 4,\n        'circle-color': '#fff',\n      },\n    },\n    {\n      id: 'gl-draw-polygon-and-line-vertex-inactive',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', 'meta', 'vertex'],\n        ['==', '$type', 'Point'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'circle-radius': 2,\n        'circle-color': '#fbb03b',\n      },\n    },\n  \n    {\n      id: 'gl-draw-polygon-and-line-vertex-scale-icon',\n      type: 'symbol',\n      filter: [\n        'all',\n        ['==', 'meta', 'vertex'],\n        ['==', '$type', 'Point'],\n        ['!=', 'mode', 'static'],\n        ['has', 'heading'] ],\n      layout: {\n        'icon-image': 'scale',\n        'icon-allow-overlap': true,\n        'icon-ignore-placement': true,\n        'icon-rotation-alignment': 'map',\n        'icon-rotate': ['get', 'heading'],\n      },\n      paint: {\n        'icon-opacity': 1.0,\n        'icon-opacity-transition': {\n          delay: 0,\n          duration: 0,\n        },\n      },\n    },\n  \n    {\n      id: 'gl-draw-point-point-stroke-inactive',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', 'active', 'false'],\n        ['==', '$type', 'Point'],\n        ['==', 'meta', 'feature'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'circle-radius': 5,\n        'circle-opacity': 1,\n        'circle-color': '#fff',\n      },\n    },\n    {\n      id: 'gl-draw-point-inactive',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', 'active', 'false'],\n        ['==', '$type', 'Point'],\n        ['==', 'meta', 'feature'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'circle-radius': 3,\n        'circle-color': '#3bb2d0',\n      },\n    },\n    {\n      id: 'gl-draw-point-stroke-active',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', '$type', 'Point'],\n        ['==', 'active', 'true'],\n        ['!=', 'meta', 'midpoint'] ],\n      paint: {\n        'circle-radius': 4,\n        'circle-color': '#fff',\n      },\n    },\n    {\n      id: 'gl-draw-point-active',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', '$type', 'Point'],\n        ['!=', 'meta', 'midpoint'],\n        ['==', 'active', 'true'] ],\n      paint: {\n        'circle-radius': 2,\n        'circle-color': '#fbb03b',\n      },\n    },\n    {\n      id: 'gl-draw-polygon-fill-static',\n      type: 'fill',\n      filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n      paint: {\n        'fill-color': '#404040',\n        'fill-outline-color': '#404040',\n        'fill-opacity': 0.1,\n      },\n    },\n    {\n      id: 'gl-draw-polygon-stroke-static',\n      type: 'line',\n      filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Polygon']],\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#404040',\n        'line-width': 2,\n      },\n    },\n    {\n      id: 'gl-draw-line-static',\n      type: 'line',\n      filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'LineString']],\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#404040',\n        'line-width': 2,\n      },\n    },\n    {\n      id: 'gl-draw-point-static',\n      type: 'circle',\n      filter: ['all', ['==', 'mode', 'static'], ['==', '$type', 'Point']],\n      paint: {\n        'circle-radius': 5,\n        'circle-color': '#404040',\n      },\n    },\n  \n    // {\n    //     'id': 'gl-draw-polygon-rotate-point',\n    //     'type': 'circle',\n    //     'filter': ['all',\n    //         ['==', '$type', 'Point'],\n    //         ['==', 'meta', 'rotate_point']],\n    //     'paint': {\n    //         'circle-radius': 5,\n    //         'circle-color': '#fbb03b'\n    //     }\n    // },\n  \n    {\n      id: 'gl-draw-line-rotate-point',\n      type: 'line',\n      filter: [\n        'all',\n        ['==', 'meta', 'midpoint'],\n        ['==', 'icon', 'rotate'],\n        ['==', '$type', 'LineString'],\n        ['!=', 'mode', 'static'] ],\n      layout: {\n        'line-cap': 'round',\n        'line-join': 'round',\n      },\n      paint: {\n        'line-color': '#fbb03b',\n        'line-dasharray': [0.2, 2],\n        'line-width': 2,\n      },\n    },\n    {\n      id: 'gl-draw-polygon-rotate-point-stroke',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', 'meta', 'midpoint'],\n        ['==', 'icon', 'rotate'],\n        ['==', '$type', 'Point'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'circle-radius': 4,\n        'circle-color': '#fff',\n      },\n    },\n    {\n      id: 'gl-draw-polygon-rotate-point',\n      type: 'circle',\n      filter: [\n        'all',\n        ['==', 'meta', 'midpoint'],\n        ['==', 'icon', 'rotate'],\n        ['==', '$type', 'Point'],\n        ['!=', 'mode', 'static'] ],\n      paint: {\n        'circle-radius': 2,\n        'circle-color': '#fbb03b',\n      },\n    },\n    {\n      id: 'gl-draw-polygon-rotate-point-icon',\n      type: 'symbol',\n      filter: [\n        'all',\n        ['==', 'meta', 'midpoint'],\n        ['==', 'icon', 'rotate'],\n        ['==', '$type', 'Point'],\n        ['!=', 'mode', 'static'] ],\n      layout: {\n        'icon-image': 'rotate',\n        'icon-allow-overlap': true,\n        'icon-ignore-placement': true,\n        'icon-rotation-alignment': 'map',\n        'icon-rotate': ['get', 'heading'],\n      },\n      paint: {\n        'icon-opacity': 1.0,\n        'icon-opacity-transition': {\n          delay: 0,\n          duration: 0,\n        },\n      },\n    } ];\n\nvar defaultOptions = {\n  defaultMode: modes$1.SIMPLE_SELECT,\n  keybindings: true,\n  touchEnabled: true,\n  clickBuffer: 2,\n  touchBuffer: 25,\n  boxSelect: true,\n  displayControlsDefault: true,\n  styles : SRStyle,\n  modes: modes,\n  controls: {},\n  userProperties: false\n};\n\nvar showControls = {\n  point: true,\n  line_string: true,\n  polygon: true,\n  trash: true,\n  combine_features: true,\n  uncombine_features: true,\n  srmode: true\n};\n\nvar hideControls = {\n  point: false,\n  line_string: false,\n  polygon: false,\n  trash: false,\n  combine_features: false,\n  uncombine_features: false,\n  srmode: false\n};\n\nfunction addSources(styles, sourceBucket) {\n  return styles.map(function (style) {\n    if (style.source) { return style; }\n    return xtend(style, {\n      id: ((style.id) + \".\" + sourceBucket),\n      source: (sourceBucket === 'hot') ? sources.HOT : sources.COLD\n    });\n  });\n}\n\nfunction setupOptions(options) {\n  if ( options === void 0 ) options = {};\n\n  var withDefaults = xtend(options);\n\n  if (!options.controls) {\n    withDefaults.controls = {};\n  }\n\n  if (options.displayControlsDefault === false) {\n    withDefaults.controls = xtend(hideControls, options.controls);\n  } else {\n    withDefaults.controls = xtend(showControls, options.controls);\n  }\n\n  withDefaults = xtend(defaultOptions, withDefaults);\n\n  // Layers with a shared source should be adjacent for performance reasons\n  withDefaults.styles = addSources(withDefaults.styles, 'cold').concat(addSources(withDefaults.styles, 'hot'));\n\n  return withDefaults;\n}\n\nvar lodash_isequal = {exports: {}};\n\n/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\nlodash_isequal.exports;\n\n(function (module, exports) {\n\t/** Used as the size to enable large array optimizations. */\n\tvar LARGE_ARRAY_SIZE = 200;\n\n\t/** Used to stand-in for `undefined` hash values. */\n\tvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n\t/** Used to compose bitmasks for value comparisons. */\n\tvar COMPARE_PARTIAL_FLAG = 1,\n\t    COMPARE_UNORDERED_FLAG = 2;\n\n\t/** Used as references for various `Number` constants. */\n\tvar MAX_SAFE_INTEGER = 9007199254740991;\n\n\t/** `Object#toString` result references. */\n\tvar argsTag = '[object Arguments]',\n\t    arrayTag = '[object Array]',\n\t    asyncTag = '[object AsyncFunction]',\n\t    boolTag = '[object Boolean]',\n\t    dateTag = '[object Date]',\n\t    errorTag = '[object Error]',\n\t    funcTag = '[object Function]',\n\t    genTag = '[object GeneratorFunction]',\n\t    mapTag = '[object Map]',\n\t    numberTag = '[object Number]',\n\t    nullTag = '[object Null]',\n\t    objectTag = '[object Object]',\n\t    promiseTag = '[object Promise]',\n\t    proxyTag = '[object Proxy]',\n\t    regexpTag = '[object RegExp]',\n\t    setTag = '[object Set]',\n\t    stringTag = '[object String]',\n\t    symbolTag = '[object Symbol]',\n\t    undefinedTag = '[object Undefined]',\n\t    weakMapTag = '[object WeakMap]';\n\n\tvar arrayBufferTag = '[object ArrayBuffer]',\n\t    dataViewTag = '[object DataView]',\n\t    float32Tag = '[object Float32Array]',\n\t    float64Tag = '[object Float64Array]',\n\t    int8Tag = '[object Int8Array]',\n\t    int16Tag = '[object Int16Array]',\n\t    int32Tag = '[object Int32Array]',\n\t    uint8Tag = '[object Uint8Array]',\n\t    uint8ClampedTag = '[object Uint8ClampedArray]',\n\t    uint16Tag = '[object Uint16Array]',\n\t    uint32Tag = '[object Uint32Array]';\n\n\t/**\n\t * Used to match `RegExp`\n\t * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n\t */\n\tvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n\t/** Used to detect host constructors (Safari). */\n\tvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n\t/** Used to detect unsigned integer values. */\n\tvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n\t/** Used to identify `toStringTag` values of typed arrays. */\n\tvar typedArrayTags = {};\n\ttypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n\ttypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n\ttypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n\ttypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n\ttypedArrayTags[uint32Tag] = true;\n\ttypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n\ttypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n\ttypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n\ttypedArrayTags[errorTag] = typedArrayTags[funcTag] =\n\ttypedArrayTags[mapTag] = typedArrayTags[numberTag] =\n\ttypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n\ttypedArrayTags[setTag] = typedArrayTags[stringTag] =\n\ttypedArrayTags[weakMapTag] = false;\n\n\t/** Detect free variable `global` from Node.js. */\n\tvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n\t/** Detect free variable `self`. */\n\tvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n\t/** Used as a reference to the global object. */\n\tvar root = freeGlobal || freeSelf || Function('return this')();\n\n\t/** Detect free variable `exports`. */\n\tvar freeExports = exports && !exports.nodeType && exports;\n\n\t/** Detect free variable `module`. */\n\tvar freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n\n\t/** Detect the popular CommonJS extension `module.exports`. */\n\tvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n\t/** Detect free variable `process` from Node.js. */\n\tvar freeProcess = moduleExports && freeGlobal.process;\n\n\t/** Used to access faster Node.js helpers. */\n\tvar nodeUtil = (function() {\n\t  try {\n\t    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n\t  } catch (e) {}\n\t}());\n\n\t/* Node.js helper references. */\n\tvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n\t/**\n\t * A specialized version of `_.filter` for arrays without support for\n\t * iteratee shorthands.\n\t *\n\t * @private\n\t * @param {Array} [array] The array to iterate over.\n\t * @param {Function} predicate The function invoked per iteration.\n\t * @returns {Array} Returns the new filtered array.\n\t */\n\tfunction arrayFilter(array, predicate) {\n\t  var index = -1,\n\t      length = array == null ? 0 : array.length,\n\t      resIndex = 0,\n\t      result = [];\n\n\t  while (++index < length) {\n\t    var value = array[index];\n\t    if (predicate(value, index, array)) {\n\t      result[resIndex++] = value;\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Appends the elements of `values` to `array`.\n\t *\n\t * @private\n\t * @param {Array} array The array to modify.\n\t * @param {Array} values The values to append.\n\t * @returns {Array} Returns `array`.\n\t */\n\tfunction arrayPush(array, values) {\n\t  var index = -1,\n\t      length = values.length,\n\t      offset = array.length;\n\n\t  while (++index < length) {\n\t    array[offset + index] = values[index];\n\t  }\n\t  return array;\n\t}\n\n\t/**\n\t * A specialized version of `_.some` for arrays without support for iteratee\n\t * shorthands.\n\t *\n\t * @private\n\t * @param {Array} [array] The array to iterate over.\n\t * @param {Function} predicate The function invoked per iteration.\n\t * @returns {boolean} Returns `true` if any element passes the predicate check,\n\t *  else `false`.\n\t */\n\tfunction arraySome(array, predicate) {\n\t  var index = -1,\n\t      length = array == null ? 0 : array.length;\n\n\t  while (++index < length) {\n\t    if (predicate(array[index], index, array)) {\n\t      return true;\n\t    }\n\t  }\n\t  return false;\n\t}\n\n\t/**\n\t * The base implementation of `_.times` without support for iteratee shorthands\n\t * or max array length checks.\n\t *\n\t * @private\n\t * @param {number} n The number of times to invoke `iteratee`.\n\t * @param {Function} iteratee The function invoked per iteration.\n\t * @returns {Array} Returns the array of results.\n\t */\n\tfunction baseTimes(n, iteratee) {\n\t  var index = -1,\n\t      result = Array(n);\n\n\t  while (++index < n) {\n\t    result[index] = iteratee(index);\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * The base implementation of `_.unary` without support for storing metadata.\n\t *\n\t * @private\n\t * @param {Function} func The function to cap arguments for.\n\t * @returns {Function} Returns the new capped function.\n\t */\n\tfunction baseUnary(func) {\n\t  return function(value) {\n\t    return func(value);\n\t  };\n\t}\n\n\t/**\n\t * Checks if a `cache` value for `key` exists.\n\t *\n\t * @private\n\t * @param {Object} cache The cache to query.\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction cacheHas(cache, key) {\n\t  return cache.has(key);\n\t}\n\n\t/**\n\t * Gets the value at `key` of `object`.\n\t *\n\t * @private\n\t * @param {Object} [object] The object to query.\n\t * @param {string} key The key of the property to get.\n\t * @returns {*} Returns the property value.\n\t */\n\tfunction getValue(object, key) {\n\t  return object == null ? undefined : object[key];\n\t}\n\n\t/**\n\t * Converts `map` to its key-value pairs.\n\t *\n\t * @private\n\t * @param {Object} map The map to convert.\n\t * @returns {Array} Returns the key-value pairs.\n\t */\n\tfunction mapToArray(map) {\n\t  var index = -1,\n\t      result = Array(map.size);\n\n\t  map.forEach(function(value, key) {\n\t    result[++index] = [key, value];\n\t  });\n\t  return result;\n\t}\n\n\t/**\n\t * Creates a unary function that invokes `func` with its argument transformed.\n\t *\n\t * @private\n\t * @param {Function} func The function to wrap.\n\t * @param {Function} transform The argument transform.\n\t * @returns {Function} Returns the new function.\n\t */\n\tfunction overArg(func, transform) {\n\t  return function(arg) {\n\t    return func(transform(arg));\n\t  };\n\t}\n\n\t/**\n\t * Converts `set` to an array of its values.\n\t *\n\t * @private\n\t * @param {Object} set The set to convert.\n\t * @returns {Array} Returns the values.\n\t */\n\tfunction setToArray(set) {\n\t  var index = -1,\n\t      result = Array(set.size);\n\n\t  set.forEach(function(value) {\n\t    result[++index] = value;\n\t  });\n\t  return result;\n\t}\n\n\t/** Used for built-in method references. */\n\tvar arrayProto = Array.prototype,\n\t    funcProto = Function.prototype,\n\t    objectProto = Object.prototype;\n\n\t/** Used to detect overreaching core-js shims. */\n\tvar coreJsData = root['__core-js_shared__'];\n\n\t/** Used to resolve the decompiled source of functions. */\n\tvar funcToString = funcProto.toString;\n\n\t/** Used to check objects for own properties. */\n\tvar hasOwnProperty = objectProto.hasOwnProperty;\n\n\t/** Used to detect methods masquerading as native. */\n\tvar maskSrcKey = (function() {\n\t  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n\t  return uid ? ('Symbol(src)_1.' + uid) : '';\n\t}());\n\n\t/**\n\t * Used to resolve the\n\t * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n\t * of values.\n\t */\n\tvar nativeObjectToString = objectProto.toString;\n\n\t/** Used to detect if a method is native. */\n\tvar reIsNative = RegExp('^' +\n\t  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n\t  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n\t);\n\n\t/** Built-in value references. */\n\tvar Buffer = moduleExports ? root.Buffer : undefined,\n\t    Symbol = root.Symbol,\n\t    Uint8Array = root.Uint8Array,\n\t    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n\t    splice = arrayProto.splice,\n\t    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n\t/* Built-in method references for those with the same name as other `lodash` methods. */\n\tvar nativeGetSymbols = Object.getOwnPropertySymbols,\n\t    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n\t    nativeKeys = overArg(Object.keys, Object);\n\n\t/* Built-in method references that are verified to be native. */\n\tvar DataView = getNative(root, 'DataView'),\n\t    Map = getNative(root, 'Map'),\n\t    Promise = getNative(root, 'Promise'),\n\t    Set = getNative(root, 'Set'),\n\t    WeakMap = getNative(root, 'WeakMap'),\n\t    nativeCreate = getNative(Object, 'create');\n\n\t/** Used to detect maps, sets, and weakmaps. */\n\tvar dataViewCtorString = toSource(DataView),\n\t    mapCtorString = toSource(Map),\n\t    promiseCtorString = toSource(Promise),\n\t    setCtorString = toSource(Set),\n\t    weakMapCtorString = toSource(WeakMap);\n\n\t/** Used to convert symbols to primitives and strings. */\n\tvar symbolProto = Symbol ? Symbol.prototype : undefined,\n\t    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n\t/**\n\t * Creates a hash object.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction Hash(entries) {\n\t  var index = -1,\n\t      length = entries == null ? 0 : entries.length;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the hash.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf Hash\n\t */\n\tfunction hashClear() {\n\t  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n\t  this.size = 0;\n\t}\n\n\t/**\n\t * Removes `key` and its value from the hash.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf Hash\n\t * @param {Object} hash The hash to modify.\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction hashDelete(key) {\n\t  var result = this.has(key) && delete this.__data__[key];\n\t  this.size -= result ? 1 : 0;\n\t  return result;\n\t}\n\n\t/**\n\t * Gets the hash value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf Hash\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction hashGet(key) {\n\t  var data = this.__data__;\n\t  if (nativeCreate) {\n\t    var result = data[key];\n\t    return result === HASH_UNDEFINED ? undefined : result;\n\t  }\n\t  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n\t}\n\n\t/**\n\t * Checks if a hash value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf Hash\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction hashHas(key) {\n\t  var data = this.__data__;\n\t  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n\t}\n\n\t/**\n\t * Sets the hash `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf Hash\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the hash instance.\n\t */\n\tfunction hashSet(key, value) {\n\t  var data = this.__data__;\n\t  this.size += this.has(key) ? 0 : 1;\n\t  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n\t  return this;\n\t}\n\n\t// Add methods to `Hash`.\n\tHash.prototype.clear = hashClear;\n\tHash.prototype['delete'] = hashDelete;\n\tHash.prototype.get = hashGet;\n\tHash.prototype.has = hashHas;\n\tHash.prototype.set = hashSet;\n\n\t/**\n\t * Creates an list cache object.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction ListCache(entries) {\n\t  var index = -1,\n\t      length = entries == null ? 0 : entries.length;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the list cache.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf ListCache\n\t */\n\tfunction listCacheClear() {\n\t  this.__data__ = [];\n\t  this.size = 0;\n\t}\n\n\t/**\n\t * Removes `key` and its value from the list cache.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction listCacheDelete(key) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  if (index < 0) {\n\t    return false;\n\t  }\n\t  var lastIndex = data.length - 1;\n\t  if (index == lastIndex) {\n\t    data.pop();\n\t  } else {\n\t    splice.call(data, index, 1);\n\t  }\n\t  --this.size;\n\t  return true;\n\t}\n\n\t/**\n\t * Gets the list cache value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction listCacheGet(key) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  return index < 0 ? undefined : data[index][1];\n\t}\n\n\t/**\n\t * Checks if a list cache value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf ListCache\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction listCacheHas(key) {\n\t  return assocIndexOf(this.__data__, key) > -1;\n\t}\n\n\t/**\n\t * Sets the list cache `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf ListCache\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the list cache instance.\n\t */\n\tfunction listCacheSet(key, value) {\n\t  var data = this.__data__,\n\t      index = assocIndexOf(data, key);\n\n\t  if (index < 0) {\n\t    ++this.size;\n\t    data.push([key, value]);\n\t  } else {\n\t    data[index][1] = value;\n\t  }\n\t  return this;\n\t}\n\n\t// Add methods to `ListCache`.\n\tListCache.prototype.clear = listCacheClear;\n\tListCache.prototype['delete'] = listCacheDelete;\n\tListCache.prototype.get = listCacheGet;\n\tListCache.prototype.has = listCacheHas;\n\tListCache.prototype.set = listCacheSet;\n\n\t/**\n\t * Creates a map cache object to store key-value pairs.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction MapCache(entries) {\n\t  var index = -1,\n\t      length = entries == null ? 0 : entries.length;\n\n\t  this.clear();\n\t  while (++index < length) {\n\t    var entry = entries[index];\n\t    this.set(entry[0], entry[1]);\n\t  }\n\t}\n\n\t/**\n\t * Removes all key-value entries from the map.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf MapCache\n\t */\n\tfunction mapCacheClear() {\n\t  this.size = 0;\n\t  this.__data__ = {\n\t    'hash': new Hash,\n\t    'map': new (Map || ListCache),\n\t    'string': new Hash\n\t  };\n\t}\n\n\t/**\n\t * Removes `key` and its value from the map.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction mapCacheDelete(key) {\n\t  var result = getMapData(this, key)['delete'](key);\n\t  this.size -= result ? 1 : 0;\n\t  return result;\n\t}\n\n\t/**\n\t * Gets the map value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction mapCacheGet(key) {\n\t  return getMapData(this, key).get(key);\n\t}\n\n\t/**\n\t * Checks if a map value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf MapCache\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction mapCacheHas(key) {\n\t  return getMapData(this, key).has(key);\n\t}\n\n\t/**\n\t * Sets the map `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf MapCache\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the map cache instance.\n\t */\n\tfunction mapCacheSet(key, value) {\n\t  var data = getMapData(this, key),\n\t      size = data.size;\n\n\t  data.set(key, value);\n\t  this.size += data.size == size ? 0 : 1;\n\t  return this;\n\t}\n\n\t// Add methods to `MapCache`.\n\tMapCache.prototype.clear = mapCacheClear;\n\tMapCache.prototype['delete'] = mapCacheDelete;\n\tMapCache.prototype.get = mapCacheGet;\n\tMapCache.prototype.has = mapCacheHas;\n\tMapCache.prototype.set = mapCacheSet;\n\n\t/**\n\t *\n\t * Creates an array cache object to store unique values.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [values] The values to cache.\n\t */\n\tfunction SetCache(values) {\n\t  var index = -1,\n\t      length = values == null ? 0 : values.length;\n\n\t  this.__data__ = new MapCache;\n\t  while (++index < length) {\n\t    this.add(values[index]);\n\t  }\n\t}\n\n\t/**\n\t * Adds `value` to the array cache.\n\t *\n\t * @private\n\t * @name add\n\t * @memberOf SetCache\n\t * @alias push\n\t * @param {*} value The value to cache.\n\t * @returns {Object} Returns the cache instance.\n\t */\n\tfunction setCacheAdd(value) {\n\t  this.__data__.set(value, HASH_UNDEFINED);\n\t  return this;\n\t}\n\n\t/**\n\t * Checks if `value` is in the array cache.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf SetCache\n\t * @param {*} value The value to search for.\n\t * @returns {number} Returns `true` if `value` is found, else `false`.\n\t */\n\tfunction setCacheHas(value) {\n\t  return this.__data__.has(value);\n\t}\n\n\t// Add methods to `SetCache`.\n\tSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n\tSetCache.prototype.has = setCacheHas;\n\n\t/**\n\t * Creates a stack cache object to store key-value pairs.\n\t *\n\t * @private\n\t * @constructor\n\t * @param {Array} [entries] The key-value pairs to cache.\n\t */\n\tfunction Stack(entries) {\n\t  var data = this.__data__ = new ListCache(entries);\n\t  this.size = data.size;\n\t}\n\n\t/**\n\t * Removes all key-value entries from the stack.\n\t *\n\t * @private\n\t * @name clear\n\t * @memberOf Stack\n\t */\n\tfunction stackClear() {\n\t  this.__data__ = new ListCache;\n\t  this.size = 0;\n\t}\n\n\t/**\n\t * Removes `key` and its value from the stack.\n\t *\n\t * @private\n\t * @name delete\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to remove.\n\t * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n\t */\n\tfunction stackDelete(key) {\n\t  var data = this.__data__,\n\t      result = data['delete'](key);\n\n\t  this.size = data.size;\n\t  return result;\n\t}\n\n\t/**\n\t * Gets the stack value for `key`.\n\t *\n\t * @private\n\t * @name get\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to get.\n\t * @returns {*} Returns the entry value.\n\t */\n\tfunction stackGet(key) {\n\t  return this.__data__.get(key);\n\t}\n\n\t/**\n\t * Checks if a stack value for `key` exists.\n\t *\n\t * @private\n\t * @name has\n\t * @memberOf Stack\n\t * @param {string} key The key of the entry to check.\n\t * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n\t */\n\tfunction stackHas(key) {\n\t  return this.__data__.has(key);\n\t}\n\n\t/**\n\t * Sets the stack `key` to `value`.\n\t *\n\t * @private\n\t * @name set\n\t * @memberOf Stack\n\t * @param {string} key The key of the value to set.\n\t * @param {*} value The value to set.\n\t * @returns {Object} Returns the stack cache instance.\n\t */\n\tfunction stackSet(key, value) {\n\t  var data = this.__data__;\n\t  if (data instanceof ListCache) {\n\t    var pairs = data.__data__;\n\t    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n\t      pairs.push([key, value]);\n\t      this.size = ++data.size;\n\t      return this;\n\t    }\n\t    data = this.__data__ = new MapCache(pairs);\n\t  }\n\t  data.set(key, value);\n\t  this.size = data.size;\n\t  return this;\n\t}\n\n\t// Add methods to `Stack`.\n\tStack.prototype.clear = stackClear;\n\tStack.prototype['delete'] = stackDelete;\n\tStack.prototype.get = stackGet;\n\tStack.prototype.has = stackHas;\n\tStack.prototype.set = stackSet;\n\n\t/**\n\t * Creates an array of the enumerable property names of the array-like `value`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @param {boolean} inherited Specify returning inherited property names.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction arrayLikeKeys(value, inherited) {\n\t  var isArr = isArray(value),\n\t      isArg = !isArr && isArguments(value),\n\t      isBuff = !isArr && !isArg && isBuffer(value),\n\t      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n\t      skipIndexes = isArr || isArg || isBuff || isType,\n\t      result = skipIndexes ? baseTimes(value.length, String) : [],\n\t      length = result.length;\n\n\t  for (var key in value) {\n\t    if ((inherited || hasOwnProperty.call(value, key)) &&\n\t        !(skipIndexes && (\n\t           // Safari 9 has enumerable `arguments.length` in strict mode.\n\t           key == 'length' ||\n\t           // Node.js 0.10 has enumerable non-index properties on buffers.\n\t           (isBuff && (key == 'offset' || key == 'parent')) ||\n\t           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n\t           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n\t           // Skip index properties.\n\t           isIndex(key, length)\n\t        ))) {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Gets the index at which the `key` is found in `array` of key-value pairs.\n\t *\n\t * @private\n\t * @param {Array} array The array to inspect.\n\t * @param {*} key The key to search for.\n\t * @returns {number} Returns the index of the matched value, else `-1`.\n\t */\n\tfunction assocIndexOf(array, key) {\n\t  var length = array.length;\n\t  while (length--) {\n\t    if (eq(array[length][0], key)) {\n\t      return length;\n\t    }\n\t  }\n\t  return -1;\n\t}\n\n\t/**\n\t * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n\t * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n\t * symbols of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @param {Function} keysFunc The function to get the keys of `object`.\n\t * @param {Function} symbolsFunc The function to get the symbols of `object`.\n\t * @returns {Array} Returns the array of property names and symbols.\n\t */\n\tfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n\t  var result = keysFunc(object);\n\t  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n\t}\n\n\t/**\n\t * The base implementation of `getTag` without fallbacks for buggy environments.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @returns {string} Returns the `toStringTag`.\n\t */\n\tfunction baseGetTag(value) {\n\t  if (value == null) {\n\t    return value === undefined ? undefinedTag : nullTag;\n\t  }\n\t  return (symToStringTag && symToStringTag in Object(value))\n\t    ? getRawTag(value)\n\t    : objectToString(value);\n\t}\n\n\t/**\n\t * The base implementation of `_.isArguments`.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n\t */\n\tfunction baseIsArguments(value) {\n\t  return isObjectLike(value) && baseGetTag(value) == argsTag;\n\t}\n\n\t/**\n\t * The base implementation of `_.isEqual` which supports partial comparisons\n\t * and tracks traversed objects.\n\t *\n\t * @private\n\t * @param {*} value The value to compare.\n\t * @param {*} other The other value to compare.\n\t * @param {boolean} bitmask The bitmask flags.\n\t *  1 - Unordered comparison\n\t *  2 - Partial comparison\n\t * @param {Function} [customizer] The function to customize comparisons.\n\t * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n\t * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n\t */\n\tfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n\t  if (value === other) {\n\t    return true;\n\t  }\n\t  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n\t    return value !== value && other !== other;\n\t  }\n\t  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n\t}\n\n\t/**\n\t * A specialized version of `baseIsEqual` for arrays and objects which performs\n\t * deep comparisons and tracks traversed objects enabling objects with circular\n\t * references to be compared.\n\t *\n\t * @private\n\t * @param {Object} object The object to compare.\n\t * @param {Object} other The other object to compare.\n\t * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n\t * @param {Function} customizer The function to customize comparisons.\n\t * @param {Function} equalFunc The function to determine equivalents of values.\n\t * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n\t * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n\t */\n\tfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n\t  var objIsArr = isArray(object),\n\t      othIsArr = isArray(other),\n\t      objTag = objIsArr ? arrayTag : getTag(object),\n\t      othTag = othIsArr ? arrayTag : getTag(other);\n\n\t  objTag = objTag == argsTag ? objectTag : objTag;\n\t  othTag = othTag == argsTag ? objectTag : othTag;\n\n\t  var objIsObj = objTag == objectTag,\n\t      othIsObj = othTag == objectTag,\n\t      isSameTag = objTag == othTag;\n\n\t  if (isSameTag && isBuffer(object)) {\n\t    if (!isBuffer(other)) {\n\t      return false;\n\t    }\n\t    objIsArr = true;\n\t    objIsObj = false;\n\t  }\n\t  if (isSameTag && !objIsObj) {\n\t    stack || (stack = new Stack);\n\t    return (objIsArr || isTypedArray(object))\n\t      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n\t      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n\t  }\n\t  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n\t    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n\t        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n\t    if (objIsWrapped || othIsWrapped) {\n\t      var objUnwrapped = objIsWrapped ? object.value() : object,\n\t          othUnwrapped = othIsWrapped ? other.value() : other;\n\n\t      stack || (stack = new Stack);\n\t      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n\t    }\n\t  }\n\t  if (!isSameTag) {\n\t    return false;\n\t  }\n\t  stack || (stack = new Stack);\n\t  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n\t}\n\n\t/**\n\t * The base implementation of `_.isNative` without bad shim checks.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a native function,\n\t *  else `false`.\n\t */\n\tfunction baseIsNative(value) {\n\t  if (!isObject(value) || isMasked(value)) {\n\t    return false;\n\t  }\n\t  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n\t  return pattern.test(toSource(value));\n\t}\n\n\t/**\n\t * The base implementation of `_.isTypedArray` without Node.js optimizations.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n\t */\n\tfunction baseIsTypedArray(value) {\n\t  return isObjectLike(value) &&\n\t    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n\t}\n\n\t/**\n\t * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t */\n\tfunction baseKeys(object) {\n\t  if (!isPrototype(object)) {\n\t    return nativeKeys(object);\n\t  }\n\t  var result = [];\n\t  for (var key in Object(object)) {\n\t    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n\t      result.push(key);\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * A specialized version of `baseIsEqualDeep` for arrays with support for\n\t * partial deep comparisons.\n\t *\n\t * @private\n\t * @param {Array} array The array to compare.\n\t * @param {Array} other The other array to compare.\n\t * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n\t * @param {Function} customizer The function to customize comparisons.\n\t * @param {Function} equalFunc The function to determine equivalents of values.\n\t * @param {Object} stack Tracks traversed `array` and `other` objects.\n\t * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n\t */\n\tfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n\t  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n\t      arrLength = array.length,\n\t      othLength = other.length;\n\n\t  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n\t    return false;\n\t  }\n\t  // Assume cyclic values are equal.\n\t  var stacked = stack.get(array);\n\t  if (stacked && stack.get(other)) {\n\t    return stacked == other;\n\t  }\n\t  var index = -1,\n\t      result = true,\n\t      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n\t  stack.set(array, other);\n\t  stack.set(other, array);\n\n\t  // Ignore non-index properties.\n\t  while (++index < arrLength) {\n\t    var arrValue = array[index],\n\t        othValue = other[index];\n\n\t    if (customizer) {\n\t      var compared = isPartial\n\t        ? customizer(othValue, arrValue, index, other, array, stack)\n\t        : customizer(arrValue, othValue, index, array, other, stack);\n\t    }\n\t    if (compared !== undefined) {\n\t      if (compared) {\n\t        continue;\n\t      }\n\t      result = false;\n\t      break;\n\t    }\n\t    // Recursively compare arrays (susceptible to call stack limits).\n\t    if (seen) {\n\t      if (!arraySome(other, function(othValue, othIndex) {\n\t            if (!cacheHas(seen, othIndex) &&\n\t                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n\t              return seen.push(othIndex);\n\t            }\n\t          })) {\n\t        result = false;\n\t        break;\n\t      }\n\t    } else if (!(\n\t          arrValue === othValue ||\n\t            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n\t        )) {\n\t      result = false;\n\t      break;\n\t    }\n\t  }\n\t  stack['delete'](array);\n\t  stack['delete'](other);\n\t  return result;\n\t}\n\n\t/**\n\t * A specialized version of `baseIsEqualDeep` for comparing objects of\n\t * the same `toStringTag`.\n\t *\n\t * **Note:** This function only supports comparing values with tags of\n\t * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n\t *\n\t * @private\n\t * @param {Object} object The object to compare.\n\t * @param {Object} other The other object to compare.\n\t * @param {string} tag The `toStringTag` of the objects to compare.\n\t * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n\t * @param {Function} customizer The function to customize comparisons.\n\t * @param {Function} equalFunc The function to determine equivalents of values.\n\t * @param {Object} stack Tracks traversed `object` and `other` objects.\n\t * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n\t */\n\tfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n\t  switch (tag) {\n\t    case dataViewTag:\n\t      if ((object.byteLength != other.byteLength) ||\n\t          (object.byteOffset != other.byteOffset)) {\n\t        return false;\n\t      }\n\t      object = object.buffer;\n\t      other = other.buffer;\n\n\t    case arrayBufferTag:\n\t      if ((object.byteLength != other.byteLength) ||\n\t          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n\t        return false;\n\t      }\n\t      return true;\n\n\t    case boolTag:\n\t    case dateTag:\n\t    case numberTag:\n\t      // Coerce booleans to `1` or `0` and dates to milliseconds.\n\t      // Invalid dates are coerced to `NaN`.\n\t      return eq(+object, +other);\n\n\t    case errorTag:\n\t      return object.name == other.name && object.message == other.message;\n\n\t    case regexpTag:\n\t    case stringTag:\n\t      // Coerce regexes to strings and treat strings, primitives and objects,\n\t      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n\t      // for more details.\n\t      return object == (other + '');\n\n\t    case mapTag:\n\t      var convert = mapToArray;\n\n\t    case setTag:\n\t      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n\t      convert || (convert = setToArray);\n\n\t      if (object.size != other.size && !isPartial) {\n\t        return false;\n\t      }\n\t      // Assume cyclic values are equal.\n\t      var stacked = stack.get(object);\n\t      if (stacked) {\n\t        return stacked == other;\n\t      }\n\t      bitmask |= COMPARE_UNORDERED_FLAG;\n\n\t      // Recursively compare objects (susceptible to call stack limits).\n\t      stack.set(object, other);\n\t      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n\t      stack['delete'](object);\n\t      return result;\n\n\t    case symbolTag:\n\t      if (symbolValueOf) {\n\t        return symbolValueOf.call(object) == symbolValueOf.call(other);\n\t      }\n\t  }\n\t  return false;\n\t}\n\n\t/**\n\t * A specialized version of `baseIsEqualDeep` for objects with support for\n\t * partial deep comparisons.\n\t *\n\t * @private\n\t * @param {Object} object The object to compare.\n\t * @param {Object} other The other object to compare.\n\t * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n\t * @param {Function} customizer The function to customize comparisons.\n\t * @param {Function} equalFunc The function to determine equivalents of values.\n\t * @param {Object} stack Tracks traversed `object` and `other` objects.\n\t * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n\t */\n\tfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n\t  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n\t      objProps = getAllKeys(object),\n\t      objLength = objProps.length,\n\t      othProps = getAllKeys(other),\n\t      othLength = othProps.length;\n\n\t  if (objLength != othLength && !isPartial) {\n\t    return false;\n\t  }\n\t  var index = objLength;\n\t  while (index--) {\n\t    var key = objProps[index];\n\t    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n\t      return false;\n\t    }\n\t  }\n\t  // Assume cyclic values are equal.\n\t  var stacked = stack.get(object);\n\t  if (stacked && stack.get(other)) {\n\t    return stacked == other;\n\t  }\n\t  var result = true;\n\t  stack.set(object, other);\n\t  stack.set(other, object);\n\n\t  var skipCtor = isPartial;\n\t  while (++index < objLength) {\n\t    key = objProps[index];\n\t    var objValue = object[key],\n\t        othValue = other[key];\n\n\t    if (customizer) {\n\t      var compared = isPartial\n\t        ? customizer(othValue, objValue, key, other, object, stack)\n\t        : customizer(objValue, othValue, key, object, other, stack);\n\t    }\n\t    // Recursively compare objects (susceptible to call stack limits).\n\t    if (!(compared === undefined\n\t          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n\t          : compared\n\t        )) {\n\t      result = false;\n\t      break;\n\t    }\n\t    skipCtor || (skipCtor = key == 'constructor');\n\t  }\n\t  if (result && !skipCtor) {\n\t    var objCtor = object.constructor,\n\t        othCtor = other.constructor;\n\n\t    // Non `Object` object instances with different constructors are not equal.\n\t    if (objCtor != othCtor &&\n\t        ('constructor' in object && 'constructor' in other) &&\n\t        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n\t          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n\t      result = false;\n\t    }\n\t  }\n\t  stack['delete'](object);\n\t  stack['delete'](other);\n\t  return result;\n\t}\n\n\t/**\n\t * Creates an array of own enumerable property names and symbols of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names and symbols.\n\t */\n\tfunction getAllKeys(object) {\n\t  return baseGetAllKeys(object, keys, getSymbols);\n\t}\n\n\t/**\n\t * Gets the data for `map`.\n\t *\n\t * @private\n\t * @param {Object} map The map to query.\n\t * @param {string} key The reference key.\n\t * @returns {*} Returns the map data.\n\t */\n\tfunction getMapData(map, key) {\n\t  var data = map.__data__;\n\t  return isKeyable(key)\n\t    ? data[typeof key == 'string' ? 'string' : 'hash']\n\t    : data.map;\n\t}\n\n\t/**\n\t * Gets the native function at `key` of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @param {string} key The key of the method to get.\n\t * @returns {*} Returns the function if it's native, else `undefined`.\n\t */\n\tfunction getNative(object, key) {\n\t  var value = getValue(object, key);\n\t  return baseIsNative(value) ? value : undefined;\n\t}\n\n\t/**\n\t * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @returns {string} Returns the raw `toStringTag`.\n\t */\n\tfunction getRawTag(value) {\n\t  var isOwn = hasOwnProperty.call(value, symToStringTag),\n\t      tag = value[symToStringTag];\n\n\t  try {\n\t    value[symToStringTag] = undefined;\n\t    var unmasked = true;\n\t  } catch (e) {}\n\n\t  var result = nativeObjectToString.call(value);\n\t  if (unmasked) {\n\t    if (isOwn) {\n\t      value[symToStringTag] = tag;\n\t    } else {\n\t      delete value[symToStringTag];\n\t    }\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Creates an array of the own enumerable symbols of `object`.\n\t *\n\t * @private\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of symbols.\n\t */\n\tvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n\t  if (object == null) {\n\t    return [];\n\t  }\n\t  object = Object(object);\n\t  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n\t    return propertyIsEnumerable.call(object, symbol);\n\t  });\n\t};\n\n\t/**\n\t * Gets the `toStringTag` of `value`.\n\t *\n\t * @private\n\t * @param {*} value The value to query.\n\t * @returns {string} Returns the `toStringTag`.\n\t */\n\tvar getTag = baseGetTag;\n\n\t// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n\tif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n\t    (Map && getTag(new Map) != mapTag) ||\n\t    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n\t    (Set && getTag(new Set) != setTag) ||\n\t    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n\t  getTag = function(value) {\n\t    var result = baseGetTag(value),\n\t        Ctor = result == objectTag ? value.constructor : undefined,\n\t        ctorString = Ctor ? toSource(Ctor) : '';\n\n\t    if (ctorString) {\n\t      switch (ctorString) {\n\t        case dataViewCtorString: return dataViewTag;\n\t        case mapCtorString: return mapTag;\n\t        case promiseCtorString: return promiseTag;\n\t        case setCtorString: return setTag;\n\t        case weakMapCtorString: return weakMapTag;\n\t      }\n\t    }\n\t    return result;\n\t  };\n\t}\n\n\t/**\n\t * Checks if `value` is a valid array-like index.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n\t * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n\t */\n\tfunction isIndex(value, length) {\n\t  length = length == null ? MAX_SAFE_INTEGER : length;\n\t  return !!length &&\n\t    (typeof value == 'number' || reIsUint.test(value)) &&\n\t    (value > -1 && value % 1 == 0 && value < length);\n\t}\n\n\t/**\n\t * Checks if `value` is suitable for use as unique object key.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n\t */\n\tfunction isKeyable(value) {\n\t  var type = typeof value;\n\t  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n\t    ? (value !== '__proto__')\n\t    : (value === null);\n\t}\n\n\t/**\n\t * Checks if `func` has its source masked.\n\t *\n\t * @private\n\t * @param {Function} func The function to check.\n\t * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n\t */\n\tfunction isMasked(func) {\n\t  return !!maskSrcKey && (maskSrcKey in func);\n\t}\n\n\t/**\n\t * Checks if `value` is likely a prototype object.\n\t *\n\t * @private\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n\t */\n\tfunction isPrototype(value) {\n\t  var Ctor = value && value.constructor,\n\t      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n\t  return value === proto;\n\t}\n\n\t/**\n\t * Converts `value` to a string using `Object.prototype.toString`.\n\t *\n\t * @private\n\t * @param {*} value The value to convert.\n\t * @returns {string} Returns the converted string.\n\t */\n\tfunction objectToString(value) {\n\t  return nativeObjectToString.call(value);\n\t}\n\n\t/**\n\t * Converts `func` to its source code.\n\t *\n\t * @private\n\t * @param {Function} func The function to convert.\n\t * @returns {string} Returns the source code.\n\t */\n\tfunction toSource(func) {\n\t  if (func != null) {\n\t    try {\n\t      return funcToString.call(func);\n\t    } catch (e) {}\n\t    try {\n\t      return (func + '');\n\t    } catch (e$1) {}\n\t  }\n\t  return '';\n\t}\n\n\t/**\n\t * Performs a\n\t * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n\t * comparison between two values to determine if they are equivalent.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to compare.\n\t * @param {*} other The other value to compare.\n\t * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n\t * @example\n\t *\n\t * var object = { 'a': 1 };\n\t * var other = { 'a': 1 };\n\t *\n\t * _.eq(object, object);\n\t * // => true\n\t *\n\t * _.eq(object, other);\n\t * // => false\n\t *\n\t * _.eq('a', 'a');\n\t * // => true\n\t *\n\t * _.eq('a', Object('a'));\n\t * // => false\n\t *\n\t * _.eq(NaN, NaN);\n\t * // => true\n\t */\n\tfunction eq(value, other) {\n\t  return value === other || (value !== value && other !== other);\n\t}\n\n\t/**\n\t * Checks if `value` is likely an `arguments` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n\t *  else `false`.\n\t * @example\n\t *\n\t * _.isArguments(function() { return arguments; }());\n\t * // => true\n\t *\n\t * _.isArguments([1, 2, 3]);\n\t * // => false\n\t */\n\tvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n\t  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n\t    !propertyIsEnumerable.call(value, 'callee');\n\t};\n\n\t/**\n\t * Checks if `value` is classified as an `Array` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n\t * @example\n\t *\n\t * _.isArray([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArray(document.body.children);\n\t * // => false\n\t *\n\t * _.isArray('abc');\n\t * // => false\n\t *\n\t * _.isArray(_.noop);\n\t * // => false\n\t */\n\tvar isArray = Array.isArray;\n\n\t/**\n\t * Checks if `value` is array-like. A value is considered array-like if it's\n\t * not a function and has a `value.length` that's an integer greater than or\n\t * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n\t * @example\n\t *\n\t * _.isArrayLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isArrayLike(document.body.children);\n\t * // => true\n\t *\n\t * _.isArrayLike('abc');\n\t * // => true\n\t *\n\t * _.isArrayLike(_.noop);\n\t * // => false\n\t */\n\tfunction isArrayLike(value) {\n\t  return value != null && isLength(value.length) && !isFunction(value);\n\t}\n\n\t/**\n\t * Checks if `value` is a buffer.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.3.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n\t * @example\n\t *\n\t * _.isBuffer(new Buffer(2));\n\t * // => true\n\t *\n\t * _.isBuffer(new Uint8Array(2));\n\t * // => false\n\t */\n\tvar isBuffer = nativeIsBuffer || stubFalse;\n\n\t/**\n\t * Performs a deep comparison between two values to determine if they are\n\t * equivalent.\n\t *\n\t * **Note:** This method supports comparing arrays, array buffers, booleans,\n\t * date objects, error objects, maps, numbers, `Object` objects, regexes,\n\t * sets, strings, symbols, and typed arrays. `Object` objects are compared\n\t * by their own, not inherited, enumerable properties. Functions and DOM\n\t * nodes are compared by strict equality, i.e. `===`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to compare.\n\t * @param {*} other The other value to compare.\n\t * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n\t * @example\n\t *\n\t * var object = { 'a': 1 };\n\t * var other = { 'a': 1 };\n\t *\n\t * _.isEqual(object, other);\n\t * // => true\n\t *\n\t * object === other;\n\t * // => false\n\t */\n\tfunction isEqual(value, other) {\n\t  return baseIsEqual(value, other);\n\t}\n\n\t/**\n\t * Checks if `value` is classified as a `Function` object.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n\t * @example\n\t *\n\t * _.isFunction(_);\n\t * // => true\n\t *\n\t * _.isFunction(/abc/);\n\t * // => false\n\t */\n\tfunction isFunction(value) {\n\t  if (!isObject(value)) {\n\t    return false;\n\t  }\n\t  // The use of `Object#toString` avoids issues with the `typeof` operator\n\t  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n\t  var tag = baseGetTag(value);\n\t  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n\t}\n\n\t/**\n\t * Checks if `value` is a valid array-like length.\n\t *\n\t * **Note:** This method is loosely based on\n\t * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n\t * @example\n\t *\n\t * _.isLength(3);\n\t * // => true\n\t *\n\t * _.isLength(Number.MIN_VALUE);\n\t * // => false\n\t *\n\t * _.isLength(Infinity);\n\t * // => false\n\t *\n\t * _.isLength('3');\n\t * // => false\n\t */\n\tfunction isLength(value) {\n\t  return typeof value == 'number' &&\n\t    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n\t}\n\n\t/**\n\t * Checks if `value` is the\n\t * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n\t * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 0.1.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n\t * @example\n\t *\n\t * _.isObject({});\n\t * // => true\n\t *\n\t * _.isObject([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObject(_.noop);\n\t * // => true\n\t *\n\t * _.isObject(null);\n\t * // => false\n\t */\n\tfunction isObject(value) {\n\t  var type = typeof value;\n\t  return value != null && (type == 'object' || type == 'function');\n\t}\n\n\t/**\n\t * Checks if `value` is object-like. A value is object-like if it's not `null`\n\t * and has a `typeof` result of \"object\".\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n\t * @example\n\t *\n\t * _.isObjectLike({});\n\t * // => true\n\t *\n\t * _.isObjectLike([1, 2, 3]);\n\t * // => true\n\t *\n\t * _.isObjectLike(_.noop);\n\t * // => false\n\t *\n\t * _.isObjectLike(null);\n\t * // => false\n\t */\n\tfunction isObjectLike(value) {\n\t  return value != null && typeof value == 'object';\n\t}\n\n\t/**\n\t * Checks if `value` is classified as a typed array.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 3.0.0\n\t * @category Lang\n\t * @param {*} value The value to check.\n\t * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n\t * @example\n\t *\n\t * _.isTypedArray(new Uint8Array);\n\t * // => true\n\t *\n\t * _.isTypedArray([]);\n\t * // => false\n\t */\n\tvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n\t/**\n\t * Creates an array of the own enumerable property names of `object`.\n\t *\n\t * **Note:** Non-object values are coerced to objects. See the\n\t * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n\t * for more details.\n\t *\n\t * @static\n\t * @since 0.1.0\n\t * @memberOf _\n\t * @category Object\n\t * @param {Object} object The object to query.\n\t * @returns {Array} Returns the array of property names.\n\t * @example\n\t *\n\t * function Foo() {\n\t *   this.a = 1;\n\t *   this.b = 2;\n\t * }\n\t *\n\t * Foo.prototype.c = 3;\n\t *\n\t * _.keys(new Foo);\n\t * // => ['a', 'b'] (iteration order is not guaranteed)\n\t *\n\t * _.keys('hi');\n\t * // => ['0', '1']\n\t */\n\tfunction keys(object) {\n\t  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n\t}\n\n\t/**\n\t * This method returns a new empty array.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.13.0\n\t * @category Util\n\t * @returns {Array} Returns the new empty array.\n\t * @example\n\t *\n\t * var arrays = _.times(2, _.stubArray);\n\t *\n\t * console.log(arrays);\n\t * // => [[], []]\n\t *\n\t * console.log(arrays[0] === arrays[1]);\n\t * // => false\n\t */\n\tfunction stubArray() {\n\t  return [];\n\t}\n\n\t/**\n\t * This method returns `false`.\n\t *\n\t * @static\n\t * @memberOf _\n\t * @since 4.13.0\n\t * @category Util\n\t * @returns {boolean} Returns `false`.\n\t * @example\n\t *\n\t * _.times(2, _.stubFalse);\n\t * // => [false, false]\n\t */\n\tfunction stubFalse() {\n\t  return false;\n\t}\n\n\tmodule.exports = isEqual; \n} (lodash_isequal, lodash_isequal.exports));\n\nvar lodash_isequalExports = lodash_isequal.exports;\nvar isEqual = /*@__PURE__*/getDefaultExportFromCjs(lodash_isequalExports);\n\nfunction stringSetsAreEqual(a, b) {\n  if (a.length !== b.length) { return false; }\n  return JSON.stringify(a.map(function (id) { return id; }).sort()) === JSON.stringify(b.map(function (id) { return id; }).sort());\n}\n\nvar featureTypes = {\n  Polygon: Polygon,\n  LineString: LineString,\n  Point: Point$2,\n  MultiPolygon: MultiFeature,\n  MultiLineString: MultiFeature,\n  MultiPoint: MultiFeature\n};\n\nfunction setupAPI(ctx, api) {\n\n  api.modes = modes$1;\n\n  api.getFeatureIdsAt = function(point) {\n    var features = featuresAt.click({ point: point }, null, ctx);\n    return features.map(function (feature) { return feature.properties.id; });\n  };\n\n  api.getSelectedIds = function () {\n    return ctx.store.getSelectedIds();\n  };\n\n  api.getSelected = function () {\n    return {\n      type: geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getSelectedIds().map(function (id) { return ctx.store.get(id); }).map(function (feature) { return feature.toGeoJSON(); })\n    };\n  };\n\n  api.getSelectedPoints = function () {\n    return {\n      type: geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getSelectedCoordinates().map(function (coordinate) { return ({\n        type: geojsonTypes.FEATURE,\n        properties: {},\n        geometry: {\n          type: geojsonTypes.POINT,\n          coordinates: coordinate.coordinates\n        }\n      }); })\n    };\n  };\n\n  api.set = function(featureCollection) {\n    if (featureCollection.type === undefined || featureCollection.type !== geojsonTypes.FEATURE_COLLECTION || !Array.isArray(featureCollection.features)) {\n      throw new Error('Invalid FeatureCollection');\n    }\n    var renderBatch = ctx.store.createRenderBatch();\n    var toDelete = ctx.store.getAllIds().slice();\n    var newIds = api.add(featureCollection);\n    var newIdsLookup = new StringSet(newIds);\n\n    toDelete = toDelete.filter(function (id) { return !newIdsLookup.has(id); });\n    if (toDelete.length) {\n      api.delete(toDelete);\n    }\n\n    renderBatch();\n    return newIds;\n  };\n\n  api.add = function (geojson) {\n    var featureCollection = JSON.parse(JSON.stringify(normalize$1(geojson)));\n\n    var ids = featureCollection.features.map(function (feature) {\n      feature.id = feature.id || hat$1();\n\n      if (feature.geometry === null) {\n        throw new Error('Invalid geometry: null');\n      }\n\n      if (ctx.store.get(feature.id) === undefined || ctx.store.get(feature.id).type !== feature.geometry.type) {\n        // If the feature has not yet been created ...\n        var Model = featureTypes[feature.geometry.type];\n        if (Model === undefined) {\n          throw new Error((\"Invalid geometry type: \" + (feature.geometry.type) + \".\"));\n        }\n        var internalFeature = new Model(ctx, feature);\n        ctx.store.add(internalFeature);\n      } else {\n        // If a feature of that id has already been created, and we are swapping it out ...\n        var internalFeature$1 = ctx.store.get(feature.id);\n        internalFeature$1.properties = feature.properties;\n        if (!isEqual(internalFeature$1.getCoordinates(), feature.geometry.coordinates)) {\n          internalFeature$1.incomingCoords(feature.geometry.coordinates);\n        }\n      }\n      return feature.id;\n    });\n\n    ctx.store.render();\n    return ids;\n  };\n\n\n  api.get = function (id) {\n    var feature = ctx.store.get(id);\n    if (feature) {\n      return feature.toGeoJSON();\n    }\n  };\n\n  api.getAll = function() {\n    return {\n      type: geojsonTypes.FEATURE_COLLECTION,\n      features: ctx.store.getAll().map(function (feature) { return feature.toGeoJSON(); })\n    };\n  };\n\n  api.delete = function(featureIds) {\n    ctx.store.delete(featureIds, { silent: true });\n    // If we were in direct select mode and our selected feature no longer exists\n    // (because it was deleted), we need to get out of that mode.\n    if (api.getMode() === modes$1.DIRECT_SELECT && !ctx.store.getSelectedIds().length) {\n      ctx.events.changeMode(modes$1.SIMPLE_SELECT, undefined, { silent: true });\n    } else {\n      ctx.store.render();\n    }\n\n    return api;\n  };\n\n  api.deleteAll = function() {\n    ctx.store.delete(ctx.store.getAllIds(), { silent: true });\n    // If we were in direct select mode, now our selected feature no longer exists,\n    // so escape that mode.\n    if (api.getMode() === modes$1.DIRECT_SELECT) {\n      ctx.events.changeMode(modes$1.SIMPLE_SELECT, undefined, { silent: true });\n    } else {\n      ctx.store.render();\n    }\n\n    return api;\n  };\n\n  api.changeMode = function(mode, modeOptions) {\n    if ( modeOptions === void 0 ) modeOptions = {};\n\n    // Avoid changing modes just to re-select what's already selected\n    if (mode === modes$1.SIMPLE_SELECT && api.getMode() === modes$1.SIMPLE_SELECT) {\n      if (stringSetsAreEqual((modeOptions.featureIds || []), ctx.store.getSelectedIds())) { return api; }\n      // And if we are changing the selection within simple_select mode, just change the selection,\n      // instead of stopping and re-starting the mode\n      ctx.store.setSelected(modeOptions.featureIds, { silent: true });\n      ctx.store.render();\n      return api;\n    }\n\n    if (mode === modes$1.DIRECT_SELECT && api.getMode() === modes$1.DIRECT_SELECT &&\n      modeOptions.featureId === ctx.store.getSelectedIds()[0]) {\n      return api;\n    }\n\n    ctx.events.changeMode(mode, modeOptions, { silent: true });\n    return api;\n  };\n\n  api.getMode = function() {\n    return ctx.events.getMode();\n  };\n\n  api.trash = function() {\n    ctx.events.trash({ silent: true });\n    return api;\n  };\n\n  api.combineFeatures = function() {\n    ctx.events.combineFeatures({ silent: true });\n    return api;\n  };\n\n  api.uncombineFeatures = function() {\n    ctx.events.uncombineFeatures({ silent: true });\n    return api;\n  };\n\n  api.setFeatureProperty = function(featureId, property, value) {\n    ctx.store.setFeatureProperty(featureId, property, value);\n    return api;\n  };\n\n  return api;\n}\n\nvar lib = /*#__PURE__*/Object.freeze({\n__proto__: null,\nCommonSelectors: common_selectors,\nconstrainFeatureMovement: constrainFeatureMovement,\ncreateMidPoint: createMidpoint,\ncreateSupplementaryPoints: createSupplementaryPoints,\ncreateVertex: createVertex,\ndoubleClickZoom: doubleClickZoom,\neuclideanDistance: euclideanDistance,\nfeaturesAt: featuresAt,\ngetFeatureAtAndSetCursors: getFeatureAtAndSetCursors,\nisClick: isClick,\nisEventAtCoordinates: isEventAtCoordinates,\nisTap: isTap,\nmapEventToBoundingBox: mapEventToBoundingBox,\nModeHandler: ModeHandler,\nmoveFeatures: moveFeatures,\nsortFeatures: sortFeatures,\nstringSetsAreEqual: stringSetsAreEqual,\nStringSet: StringSet,\ntheme: theme,\ntoDenseArray: toDenseArray\n});\n\nvar setupDraw = function(options, api) {\n  options = setupOptions(options);\n\n  var ctx = {\n    options: options\n  };\n\n  api = setupAPI(ctx, api);\n  ctx.api = api;\n\n  var setup = runSetup(ctx);\n\n  api.onAdd = setup.onAdd;\n  api.onRemove = setup.onRemove;\n  api.types = types$1;\n  api.options = options;\n\n  return api;\n};\n\nfunction MapboxDraw(options) {\n  setupDraw(options, this);\n}\nMapboxDraw.modes = modes;\nMapboxDraw.constants = Constants;\nMapboxDraw.lib = lib;\n\nexport { MapboxDraw as default };\n\n"],
  "mappings": "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",
  "names": ["render", "a", "feature", "bbox", "classes", "e", "modes", "events", "point", "midpoint", "t", "list", "flatten", "clone", "immutable", "isArray", "i", "isFeature", "geometry", "distance", "bearing", "destination", "geom", "c2", "c3", "center", "scale", "hasOwnProperty", "Promise", "isObject", "othValue", "keys", "isEqual"]
}
